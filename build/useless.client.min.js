var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(m,n,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");m!=Array.prototype&&m!=Object.prototype&&(m[n]=c.value)};$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global?global:m};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(m){return $jscomp.SYMBOL_PREFIX+(m||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var m=$jscomp.global.Symbol.iterator;m||(m=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[m]&&$jscomp.defineProperty(Array.prototype,m,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(m){var n=0;return $jscomp.iteratorPrototype(function(){return n<m.length?{done:!1,value:m[n++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(m){$jscomp.initSymbolIterator();m={next:m};m[$jscomp.global.Symbol.iterator]=function(){return this};return m};
(function(m){function n(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};m[a].call(b.exports,b,b.exports,n);b.l=!0;return b.exports}var c={};n.m=m;n.c=c;n.i=function(a){return a};n.d=function(a,b,d){Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:d})};n.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};n.d(b,"a",b);return b};n.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};n.p="";return n(n.s=37)})([function(m,n){var c;
c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(c=window)}m.exports=c},function(m,n,c){m.exports=function(){var a=c(34),b=Function.bind.call(Function.call,Array.prototype.reduce),d=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),k=Function.bind.call(Function.call,Array.prototype.concat);Object.values||(Object.values=function(c){return b(a(c),function(a,b){return k(a,"string"===typeof b&&d(c,b)?[c[b]]:[])},
[])});Object.entries||(Object.entries=function(c){return b(a(c),function(a,b){return k(a,"string"===typeof b&&d(c,b)?[[b,c[b]]]:[])},[])});return Object}()},function(m,n,c){(function(a){("undefined"===typeof window?a:window).Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var d="",c,f,e,h,p,l,w=0;for(a=Base64._utf8_encode(a);w<a.length;)c=a.charCodeAt(w++),f=a.charCodeAt(w++),e=a.charCodeAt(w++),h=c>>2,c=(c&3)<<4|f>>4,p=(f&15)<<2|e>>6,l=e&63,
isNaN(f)?p=l=64:isNaN(e)&&(l=64),d=d+Base64._keyStr.charAt(h)+Base64._keyStr.charAt(c)+Base64._keyStr.charAt(p)+Base64._keyStr.charAt(l);return d},decode:function(a){var d="",c,f,e,h,p,l=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<a.length;)c=Base64._keyStr.indexOf(a.charAt(l++)),f=Base64._keyStr.indexOf(a.charAt(l++)),h=Base64._keyStr.indexOf(a.charAt(l++)),p=Base64._keyStr.indexOf(a.charAt(l++)),c=c<<2|f>>4,f=(f&15)<<4|h>>2,e=(h&3)<<6|p,d+=String.fromCharCode(c),64!=h&&(d+=String.fromCharCode(f)),
64!=p&&(d+=String.fromCharCode(e));return d=Base64._utf8_decode(d)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var d="",c=0;c<a.length;c++){var f=a.charCodeAt(c);128>f?d+=String.fromCharCode(f):(127<f&&2048>f?d+=String.fromCharCode(f>>6|192):(d+=String.fromCharCode(f>>12|224),d+=String.fromCharCode(f>>6&63|128)),d+=String.fromCharCode(f&63|128))}return d},_utf8_decode:function(a){var d="",c=0,f;for(c1=c2=0;c<a.length;)f=a.charCodeAt(c),128>f?(d+=String.fromCharCode(f),c++):191<f&&224>
f?(c2=a.charCodeAt(c+1),d+=String.fromCharCode((f&31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),d+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63),c+=3);return d}}}).call(n,c(0))},function(m,n,c){var a=m.exports=c(36);a.fromPairs=a.object;a.mapValues=a.mapObject;a.zipWith=function(b,d){return a.reduce(b.slice(1),function(b,c){return a.times(Math.max(b&&b.length||0,c&&c.length||0),function(a){return d(b&&b[a],c&&c[a])})},b[0])};if("a1 b2 c3"!==a.zipWith([["a","b","c"],[1,2,3]],function(a,
d){return a+d}).join(" "))throw Error("_.zipWith broken");},function(m,n){_.cps=function(){return _.cps.sequence.apply(null,arguments)};_.cps.apply=function(c,a,b,d){b=_.asArray(b);var k=_.numArgs(c)-1,f=b[k];b[k]=function(){d.call(this,arguments,f)};return c.apply(a,b)};_.extend(_.cps,{each:function a(b,d,k,f,e,h){var p=k||_.noop,l=function(a,k,f){2===_.numArgs(d)?d(a,f,p,b):d(a,k,f,p,b)};if(_.isEmpty(b))p();else if(_.isScalar(b))l(b,void 0,p);else if(f=f||0,h=0===f?void 0===b.length?_.keys(b):void 0:
h,e=0===f?h?h.length:b.length:e,f>=(e||0))p();else{var w=h?h[f]:f;l(b[w],w,a.bind(this,b,d,k,f+1,e,h))}}});_.extend(_.cps,{map:function(a,b,d){var k=_.isArray(a)?[]:{};_.cps.each(a,2==_.numArgs(b)?function(d,a,h){b(d,function(d){k[a]=d;h()})}:function(d,a,h){b(d,a,function(d){k[a]=d;h()})},function(){d(k)})}});_.extend(_.cps,{find:function(a,b,d){var k=2!==_.numArgs(b);_.cps.each(a,function(d,a,h,p){var l=function(b){!1===b?h():p(!0===b?d:b,a)};k?b(d,a,l):b(d,l)},d)}});_.extend(_.cps,{memoize:function(a){return _.barrier?
_.cps._betterMemoize(a):_.cps._poorMemoize(a)},_poorMemoize:function(a){var b={};return function(d,k){d in b?k(b[d]):a.call(this,d,function(a){k(b[d]=a)})}},_betterMemoize:function(a){var b={};switch(_.numArgs(a)){case 1:return function(d){b.already||a.call(this,b=_.barrier());b(d)};case 2:return b={},function(d,k){d in b||a.call(this,d,b[d]=_.barrier());b[d](k)};default:throw Error("_.cps.memoize: unsupported number of arguments");}}});(function(){var a=function d(a,f,e,h,p){!a||p>=(a.length||0)?
e(h):f(h,a[p],function(h){d(a,f,e,h,p+1)})};_.cps.reduce=function(d,k,f,e){4>arguments.length?a(d,k,f,d[0],1):a(d,k,f,e,0)}})();_.extend(_.cps,{noop:$restArg(function(){return _.last(arguments).call(this)}),identity:$restArg(function(){var a=_.initial(arguments),b=_.last(arguments);if(b)return b.apply(this,a)}),constant:$restArg(function(){var a=arguments;return function(){return _.last(arguments).apply(this,a)}})});_.cps.arity0=function(a){return function(){a.call(this,_.last(arguments))}};_.cps.arity1=
function(a){return function(){a.call(this,arguments[0],_.last(arguments))}};_.cps.arity2=function(a){return function(){a.call(this,arguments[0],arguments[1],_.last(arguments))}};_.cps.transformResult=function(a,b){return function(d){b.apply(this,_.initial(arguments).concat(a(_.last(arguments))))}};_.cps.resultArity2=_.partial(_.cps.transformResult,_.arity2);_.cps.resultArity1=_.partial(_.cps.transformResult,_.arity1);_.cps.resultArity0=_.partial(_.cps.transformResult,_.arity0);_.cps.sequence=$restArg(function(a){var b=
_.isArray(a)&&a||_.asArray(arguments);return _.reduceRight(b,function(d,a){return function(){return a.apply(this,_.asArray(arguments).concat(d))}},_.cps.identity)});_.cps.compose=$restArg(function(a){var b=_.isArray(a)&&a||_.asArray(arguments);return _.cps.sequence(b.slice().reverse())});_.cps.trySequence=function(a,b,d){_.reduceRight(a,function(a,f){return function(e){if(_.isTypeOf(Error,e))return(d||b)(e);try{return f.apply(this,_.asArray(arguments).concat(a))}catch(h){return(d||b)(h)}}},b)()}},
function(m,n){$global.Channel=$extends(Promise,{constructor:function(c,a,b){this.after=[];this.state="pending";this.value=void 0;this.transducers={resolve:a&&a.resolve||function(d){return d},reject:a&&a.reject||function(d){throw d;}};if(c instanceof Function)try{c.call(this,this.$(this.resolve),this.$(this.reject))}catch(d){this.reject(d)}else void 0!==c&&this.resolve(c)},_resolve:function(c){this.state="resolved";this.value=c;this.after.forEach(function(a){return a.resolve(c)})},_reject:function(c){this.state=
"rejected";this.value=c;this.after.forEach(function(a){return a.reject(c)})},resolve:function(c,a){var b=this;try{c=(a||this.transducers.resolve)(c),c instanceof Promise?c.then(function(d){return b._resolve(d)},function(d){return b._reject(d)}):this._resolve(c)}catch(d){this._reject(d)}return this},reject:function(c){return this.resolve(c,this.transducers.reject)},then:function(c,a){var b=new Channel(void 0,{resolve:c,reject:a},this);this.after.push(b);"resolved"===this.state?b.resolve(this.value):
"rejected"===this.state&&b.reject(this.value);return b},"catch":function(c){return this.then(void 0,c)}});Channel.all=function(c){return new Channel(function(a){var b=new Set,d=Array(c.length);c.forEach(function(c,f){c.then(function(c){d[f]=c;b.length===d.length?a(d):b.add(f)})})})};Channel.resolve=function(c){return new Channel(function(a){return a(c)})};Channel.reject=function(c){return new Channel(function(a,b){return b(c)})};$prototype.macroTag("channel",function(c,a,b){var d="_"+b,k=$untag(a);
c[b]=Tags.modify(a,function(){return $property({get:function(){return this[d]||(this[d]=new Channel(k))},set:function(d){this[b].resolve(d)}})})})},function(m,n){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};_.hasOOP=!0;_("property static final alias memoized private builtin hidden testArguments".split(" ")).each(Tags.define);
_.extend($global,{$prototype:function(a){function b(d,b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a,b){return $prototype.impl.compile.apply($prototype.impl,1<arguments.length?_.asArray(arguments).reverse():arguments)}),$extends:function(a,b){return $prototype(a,b||{})},$mixin:function(a,b){return $prototype.impl.compileMixin(_.extend(b,{constructor:a}))}});_.extend($prototype,{isConstructor:function(a){return _.isPrototypeConstructor(a)},macro:function(a,
b){1===arguments.length?$prototype.impl.alwaysTriggeredMacros.push(a):$prototype.impl.memberNameTriggeredMacros[a]=b},macroTag:function(a,b){Tags.define(a);$prototype.impl.tagTriggeredMacros["$"+a]=b},each:function(a){var b=$global,d;for(d in b)if("$"!==d[0]){var c=b[d];$prototype.isConstructor(c)&&a(c,d)}},defines:function(a,b){return _.find($prototype.inheritanceChain(a),function(d){return d.$definition&&d.$definition.hasOwnProperty(b)||!1})?!0:!1},inheritanceChain:function(a){for(var b=[];a;)b.push(a),
a=a.$base&&a.$base.constructor;return b},wrapMethods:function(a,b){return Tags.map(a,function(d,a,c){return _.isFunction(d)?b(d,a,c).wraps(d):d})},impl:{alwaysTriggeredMacros:[],memberNameTriggeredMacros:{},tagTriggeredMacros:{},compile:function(a,b){var d=b&&b.$impl||this;return $untag(d.sequence(a,b).call(d,a||{}).constructor)},sequence:function(a,b){return _.sequence(this.convertPropertyAccessors,this.extendWithTags,this.flatten,this.generateCustomCompilerImpl(b),this.ensureFinalContracts(b),this.generateConstructor(b),
this.evalAlwaysTriggeredMacros(b),this.evalMemberTriggeredMacros(b),this.contributeTraits(b),this.evalPrototypeSpecificMacros(b),this.generateBuiltInMembers(b),this.callStaticConstructor,this.expandAliases,this.groupMembersByTagForFastEnumeration,this.defineStaticMembers,this.defineInstanceMembers)},compileMixin:function(a){return _.sequence(this.convertPropertyAccessors,this.flatten,this.contributeTraits(),this.expandAliases,this.evalMemberTriggeredMacros(),this.defineStaticMembers,this.defineInstanceMembers).call(this,
a||{}).constructor},convertPropertyAccessors:function(a){var b=!0,d=!1,c=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var f=Object.getOwnPropertyNames(a)[Symbol.iterator](),e;!(b=(e=f.next()).done);b=!0){var h=e.value,p=Object.getOwnPropertyDescriptor(a,h);(p.get instanceof Function||p.set instanceof Function)&&Object.defineProperty(a,h,{value:$property(p)})}}catch(l){d=!0,c=l}finally{try{!b&&f["return"]&&f["return"]()}finally{if(d)throw c;}}return a},flatten:function(a){var b=
_.pick(a,this.isTagGroup),b=_.object(_.flatten(_.map(b,function(d,a){return _.map(this.flatten(this.convertPropertyAccessors(d)),function(d,b){return[b,$global[a](d)]})},this),!0));a=_.omit(a,this.isTagGroup);return _.extend(a,b)},evalAlwaysTriggeredMacros:function(a){return function(b){for(var d=$prototype.impl.alwaysTriggeredMacros,c=0,f=d.length;c<f;c++)b=d[c](b,a)||b;return b}},evalMemberTriggeredMacros:function(a){return function(b){var d=$prototype.impl.memberNameTriggeredMacros,c=$prototype.impl.tagTriggeredMacros;
_.each(b,function(f,e){d.hasOwnProperty(e)&&(b=d[e](b,f,e,a)||b);_.each(_.keys(f),function(d){c.hasOwnProperty(d)&&(b=c[d](b,f,e,a)||b)})});return b}},evalPrototypeSpecificMacros:function(a){return function(b){if(!b.isTraitOf){var d=$untag(b.$macroTags||a&&a.$definition&&a.$definition.$macroTags);d&&this.applyMacroTags(d,b)}return b}},applyMacroTags:function(a,b){_.each(b,function(d,c){_.each(a,function(a,e){d=b[c];_.isObject(d)&&"$"+e in d&&(b[c]=a.call(b,b,d,c)||d)},this)},this);return b},generateCustomCompilerImpl:function(a){return function(b){b.$impl?
(b.$impl=_.extend(Object.create(a&&a.$impl||this),b.$impl),b.$impl=$static($builtin($property(b.$impl)))):a&&a.$impl&&(b.$impl=$static($builtin($property(a.$impl))));return b}},contributeTraits:function(a){return function(b){if(b.$traits){var d=b.$traits;this.mergeTraitsMembers(b,d,a);b.$traits=$static($builtin($property(d)));b.hasTrait=$static($builtin(function(a){return 0<=d.indexOf(a)}))}return b}},mergeTraitsMembers:function(a,b,d){_.each(b,function(d){_.defaults(a,_.omit(d.$definition,_.or($builtin.matches,
_.key(_.equals("constructor")))))})},extendWithTags:function(a){return _.extendWith($untag(a),_.mapValues(Tags.get(a),$static.arity1))},callStaticConstructor:function(a){a.isTraitOf||(_.each($untag(a.$traits),function(b){b.$definition.$constructor&&$untag(b.$definition.$constructor).call(a)}),a.$constructor&&$untag(a.$constructor).call(a));return a},generateConstructor:function(a){return function(b){return _.extend(b,{constructor:Tags.modify(b.hasOwnProperty("constructor")?b.constructor:this.defaultConstructor(a),
function(d){a&&(d.prototype=Object.create(a.prototype),d.prototype.constructor=d);return d})})}},generateBuiltInMembers:function(a){return function(b){b.$constructor&&(b.$constructor=$builtin($static(b.$constructor)));return _.defaults(b,{$base:$builtin($static($property(_.constant(a&&a.prototype)))),$definition:$builtin($static($property(_.constant(_.extend({},a&&a.$definition,b))))),isTypeOf:$builtin($static(_.partial(_.isTypeOf,$untag(b.constructor)))),isInstanceOf:$builtin(function(d){return _.isTypeOf(d,
this)}),$:$builtin($prototype.impl.$)})}},$:function(a){return _.$.apply(null,[this].concat(_.asArray(arguments)))},defaultConstructor:function(a){return a?function(){a.prototype.constructor.apply(this,arguments)}:function(a){_.extend(this,a||{})}},defineStaticMembers:function(a){this.defineMembers($untag(a.constructor),_.pick(a,$static.matches));return a},defineInstanceMembers:function(a){this.defineMembers($untag(a.constructor).prototype,_.omit(a,$static.matches));return a},defineMembers:function(a,
b){_.each(b,function(d,c){"constructor"!==c&&b.hasOwnProperty(c)&&this.defineMember(a,d,c)},this)},defineMember:function(a,b,d){b&&b.$property?b.$memoized?_.defineMemoizedProperty(a,d,b):_.defineProperty(a,d,b,b.$hidden?{enumerable:!1}:{}):(b=$untag(b),a[d]=b)},ensureFinalContracts:function(a){return function(b){if(a){if(a.$final)throw Error("Cannot derive from $final-marked prototype");if(a.$definition){var d=_.intersection(_.keys(_.pick(a.$definition,$final.matches)),_.keys(b));if(d.length)throw Error("Cannot override $final "+
d.join(", "));}}return b}},expandAliases:function(a){_.each(a,function(b,d){a[d]=this.resolveMember(a,d,b)[1]},this);return a},resolveMember:function(a,b,d){d=d||a[b];if($alias.is(d)){a=this.resolveMember(a,$untag(d));var c=a[0];a=a[1];return[c,$property.is(d)?$property({get:function(){return this[c]},set:function(d){this[c]=d}}):Tags.extend(a,Tags.omit(d,"$alias"))]}return[b,d]},groupMembersByTagForFastEnumeration:function(a){var b={};_.each(a,function(d,a){Tags.each(d,function(c){(b[c]=b[c]||{})[a]=
d})});a.$membersByTag=$static($builtin($property(b)));return a},isTagGroup:function(a,b){var d=$untag(a);return"$"===b[0]&&_.isFunction($global[b])&&"object"===("undefined"===typeof d?"undefined":c(d))&&!_.isArray(d)},modifyMember:function(a,b){return $property.is(a)&&Tags.modify(a,function(d){return _.extend(d,_.map2(_.pick(d,"get","set"),b))})||_.isFunction($untag(a))&&Tags.modify(a,b)||a}}});_.isTraitOf=function(a,b){var d=b&&b.constructor;return d&&d.hasTrait&&d.hasTrait(a)||!1};_.isTypeOf=_.or(_.isTypeOf,
_.isTraitOf);$global.$trait=function(a,b){var d=void 0,c=_.extend(1<arguments.length?b:a,{constructor:_.throwsError("Traits are not instantiable (what for?)"),isTraitOf:$static($builtin(function(a){return _.isTraitOf(d,a)}))});return d=$prototype.impl.compile(c,1<arguments.length?a:b)};$prototype.macro("$macroTags",function(a,b,d){_.each($untag(b),function(d,a){Tags.define(a)})});_.$=function(a,b){for(var d=arguments.length,c=Array(2<d?d-2:0),f=2;f<d;f++)c[f-2]=arguments[f];return c.length?_.bind.apply(void 0,
[b,a].concat(c)):_.withSameArgs(b,function(){for(var d=arguments.length,c=Array(d),k=0;k<d;k++)c[k]=arguments[k];return b.apply(a,c)})};$global.$const=function(a){return $static($property(a))};Tags.define("callableAsFreeFunction");$prototype.macroTag("callableAsFreeFunction",function(a,b,d){a.constructor[d]=$untag(b).asFreeFunction;return a});Tags.define("callableAsMethod");$prototype.macroTag("callableAsMethod",function(a,b,d){a[d]=Tags.modify(b,_.asMethod);a.constructor[d]=$untag(b);return a});
$global.$singleton=function(a,b){return new ($prototype.apply(null,arguments))}},function(m,n){$global.Parse={keyCodeAsString:function(c){return String.fromCharCode(96<=c&&105>=c?c-48:c)},fileName:function(c){return _.last(c.split(/\\|\//)).split(".")[0]}}},function(m,n){function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}$global.TimeoutError=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=(b.__proto__||Object.getPrototypeOf(b)).call(this,"timeout expired");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}c(b,a);return b}(Error);$global.__=Promise.eval=function(a){for(var b=
this,d=arguments.length,c=Array(1<d?d-1:0),f=1;f<d;f++)c[f-1]=arguments[f];return a instanceof Promise?a:a instanceof Function?new Promise(function(d){d(a.apply(b,c))}):Promise.resolve(a)};Promise.coerce=function(a){return a instanceof Promise?a:Promise.resolve(a)};__.noop=function(){return Promise.resolve()};__.eternity=new Promise(function(){});__.identity=function(a){return Promise.resolve(a)};__.constant=function(a){return function(){return Promise.resolve(a)}};__.reject=function(a){return Promise.reject(a)};
__.rejects=function(a){return function(){return Promise.reject(a)}};__.then=function(a,b){b=_.coerceToFunction(b);try{var d=a instanceof Function?a():a;return d instanceof Promise?d.then(b):b(d)}catch(c){return Promise.reject(c)}};__.delay=function(a){return __.delays(a)()};__.delays=function(a){return function(b){return new Promise(function(d){setTimeout(function(){d(b)},a||0)})}};$mixin(Promise,{delay:function(a){return this.then(__.delays(a))},timeout:function(a){return this.race(__.delay(a).reject(new TimeoutError))},
now:$property(function(){return this.timeout(0)})});$mixin(Array,{race:$property(function(){return Promise.race(this)})});$mixin(Promise,{race:function(a){return[this,a].race},firstResolved:$static(function(a){return new Promise(function(b,d){var c=a&&a.length;c?_.each(a,function(a){Promise.coerce(a).then(function(d){c--;b&&(b(d),b=void 0)})["catch"](function(){c--;c||d(null)})}):d(null)})}),reject:function(a){return this.then(_.throwsError(a))},chain:function(a){return this.then(function(b){a(b);
return b})},done:function(a){return this.then(function(b){a(null,b);return b},function(b){a(b,null);throw b;})},"finally":function(a){return this.then(function(b){return a(null,b)},function(b){return a(b,null)})},$callableAsFreeFunction:{$property:{reflect:function(){return this.then(function(a){return a},function(a){return a})}}},log:$property(function(){return this.then(log,log.then(_.throwsError))}),alert:$property(function(){return this.done(alert2,alert2.then(_.throwsError))}),panic:$property(function(){return this["catch"](function(a){_.globalUncaughtExceptionHandler&&
_.globalUncaughtExceptionHandler(a);throw a;})}),assert:function(a){return this.then(function(b){$assert(b,a);return b})},assertTypeMatches:function(a){return this.then(function(b){$assertTypeMatches(b,a);return b})},assertRejected:function(a){var b=0<arguments.length;return this["catch"](function(d){b&&$assert(d,a);return d})}});$global.TaskPool=$prototype({constructor:function(a){this.maxTime=a&&a.maxTime;this.pending=[];if(this.maxConcurrency=a&&a.maxConcurrency)this.numActive=0,this.queue=[]},
run:function(a){var b=this;if(this.numActive>=this.maxConcurrency)return new Promise(function(d){b.queue.push(function(){return b.run(a).then(d)})});var d=__(a);void 0!==this.maxTime&&(d=d.timeout(this.maxTime));void 0!==this.maxConcurrency&&(b.numActive++,d=d.then(function(d){b.numActive--;return b.queue.length&&b.numActive<b.maxConcurrency?b.queue.shift()().then(_.constant(d)):d}));this.pending.push(d);return d},all:$property(function(){return Promise.all(this.pending)})});__.scatter=function(a,
b,d){return __.then(a,function(a){if(_.isStrictlyObject(a)){var c=_.coerceToEmpty(a),e=new TaskPool(d);_.each2(a,function(d,p){e.run(b.$(d,p,a)).then(function(d){d&&(c[d[1]]=d[0])})});return e.all.then(_.constant(c))}return __(b,a,void 0,a).then(function(d){return d[0]})})};__.map=function(a,b,d){return __.scatter(a,function(d,a,c){return __.then(b.$(d,a,c),function(d){return[d,a]})},d)};__.filter=function(a,b,d){return __.scatter(a,function(d,a,c){return __.then(b.$(d,a,c),function(b){return!1===
b?void 0:!0===b?[d,a]:[b,a]})},d)};__.each=function(a,b){return __.then(a,function(d){return new Promise(function(a,c){_.cps.each(d,function(d,a,k){Promise.coerce(b(d,a)).then(k)["catch"](c)},a)})})};__.seq=function(a){return _.reduce2(a,__.then)};__.all=function(a){return Promise.all(_.map(a,__))};__.race=function(a){return Promise.race(_.map(a,__))};$mixin(Function,{promisifyAll:$static(function(a,b){b=b||{};var d=b.except||_.noop;d instanceof Array&&(d=d.asSet.matches);var c={},f;for(f in a){var e=
a[f];e instanceof Function?(e=e.bind(a),c[f]=d(f)?e:e.promisify):c[f]=e}return c}),promisify:$hidden($property(function(){var a=this;return function(){var b=this,d=arguments;return new Promise(function(c,f){a.apply(b,_.asArray(d).concat(function(d,a){d&&f(d);c(a)}))})}}))})},function(m,n){$global.R=$singleton({$test:function(){var c=function(a,d){$assert(a,_.quote(d.str,"//"))};c("/[^\\s]*/",$r.anyOf.except.space.$);c("/\\[.*\\]|[\\s]/",$r.anything.inBrackets.or.oneOf.space.$);var a=$r.expr("before",
$r.anything.text("$print").something).then($r.expr("argument",$r.someOf.except.text(",)")).inParentheses.then($r.expr("tail",$r.anything))).$;c("/(.*\\$print.+)\\(([^,\\)]+)\\)(.*)/",a);$assert(a.parse(" var x = $print (blabla) // lalala "),{before:" var x = $print ",argument:"blabla",tail:" // lalala "});$assert([["[^","\\s","]"],"*"],R.anyOf(R.except(R.space)))},constructor:function(){this.reduce=_.hyperOperator(_.binary,_.reduce2,_.goDeeperAlwaysIfPossible,_.isNonTrivial.and(_.not(this.isSubexpr)));
this.initDSL()},expr:function(c,a){a=a||[];return new R.Expr(R.reduce("",c,function(b,d){return R.isSubexpr(d)?(a.push(d),b+R.expr(R.root(d.value),a).str):b+d}),a)},Expr:$prototype({constructor:function(c,a){this.rx=RegExp();this.rx.compile(c);this.str=c;this.subexprs=a},parse:function(c){return(c=c.match(this.rx))&&_.extend.apply(null,_.zipWith([c.slice(1),this.subexprs],function(a,b){return _.fromPairs([[b.name,a]])}))||{}}}),escape:function(c){return _.map(c,function(a){return R.metacharacters[a]?
"\\"+a:a}).join("")},text:$alias("escape"),subexpr:function(c,a){return{name:c,value:["(",a,")"]}},maybe:function(c){return[c,"?"]},anyOf:function(c){return[c,"*"]},someOf:function(c){return[c,"+"]},oneOf:function(c){return["[",c,"]"]},except:function(c){return["[^",c,"]"]},or:function(c,a){return[c,"|",a]},$property:{metacharacters:_.index("\\^$.|?*+()[{"),begin:"^",end:"$",space:"\\s",maybeSpaces:"\\s*",spaces:"\\s+",anything:".*",something:".+",comma:","},parentheses:function(c){return["\\(",c,
"\\)"]},brackets:function(c){return["\\[",c,"\\]"]},isSubexpr:function(c){return _.isStrictlyObject(c)&&!_.isArray(c)?!0:!1},root:function(c){return c&&c.$$?c.$$:c},initDSL:function(){$global.property("$r",function(){return $$r([])});$global["const"]("$$r",function(c){var a=_.defineHiddenProperty;a(c,"then",function(a){c.push(R.root(a));return c});a(c,"text",function(a){c.push(R.text(a));return c});a(c,"expr",function(a,d){c.push(R.subexpr(a,R.root(d)));return c});a(c,"forward",function(){return c.next||
((c.next=$r).prev=c).next});_.each(["maybe","anyOf","someOf","oneOf","except"],function(b){a(c,b,function(){return c.push(R[b](c.forward)),c.forward})});_.each(["parentheses","brackets"],function(b){return a(c,"in"+b.capitalized,function(){return c.$$.prev=$$r(R[b](c.$$))})});_.each(["or"],function(b){return a(c,b,function(){var d=$r;return(d.prev=c.$$.prev=$$r(R[b](c.$$,d))).next=d})});_.each(["begin","end","space","anything","something"],function(b){return a(c,b,function(){return c.push([R[b],c.forward]),
c.forward})});a(c,"$$",function(){for(var a=c;a.prev;)a=a.prev;return a});a(c,"$",function(){return R.expr(c.$$)});return c})}})},function(m,n){$global.Sort={Ascending:1,Descending:-1,strings:function(c,a){c=$.trim(c).toLowerCase();a=$.trim(a).toLowerCase();return 0==c.length&&0<a.length?1:0<c.length&&0==a.length?-1:c==a?0:c<a?-1:1},numbers:function(c,a){return isNaN(c)&&isNaN(a)?0:isNaN(c)?-1:isNaN(a)?1:c<a?-1:c>a?1:0},generic:function(c,a){return c||a?c?a?c<a?-1:c>a?1:0:1:-1:0},inverse:function(c){return function(a,
b){return-c(a,b)}},field:function(c,a,b){return function(d,k){return a(d[c],k[c])*b}}}},function(m,n){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};$global.$component=function(a){return $extends(Component,a)};_("extendable trigger triggerOnce barrier bindable memoize interlocked memoizeCPS debounce throttle overrideThis listener postpones reference raw binds observes".split(" ")).each(Tags.define);
(function(){var a=function(a){return function(d,c){return _.isFunction(d)&&1===arguments.length?a(d,c):a(c,d)}};Tags.define("observableProperty",a);Tags.define("observable",a)})();$global.$observableRef=function(a){return $observableProperty($reference(a))};$prototype.macro("$depends",function(a,b,d){a.$depends=$builtin($const(_.coerceToArray(b)));return a});$prototype.macroTag("extendable",function(a,b,d){a[d]=$builtin($const(b));return a});$global.Component=$prototype({$defaults:$extendable({}),
$requires:$extendable({}),$macroTags:$extendable({}),$impl:{sequence:function(a,b){return _.sequence(this.convertPropertyAccessors,this.extendWithTags,this.flatten,this.generateCustomCompilerImpl(b),this.ensureFinalContracts(b),this.generateConstructor(b),this.evalAlwaysTriggeredMacros(b),this.evalMemberTriggeredMacros(b),this.expandTraitsDependencies,this.mergeExtendables(b),this.contributeTraits(b),this.mergeStreams,this.mergeBindables,this.generateBuiltInMembers(b),this.callStaticConstructor,this.expandAliases,
this.groupMembersByTagForFastEnumeration,this.defineStaticMembers,this.defineInstanceMembers)},expandTraitsDependencies:function(a){_.isNonempty($untag(a.$depends))&&_.isEmpty($untag(a.$traits))&&(a.$traits=DAG.sortedSubgraphOf(a,{nodes:function(a){return $untag(a.$depends)}}));return a},mergeExtendables:function(a){return function(b){_.each(a.$definition,function(d,a){d&&d.$extendable&&(b[a]=Tags.modify(d,function(d){d=_.extendedDeep(d,$untag(b[a]||{}));_.each($untag(b.$traits),function(c){if(!c)throw log.e(b.$traits),
Error("invalid $traits value");(c=c.$definition[a])&&(d=_.extendedDeep($untag(c),d))});return d}))});return b}},mergeTraitsMembers:function(a,b){var d={},c={},f={},e=$untag(a.$macroTags),h=_.pluck(b,"$definition").concat(_.clone(a));_.each(h,function(b){_.each(e&&this.applyMacroTags(e,_.extend(_.clone(b),{constructor:a.constructor}))||b,function(b,e){$builtin.isNot(b)&&$builtin.isNot(a[e])&&"constructor"!==e&&($bindable.is(b)&&(c[e]=b),Component.isStreamDefinition(b)&&(f[e]=b),(d[e]||(d[e]=[])).push(b),
a[e]=b)})},this);a.__bindables=c;a.__streams=f;a.__membersByName=d},mergeStreams:function(a){var b=a.__membersByName;_.each(a.__streams,function(d,c){var f=a[c]=Tags.clone(d);f.listeners=[];_.each(b[c],function(a){a!==d&&f.listeners.push($untag(a))})});return a},mergeBindables:function(a){var b=a.__membersByName;_.each(a.__bindables,function(d,c){var f=_.filter2(_.bindable.hooks,function(d,a){var f=b[_.bindable.hooksShort[a]+c.capitalized];return f?[d,f]:!1});if(f.length){var e={};_.each(f,function(d){_.each(d[1],
function(a){a=$untag(a);if(_.isFunction(a)){var b="_"+d[0];(e[b]||(e[b]=[])).push(a)}})});a[c]=$bindable({hooks:e},Tags.clone(d))}},this);return a}},isStreamDefinition:$static(function(a){return _.isObject(a)&&(a.$trigger||a.$triggerOnce||a.$barrier||a.$observable||a.$observableProperty)}),mapMethods:function(){var a=_.last(arguments),b=1===arguments.length?_.constant(!0):arguments[0],d;for(d in this){var c=this.constructor.$definition[d];if(!c||!c.$property){var f=this[d];_.isFunction(f)&&!_.isPrototypeConstructor(f)&&
b(c)&&(this[d]=a.call(this,f,d,c)||f)}}},enumMethods:function(a,b){2===arguments.length?this.mapMethods(a,b.returns(void 0)):this.mapMethods(a.returns(void 0))},constructor:$final(function(a,b){this.parent_=void 0;this.children_=[];var d=this.cfg="object"===("undefined"===typeof a?"undefined":c(a))?a:{},k=this.constructor.$definition;this.constructor.$defaults&&(d=this.cfg=_.extend(_.cloneDeep(this.constructor.$defaults),d));this.mapMethods(function(d,a,b){if(!("$"===a||"init"===a||b&&b.$raw))return this.$(d)});
_.onBefore(this,"destroy",this._beforeDestroy);_.onAfter(this,"destroy",this._afterDestroy);var f=[],e={init:!0};_.each(k,function(a,b){if(void 0!==a){if(a.$observableProperty){var c=a.subject,k=b in d?d[b]:c,m=b+"Change",q=e[m]=this[m]=_.observable();q.context=this;q.postpones=a.$postpones;if(_.isPrototypeInstance(c)){var n=c.constructor;q.beforeWrite=function(d){return n.isTypeOf(d)?d:new n(d)}}a.$reference&&(q.trackReference=!0);_.defineProperty(this,b,{get:function(){return q.value},set:function(d){q.write.call(this,
d)}});a.listeners&&_.each(a.listeners,function(d){f.push([q,d])});_.isFunction(a.$observableProperty)&&f.push([q,a.$observableProperty]);void 0!==k&&q(k)}else if(Component.isStreamDefinition(a)){var u=e[b]=this[b]=_.extend((a.$trigger?_.trigger:a.$triggerOnce?_.triggerOnce:a.$observable?_.observable:a.$barrier?_.barrier:void 0)(a.subject),{context:this,postpones:a.$postpones});a.$reference&&(q.trackReference=!0);a.listeners&&_.each(a.listeners,function(d){f.push([u,d])});_.isFunction(a.$observable)&&
f.push([u,a.$observable]);(c=d[b])&&(a.$observable&&c.isObservable?c.tie(u):f.push([u,c]))}a.$listener&&(this[b].queuedBy=[]);a.$interlocked&&(this[b]=_.interlocked(this[b]));a.$bindable&&(this[b]=_.extend(_.bindable(this[b],this),_.map2(a.$bindable.hooks||{},_.mapsWith(this.$.bind(this).arity1))));a.$debounce&&(c=this[b],k=_.coerceToObject(a.$debounce),this[b]=c.debounced(k.wait||500,k.immediate));a.$throttle&&(c=this[b],k=_.coerceToObject(a.$throttle),this[b]=_.throttle(c,k.wait||500,k));a.$memoize?
this[b]=_.memoize(this[b]):a.$memoizeCPS&&(this[b]=_.cps.memoize(this[b]))}},this);this.init=this._beforeInit.then(this.init.then(this._afterInit)).bind(this);_.each(d,function(d,a){a in e||(this[a]=_.isFunction(d)?this.$(d):d)},this);_.each(k,function(d,a){d&&d.$alias&&!d.$raw&&(this[a]=this[$untag(d)])},this);_.hasAsserts&&_.each(this.constructor.$requires,function(d,a){$assertTypeMatches(_.fromPairs([[a,this[a]]]),_.fromPairs([[a,d]]))},this);_.each(f,function(d){d[0].call(this,d[1])},this);!1===
d.init||this.constructor.$defaults&&!1===this.constructor.$defaults.init||(k=this.init(),k instanceof Promise&&k.panic)}),callChainMethod:function(a){var b=this;return __.seq(_.filter2(this.constructor.$traits||[],function(d){return(d=d.prototype[a])&&d.bind(b)||!1}))},_beforeInit:function(){if(this.initialized.already)throw Error("Component: I am already initialized. Probably you're doing it wrong.");return this.callChainMethod("beforeInit")},init:function(){},_afterInit:function(){var a=this.cfg,
b=this;return __.then(this.callChainMethod.$("afterInit"),function(){b.initialized(!0);b.alive(!0);_.each(b.constructor.$definition,function(d,c){if(d&&d.$observableProperty){c+="Change";var f=a[c];if(f)b[c](f)}});return!0})},initialized:$barrier(),alive:$observable(!1),_beforeDestroy:function(){if(this.destroyed_)throw Error("Component: I am already destroyed. Probably you're doing it wrong.");if(this.destroying_)throw Error("Component: Recursive destroy() call detected. Probably you're doing it wrong.");
this.destroying_=!0;_.each(this.constructor.$traits,function(a){a.prototype.beforeDestroy&&a.prototype.beforeDestroy.call(this)},this);this.alive(!1);this.enumMethods(_.off.arity1);_.each(this.children_,_.method("destroy"));this.children_=[]},destroy:function(){},_afterDestroy:function(){_.each(this.constructor.$traits,function(a){a.prototype.destroy&&a.prototype.destroy.call(this);a.prototype.afterDestroy&&a.prototype.afterDestroy.call(this)},this);delete this.destroying_;this.parent_=void 0;this.destroyed_=
!0},attachedTo:$property(function(){return this.parent_}),attachTo:function(a){if(a===this)throw Error("smells like time-travel paradox.. how else can I be parent of myself?");this.parent_!==a&&(void 0!==this.parent_&&this.parent_.children_.remove(this),void 0!==(this.parent_=a)&&this.parent_.children_.push(this));return this},detach:function(){return this.attachTo(void 0)},attached:$property(function(){return this.children_}),attach:function(a){_.invoke(_.coerceToArray(a),"attachTo",this);return this},
detachAll:function(){_.each(this.children_,function(a){a.parent_=void 0});this.children_=[];return this},destroyAll:function(){_.each(this.children_,function(a){a.parent_=void 0;a.destroy()});this.children_=[];return this}})},function(m,n){var c=function(){function a(a,d){for(var c=0;c<d.length;c++){var f=d[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();$global.Lock=
function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}c(a,[{key:"acquire",value:function(a){var d=this;this.wait(function(){d.waitQueue||(d.waitQueue=[]);a()})}},{key:"acquired",value:function(){return void 0!==this.waitQueue}},{key:"wait",value:function(a){this.acquired()?this.waitQueue.push(a):a()}},{key:"release",value:function(){if(this.waitQueue.length){var a=this.waitQueue[0];this.waitQueue=this.waitQueue.slice(1);a()}else delete this.waitQueue}}]);
return a}();_.interlocked=function(a){var b=new Lock;a=$untag(a);return _.extendWith({lock:b,wait:b.wait.bind(b)},function(){for(var d=this,c=arguments.length,f=Array(c),e=0;e<c;e++)f[e]=arguments[e];return new Promise(function(c){b.acquire(function(){__.then(a.apply(d,f),function(d){b.release();c(d)})})})})};$global.$scope=function(a){var b=void 0;return _.argumentPrependingWrapper(Tags.unwrap(a),function(d){var a={when:void 0};(b=b||[]).push(a);d(function(d){if(a.when)throw Error("$scope: release called twice");
for(a.when=d;b&&b.last&&b.last.when;)d=b.last.when,(b=_.initial(b)).isEmpty&&(b=void 0),d()})})}},function(m,n){(function(){var c=["onceBefore","onceAfter","onBefore","onAfter","intercept"],a=function(a,d){if("function"!==typeof a)throw Error("method should be a function");return _.extend({},a,{_bindable:!0,impl:a,_wrapped:a,context:d,off:function(d){_.each(c,function(a){d?this["_"+a].remove(d):this["_"+a].removeAll()},this);return this}},_.fromPairs(_.map(c,function(d){var a="_"+d,b=0<=d.indexOf("once");
return[d,function(d){if(!_.isBindable(this))throw Error("wrong this");var c=this[a];(!b||0>c.indexOf(d))&&this[a].push(d);return this}]})),_.fromPairs(_.map(c,function(d){return["_"+d,[]]})))};_.extend(_,_.mapValues(_.invert(c),function(a){return function(d,c,f){var e=d[c];d=_.isBindable(e)?e:d[c]=_.bindable(e);return d[a].call(d,f)}}.flip2),{unbind:function(a,d,c){(a=a[d])&&a.off&&a.off(c)},isBindable:function(a){return a&&a._bindable?!0:!1},bindable:_.extendWith({hooks:c,hooksShort:["onceBefore",
"onceAfter","before","after","intercept"]},function(b,d){return _.withSameArgs(b,_.extendWith(a(b,d),function f(){var a=f._onceBefore,c=f._onceAfter,p=f._onBefore,l=f._onAfter,m=f._intercept,n=d||this,q,r;q=arguments.length;var u=Array(q);for(r=0;r<q;r++)u[r]=arguments[r];if(a.length){q=0;for(r=a.length;q<r;q++)a[q].apply(n,u);a.removeAll()}q=0;for(r=p.length;q<r;q++)p[q].apply(n,u);a=(m.length?_.cps.compose([b].concat(m)):b).apply(n,u);if(l.length||c.length){u=u.concat(a);q=0;for(r=l.length;q<r;q++)l[q].apply(n,
u);if(c.length)for(l=c.copy,c.removeAll(),q=0,r=l.length;q<r;q++)l[q].apply(n,u)}return a}))})})})()},function(m,n){_.extend(_,{gatherChanges:function(){for(var c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];var d=_.isArray(a[0])?a[0]:_.initial(a),k=_.last(a),f=function(a){k.apply(this,_.pluck(d,"value"))};_.each(d,function(d){d(f)})},allTriggered:function(c,a){var b=[];0<c.length?_.each(c,function(d){d(function(){b=_.union(b,[d]);a&&b.length===c.length&&(a(),a=void 0)})}):a()},observableRef:function(){for(var c=
arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];return _.extend(_.observable.apply(this,a),{trackReference:!0})},observable:function(){for(var c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];var c=a[0],d=_.stream({isObservable:!0,hasValue:0<a.length,value:_.isFunction(c)?void 0:c,read:function(a){return function(b){d.hasValue&&b.call(this,d.value);a.call(this,b)}},write:function(a){return function(b){d.beforeWrite&&(b=d.beforeWrite(b));if(!d.hasValue||(d.trackReference?d.value!==
b:!_.isEqual(d.value,b))){var c=d.value,h=d.hasValue;d.hasValue=!0;d.value=b;h?a.call(this,!1,d.value,c):a.call(this,!1,d.value)}}}});a.length&&d.apply(this,a);return _.extend(d,{force:function(a){d.hasValue=!1;d(a||d.value)},then:function(a){var b=_.observable();b.beforeWrite=a;d(function(d){b.write(d)});return b},toggle:function(){return d(!d.value)},tie:function(a){d(a);a(d);return d},item:function(a){var b=d.itemObservables||(d.itemObservables={}),c=b[a];c||(c=b[a]=_.observable((d.value&&d.value)[a]),
c(function(b){(d.value&&d.value[b])!==b&&((d.value||(d.value={}))[a]=b,d.force())}),d(function(d){c.write(d[a])}));return c},when:function(a,b){var c=_.isFunction(a)?a:_.equals(a),h=!1;d(function l(){for(var a=arguments.length,k=Array(a),m=0;m<a;m++)k[m]=arguments[m];c(k[0])&&!h&&(h=!0,d.off(l),b.apply(this,k))})}})},barrier:function(c){var a=void 0;_.isFunction(c)&&(a=c,c=void 0);var b=_.stream({already:void 0!==c,value:c,reset:function(){b.already=!1;delete b.value},write:function(d){return function(a){b.already||
(b.already=!0,b.value=a);d.call(this,!0,b.value)}},read:function(d){return function(a){b.already?(b.postpones||b.commitingReads?a.postponed:a).call(this,b.value):d.call(this,a)}}});a&&b(a);_.defineProperty(b,"promise",function(){return new Promise(function(a){b(a)})});return b},triggerOnce:$restArg(function(){for(var c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];var d=_.stream({read:function(a){return function(b){0>d.queue.indexOf(b)&&a.call(this,b)}},write:function(a){return a.partial(!0)}}).apply(this,
a);return d}),trigger:$restArg(function(){for(var c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];return _.stream({read:_.identity,write:function(a){return a.partial(!1)}}).apply(this,a)}),off:function(){var c=0>=arguments.length?void 0:arguments[0],a=1>=arguments.length?void 0:arguments[1];c.queue&&(1===arguments.length?c.queue.off():c.queue.off(a));c.queuedBy&&(_.each(c.queuedBy,function(a){a.remove(c)}),delete c.queuedBy)},stream:function(c){var a=this;c=c||{};var b=_.extend([],{off:function(){var a=
0>=arguments.length?void 0:arguments[0];this.length&&(0===arguments.length?(_.each(this,function(a){a.queuedBy.remove(this)},this),this.removeAll()):a.queuedBy&&(a.queuedBy.remove(this),this.remove(a)))}}),d=void 0,k=c.write(function(a){var c=d.context||this,f=b.copy;a&&b.off();d.commitingReads=!0;for(var k=arguments.length,m=Array(1<k?k-1:0),n=1;n<k;n++)m[n-1]=arguments[n];k=0;for(n=f.length;k<n;k++)(d.postpones?f[k].postponed:f[k]).apply(c,m);delete d.commitingReads}),f=c.read(function(a){0>b.indexOf(a)&&
(a.queuedBy?a.queuedBy.push(b):a.queuedBy=[b],b.push(a))});return d=_.extend($restArg(function h(){for(var a=arguments.length,d=Array(a),b=0;b<a;b++)d[b]=arguments[b];a=d[0];_.isFunction(a)?f.call(this,a):k.apply(this,d);return h}),c,{queue:b,once:function(a){_.find(b,function(d){return d.onceWrapped_===a})||f(_.extend(function l(b){_.off(d,l);a(b)},{onceWrapped_:a}))},off:_.off.asMethod,read:f,write:k,postpone:function(){for(var b=arguments.length,c=Array(b),f=0;f<b;f++)c[f]=arguments[f];a.postponed.apply(d.context,
c)}})}});_.observable.map=function(c,a){a=a||_.identity;var b=_.isArray(c)?Array(c.length):{},d=_.observable(b);_.each(c,function(c,f){c(function(c){b[f]=a(c,f);d.force(b)})});return d};_.observable.all=_.observable.map},function(m,n){function c(a,d,c){d in a?Object.defineProperty(a,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[d]=c;return a}var a=Object;$global.Http=$singleton(Component,{$traits:[$global.HttpMethods=$trait({get:function(a,d){return this.request("GET",a,d)},post:function(a,
d){return this.request("POST",a,d)},loadFile:function(a,d){return this.request("GET",a,{responseType:"arraybuffer"})},uploadFile:function(a,d,c){return this.post(a,_.extend2({data:d,headers:{"Content-Type":"binary/octet-stream","X-File-Name":Parse.fileName(d.name||"file").transliterate||"file","X-File-Size":d.size,"X-File-Type":d.type}},c))}})],request:function(a,d,c){var f=c||{},e=void 0;c=new Promise(function(c,k){if($platform.Browser){var l=new XMLHttpRequest;l.open(a,(f.protocol||f.hostname||
f.port?(f.protocol||window.location.protocol)+"//"+(f.hostname||window.location.hostname)+":"+(f.port||window.location.port):"")+d,!0);f.responseType&&(l.responseType=f.responseType);_.each(f.headers,function(a,d){l.setRequestHeader(d,a)});f.progress&&(l.onprogress=Http.progressCallbackWithSimulation(f.progress));l.onreadystatechange=function(){if(4===l.readyState){f.progress&&f.progress(1);var a="arraybuffer"===l.responseType?l.response:l.responseText;200===l.status?c(a):k(_.extend(Error(l.statusText),
{httpResponse:a,httpStatus:l.status}))}};e=function(){l.abort();k("aborted")};f.data?l.send(f.data):l.send()}else k("not implemented")});return _.extend(c,{abort:e})},progressCallbackWithSimulation:function(a){var d=0;a(0);return function(c){c.lengthComputable?a(c.loaded/c.total):a(d=1<(d+=.1)?0:d)}}});$global.JSONAPI=$singleton(Component,{$traits:[HttpMethods],request:function(b,d,k){k=_.extend2({headers:{"Cache-Control":"no-cache","Content-Type":"application/json; charset=utf-8"}},k);k.what&&(k.data=
JSON.stringify(k.what));var f=_.hasReflection&&new StackTracey;return Http.request(b,"/api/"+d,k)["finally"](function(a,d){if(d)return JSON.parse(d);if(a){if(a.httpResponse)return JSON.parse(a.httpResponse);throw a;}throw Error("empty response");}).then(function(d){if(d.success)return d.value;if(d.parsedStack){$jscomp.initSymbol();$jscomp.initSymbol();var b="undefined"!==typeof Symbol?Symbol["for"]("StackTracey"):"__StackTracey",k=d.parsedStack.map(function(d){return a.assign(d,{file:"/api/source/"+
d.file})}).concat(f||[]);throw a.assign(Error("SERVER: "+d.error),c({remote:!0},b,k));}throw Error(d.error);})}})},function(m,n){$extensionMethods(Array,{each:_.each,map:_.map,fold:_.reduce2,reduce:_.reduce,reduceRight:_.reduceRight,zip:_.zipWith,groupBy:_.groupBy,indexBy:_.indexBy,find:_.find,findWhere:$method(_.findWhere),filter:_.filter,reject:$method(_.reject),flat:_.flatten.tails2(!0),object:_.fromPairs,shuffle:_.shuffle,nonempty:_.nonempty,pluck:$method(_.pluck),without:$method(_.without),join:function(c){return $forceOverride(function(a,
b){b=2>arguments.length?"":b;return _.isString(b)?c.call(a,b):_.reduce2(a,function(a,c){return[a].concat([b,c])})})}(Array.prototype.join),contains:function(c,a){return 0<=c.indexOf(a)},top:function(c){return c[c.length-1]},first:function(c){return c[0]},second:function(c){return c[1]},rest:function(c){return c.slice(1)},last:function(c){return c[c.length-1]},take:function(c,a){return c.slice(0,a)},takeAt:$method(function(c,a){var b="number"==typeof a?a:c.findIndex(a);return-1!==b?c.splice(b,1).first:
void 0}),lastN:$method(_.last),before:function(c,a){var b=c.indexOf(a);return 0>b?c:c.slice(0,b-1)},after:function(c,a){var b=c.indexOf(a);return 0>b?c:c.slice(b+1)},isEmpty:function(c){return 0===c.length},notEmpty:function(c){return 0<c.length},lastIndex:function(c){return c.length-1},random:function(c){return c[_.random(0,c.lastIndex)]},copy:function(c){return c.slice(0)},removeAll:$method(function(c){return c.splice(0,c.length),c}),remove:function(c,a){for(var b;-1!==(b=c.indexOf(a));)c.splice(b,
1);return c},removeAt:function(c,a){c.splice(a,1);return c},insertAt:function(c,a,b){c.splice(b,0,a);return c},itemAtWrappedIndex:function(c,a){return c[a%c.length]},reversed:function(c){return c.slice().reverse()},swap:$method(function(c,a,b){var d=c[a];c[a]=c[b];c[b]=d;return c})})},function(m,n){$extensionMethods(Function,{$:$method(_.partial),$$:$method(_.tails),bind:_.bind,partial:_.partial,calls:_.bind,tails:_.tails,tails2:_.tails2,tails3:_.tails3,applies:_.applies,compose:_.compose,then:_.then,
"with":_.flipN,flip2:_.flip2,flip3:_.flip3,asFreeFunction:_.asFreeFunction,asMethod:_.asMethod,callsWith:_.callsTo,tailsWith:_.tailsTo,higherOrder:_.higherOrder,returns:function(c,a){return function(){c.apply(this,arguments);return a}},asContinuation:function(c){return $restArg(function(){_.last(arguments)(c.apply(this,_.initial(arguments)))})},wraps:function(c,a){c._wrapped=_.withSameArgs(c,a);return c},wrapped:function(c){return c._wrapped||c},arity0:_.arity0,arity1:_.arity1,arity2:_.arity2,arity3:_.arity3,
or:_.or,and:_.and,not:_.not,"new":_.higherOrder(_["new"]),each:function(c,a){return _.each2(a,c)},map:function(c,a){return _.map2(a,c)},oneShot:function(c){var a=!1;return function(){if(!a)return a=!0,c.apply(this,arguments)}},memoized:_.memoize,throttled:_.throttle,debounced:function(c,a,b){var d,k,f,e,h,p=function E(){var p=Date.now()-d;p<a&&0<p?k=setTimeout(E,a-p):(k=null,b||(f=c.apply(h,e),k||(h=e=null)))},l=function(){h=this;e=arguments;d=Date.now();var l=b&&!k;k||(k=setTimeout(p,a));l&&(f=c.apply(h,
e),h=e=null);return f};l.cancel=function(){k&&(clearTimeout(k),k=null)};l.callImmediately=function(){l.cancel();c.apply(h,e)};return l},postpone:$method(function(c){c.postponed.apply(null,arguments)}),postponed:function(c){return function(){var a=!c._postponed;c._postponed=_.asArray(arguments);c._postponedThis=this;a&&_.delay(function(){var a=c._postponed,d=c._postponedThis;c._postponed=void 0;c._postponedThis=void 0;c.apply(d,a)})}},delay:_.delay,delayed:function(c,a){return function(){var b=arguments,
d=this;_.delay(function(){c.apply(d,b)},a)}}});$extensionMethods(Function,{catch_:function(c,a,b,d){return c.catches(a,b)()},catches:function(c,a,b,d){var k=arguments.length;a=1<k?_.coerceToFunction(a):_.identity;b=2<k?_.coerceToFunction(b):_.identity;d=3<k?_.coerceToFunction(d):_.identity;return function(){var f=void 0,k=!1;try{f=c.apply(this,arguments)}catch(h){f=a(h),k=!0}k||(f=b(f));return d(f)}}})},function(m,n){$extensionMethods(String,{quote:_.quote,concatPath:function(c,a){var b="/"===c[c.length-
1],d="/"===a[0];return c+(b||d?"":"/")+(b&&d?a.substring(1):a)},pluck:function(c,a){return _.pluck2(a,c)},contains:function(c,a){return 0<=c.indexOf(a)},startsWith:function(c,a){return 1===a.length?c[0]===a:c.substring(0,a.length)===a},endsWith:function(c,a){return 1===a.length?c[c.length-1]===a:c.substring(c.length-a.length)===a},pad:function(c,a,b){return c+(b||" ").repeats(Math.max(0,a-c.length))},cut:function(c,a){return c.substring(0,a-1)+c.substring(a,c.length)},insert:function(c,a,b){return c.substring(0,
a)+b+c.substring(a,c.length)},lowercase:function(c){return c.toLowerCase()},uppercase:function(c){return c.toUpperCase()},trimmed:function(c){return c.trim()},limitedTo:function(c,a){return c&&(c.length<=a?c:c.substr(0,a-1)+"\u2026")},escaped:function(c){return _.escape(c)},repeats:function(c,a){return _.times(a,_.constant(c)).join("")},prepend:function(c,a){return a+c},append:function(c,a){return c+a},first:function(c,a){return c.slice(0,a)},last:function(c,a){return c.slice(-2)},reversed:function(c){return c.split("").reverse().join("")},
capitalized:function(c){return c.charAt(0).toUpperCase()+c.slice(1)},decapitalized:function(c){return c.charAt(0).toLowerCase()+c.slice(1)},latinAlphanumericValue:function(c){return c.replace(/[^a-z0-9]/gi,"")},alphanumericValue:function(c){return c.replace(unicode_hack(/[^0-9\p{L}|^0-9\p{N}|^0-9\p{Pc}|^0-9\p{M}]/g),"")},numericValue:function(c){return c.replace(/[^0-9]/g,"")},integerValue:function(c){return c.numericValue.parsedInt},parsedInt:function(c){c=parseInt(c,10);return _.isFinite(c)?c:void 0},
bytes:function(c){for(var a=new Uint8Array(c.length),b=0;b<c.length;++b)a[b]=c.charCodeAt(b);return a},hash:function(c){var a=0,b,d,k;if(0===c.length)return a;b=0;for(k=c.length;b<k;b++)d=c.charCodeAt(b),a=(a<<5)-a+d,a|=0;return a},transliterate:function(){var c=_.extend({"\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"yo","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"y","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r",
"\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"ph","\u0445":"h","\u0446":"ts","\u0447":"ch","\u0448":"sh","\u0449":"sch","\u044c":"","\u044a":"","\u044b":"y","\u044d":"e","\u044e":"yu","\u044f":"ya"},_.fromPairs(_.map("_-1234567890qwertyuiopasdfghjklzxcvbnm",function(a){return[a,a]})));return function(a){var b="";a=(a||"").toLowerCase();for(var d=0,k=a.length;d<k;d++)b+=c[a[d]]||"";return b}}()});_.extend(String,{randomHex:function(c){void 0===c&&(c=_.random(1,32));for(var a="",b=0;b<c;b++)a+=Math.floor(16*
Math.random()).toString(16);return a},leadingZero:function(c){return 10>c?"0"+c:c.toString()}});_.camelCaseToDashes=function(c){return c.replace(/[a-z][A-Z]/g,function(a){return a[0]+"-"+a[1].lowercase})};_.camelCaseToLoDashes=function(c){return c.replace(/[a-z][A-Z]/g,function(a){return a[0]+"_"+a[1].lowercase})};_.dashesToCamelCase=function(c){return c.replace(/(-.)/g,function(a){return a[1].uppercase})};_.loDashesToCamelCase=function(c){return c.replace(/(_.)/g,function(a){return a[1].uppercase})}},
function(m,n){["method","property","flipped","forceOverride"].forEach(Tags.define);$global.$extensionMethods=function(c,a){_.each(a,function(a,d){var k=Tags.unwrap(a);d in _||(_[d]=_[d]||k);if(a.$method||!a.$property&&!_.oneArg(k)){if(a.$property)throw Error("$extensionMethods: crazy input, unable to match");d in c.prototype&&!a.$forceOverride||(c.prototype[d]=_.asMethod(a.$flipped?_.flip(k):k))}else d in c.prototype&&!a.$forceOverride||_.defineHiddenProperty(c.prototype,d,function(){return k(this)})})}},
function(m,n,c){function a(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}var b;Math.clamp=_.clamp=function(a,b,c){return Math.max(b,Math.min(c,a))};Math.lerp=_.lerp=function(a,b,c){return b+(c-b)*a};Math.rescale=_.rescale=function(a,b,c,e){a=(a-b[0])/(b[1]-b[0]);return _.lerp(e&&e.clamp?_.clamp(a,0,1):a,c[0],c[1])};Math.rescaleClamped=_.rescaleClamped=function(a,b,c){return _.rescale(a,b,c,{clamp:!0})};Math.sqr=_.sqr=function(a){return a*
a};Math.sign||(Math.sign=function(a){return 0>a?-1:0<a?1:0});$global.Intersect={rayCircle:function(a,b,c,e){var h=a.sub(c);c=b.dot(b);var p=2*h.dot(b);e=h.dot(h)-e*e;h=p*p-4*c*e;if(!(0>h)){h=Math.sqrt(h);e=(-p-h)/(2*c);c=(-p+h)/(2*c);if(0<=e&&1>=e)return{time:e,where:a.add(b.scale(e))};if(0<=c&&1>=c)return{time:c,where:a.add(b.scale(c)),insideOut:!0}}}};$global.Vec2=$prototype((b={$static:{xx:function(a){return new Vec2(a,a)},xy:function(a,b){return new Vec2(a,b)},x:function(a){return new Vec2(a,
0)},y:function(a){return new Vec2(0,a)},zero:$property(function(){return new Vec2(0,0)}),unit:$property(function(){return new Vec2(1,1)}),one:$alias("unit"),lt:$alias("fromLT"),wh:$alias("fromWH"),fromLT:function(a){return a&&new Vec2(a.left,a.top)},fromWH:function(a){return a&&new Vec2(a.width,a.height)},fromLeftTop:$alias("fromLT"),fromWidthHeight:$alias("fromWH"),lerp:function(a,b,c){return new Vec2(_.lerp(a,b.x,c.x),_.lerp(a,b.y,c.y))},clamp:function(a,b,c){return new Vec2(_.clamp(a.x,b.x,c.x),
_.clamp(a.y,b.y,c.y))}},constructor:function(a,b){1===arguments.length?_.isNumber(a)?this.x=this.y=a:(this.x=a.x,this.y=a.y):(this.x=a,this.y=b)},w:$alias($property("x")),h:$alias($property("y")),width:$alias($property("x")),height:$alias($property("y")),length:$property(function(){return Math.sqrt(this.lengthSquared)}),lengthSquared:$property(function(){return this.x*this.x+this.y*this.y}),distance:function(a){return this.sub(a).length},aspect:$property(function(){return this.x/this.y}),add:function(a,
b){return void 0===b?"number"===typeof a?new Vec2(this.x+a,this.y+a):new Vec2(this.x+a.x,this.y+a.y):new Vec2(this.x+a,this.y+b)}},a(b,"aspect",$property(function(){return this.w/this.h})),a(b,"dot",function(a){return this.x*a.x+this.y*a.y}),a(b,"sub",function(a){return new Vec2(this.x-a.x,this.y-a.y)}),a(b,"scale",function(a,b){return new Vec2(this.x*a,this.y*(void 0===b?a:b))}),a(b,"mul",function(a){return new Vec2(this.x*a.x,this.y*a.y)}),a(b,"divide",function(a){return new Vec2(this.x/a.x,this.y/
a.y)}),a(b,"normal",$property(function(){return this.scale(1/this.length)})),a(b,"perp",$property(function(){return new Vec2(this.y,-this.x)})),a(b,"half",$property(function(){return new Vec2(.5*this.x,.5*this.y)})),a(b,"inverse",$property(function(){return new Vec2(-this.x,-this.y)})),a(b,"asArray",$property(function(){return[this.x,this.y]})),a(b,"asLeftTop",$property(function(){return{left:this.x,top:this.y}})),a(b,"asLeftTopMargin",$property(function(){return{marginLeft:this.x,marginTop:this.y}})),
a(b,"asWidthHeight",$property(function(){return{width:this.x,height:this.y}})),a(b,"asTranslate",$property(function(){return"translate("+this.x+" "+this.y+")"})),a(b,"separatedWith",function(a){return this.x+a+this.y}),a(b,"floor",$property(function(){return new Vec2(Math.floor(this.x),Math.floor(this.y))})),a(b,"sum",$static(function(a){return _.reduce(_.isArray(a)&&a||_.asArray(arguments),function(a,d){return a.add(d||Vec2.zero)},Vec2.zero)})),a(b,"projectOnCircle",function(a,b){return a.add(this.sub(a).normal.scale(b))}),
a(b,"projectOnLineSegment",function(a,b){var c=b.sub(a),e=c.lengthSquared;if(0==e)return a;e=this.sub(a).dot(c)/e;return 0>e?a:1<e?b:a.add(c.scale(e))}),a(b,"projectOnRay",function(a,b){var c=b.lengthSquared;return 0==c?0:this.sub(a).dot(b)/c}),b));$jscomp.initSymbol();"undefined"!==typeof Symbol&&($jscomp.initSymbol(),Vec2.prototype[Symbol["for"]("String.ify")]=function(){return"{"+this.x+","+this.y+"}"});$global.Bezier={cubic:function(a,b,c,e,h){var p=a*a*a,l=a*a,m=3*(c.x-b.x),n=3*(c.y-b.y),q=3*
(e.x-c.x)-m;c=3*(e.y-c.y)-n;return new Vec2((h.x-b.x-m-q)*p+q*l+m*a+b.x,(h.y-b.y-n-c)*p+c*l+n*a+b.y)},cubic1D:function(a,b,c,e,h){return Bezier.cubic(a,Vec2.zero,new Vec2(b,c),new Vec2(e,h),Vec2.one).y},make:{cubic:function(a,b,c,e){return function(h){return Bezier.cubic(h,a,b,c,e)}},cubic1D:function(a,b,c,e){return function(h){return Bezier.cubic1D(h,a,b,c,e)}}}};$global.BBox=$prototype({$static:{zero:$property(function(){return new BBox(0,0,0,0)}),unit:$property(function(){return new BBox(0,0,1,
1)}),rect:$property(function(a){return new BBox(0,0,a,a)}),fromLeftTopAndSize:function(a,b){return BBox.fromLTWH({left:a.x,top:a.y,width:b.x,height:b.y})},fromLTWH:function(a,b,c,e){return 1===arguments.length?a&&BBox.fromLTWH(a.left,a.top,a.width,a.height):new BBox(a+c/2,b+e/2,c,e)},fromLTRB:function(a,b,c,e){return 1===arguments.length?a&&BBox.fromLTRB(a.left,a.top,a.right,a.bottom):new BBox(_.lerp(.5,a,c),_.lerp(.5,b,e),c-a,e-b)},fromSizeAndCenter:function(a,b){return new BBox(b.x-a.x/2,b.y-a.y/
2,a.x,a.y)},fromSize:function(a,b){return b?new BBox(-a/2,-b/2,a,b):new BBox(-a.x/2,-a.y/2,a.x,a.y)},fromPoints:function(a){var b=Number.MAX_VALUE,c=Number.MAX_VALUE,e=Number.MIN_VALUE,h=Number.MIN_VALUE;_.each(a,function(a){b=Math.min(a.x,b);c=Math.min(a.y,c);e=Math.max(a.x,e);h=Math.max(a.y,h)});return BBox.fromLTRB(b,c,e,h)}},constructor:function(a,b,c,e){4==arguments.length?(this.x=a,this.y=b,this.width=c,this.height=e):_.extend(this,a)},classifyPoint:function(a){a=_.extend(a.x>this.right?{right:!0}:
{},a.x<this.left?{left:!0}:{},a.y>this.bottom?{bottom:!0}:{},a.y<this.top?{top:!0}:{});return _.extend(a,a.left||a.right||a.bottom||a.top?{}:{inside:!0})},classifyRay:function(a,b,c){var e=this.size.half,h,p,l,m,n,q;h=1/b.x;p=1/b.y;n=Math.sign(h);q=Math.sign(p);l=(this.x-n*e.x-a.x)*h;m=(this.y-q*e.y-a.y)*p;h*=this.x+n*e.x-a.x;e=(this.y+q*e.y-a.y)*p;if(!(l>e||m>h||(p=l>m?l:m,1<=p||0>=(h<e?h:e))))return h={time:_.clamp(p,0,1)},h.normal=l>m?new Vec2(-n,0):new Vec2(0,-q),h.delta=b.scale(h.time),h.where=
a.add(h.delta),c&&(l=this.grow(-c),h.where.x>l.right?h.where.y<l.top?h=Intersect.rayCircle(a,b,l.rightTop,c):h.where.y>l.bottom&&(h=Intersect.rayCircle(a,b,l.rightBottom,c)):h.where.x<l.left&&(h.where.y<l.top?h=Intersect.rayCircle(a,b,l.leftTop,c):h.where.y>l.bottom&&(h=Intersect.rayCircle(a,b,l.leftBottom,c))),h&&h.insideOut&&(h.where=a)),h},nearestPointTo:function(a,b){var c=b||0,e=new Vec2(this.left,this.top),h=new Vec2(this.right,this.top),p=new Vec2(this.right,this.bottom),l=new Vec2(this.left,
this.bottom),c=[a.projectOnLineSegment(e.add(c,0),h.add(-c,0)),a.projectOnLineSegment(h.add(0,c),p.add(0,-c)),a.projectOnLineSegment(p.add(-c,0),l.add(c,0)),a.projectOnLineSegment(l.add(0,-c),e.add(0,c)),a.projectOnCircle(e.add(c,c),c),a.projectOnCircle(h.add(-c,c),c),a.projectOnCircle(p.add(-c,-c),c),a.projectOnCircle(l.add(c,-c),c)];return _.min(c,function(b){return a.sub(b).length})},xywh:$property(function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}),ltwh:$property(function(){return{left:this.left,
top:this.top,width:this.width,height:this.height}}),union:function(a){return BBox.fromLTRB(Math.min(this.left,a.left),Math.min(this.top,a.top),Math.max(this.right,a.right),Math.max(this.bottom,a.bottom))},centerIn:function(a){return new BBox(a.x,a.y,this.width,this.height)},clone:$property(function(){return new BBox(this.x,this.y,this.width,this.height)}),floor:$property(function(){return new BBox.fromLTRB(Math.floor(this.left),Math.floor(this.top),Math.floor(this.right),Math.floor(this.bottom))}),
css:$property(function(){return{left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"}}),leftTop:$property(function(){return new Vec2(this.left,this.top)}),leftBottom:$property(function(){return new Vec2(this.left,this.bottom)}),rightBottom:$property(function(){return new Vec2(this.right,this.bottom)}),rightTop:$property(function(){return new Vec2(this.right,this.top)}),left:$property(function(){return this.x-this.width/2}),right:$property(function(){return this.x+this.width/
2}),top:$property(function(){return this.y-this.height/2}),bottom:$property(function(){return this.y+this.height/2}),center:$property(function(){return new Vec2(this.x,this.y)}),extent:$alias("size"),size:$property(function(){return new Vec2(this.width,this.height)}),offset:function(a){return new BBox(this.x+a.x,this.y+a.y,this.width,this.height)},newWidth:function(a){return new BBox(this.x-(a-this.width)/2,this.y,a,this.height)},grow:function(a){return new BBox(this.x,this.y,this.width+2*a,this.height+
2*a)},shrink:function(a){return this.grow(-a)},mul:function(a){return new BBox(this.x*a,this.y*a,this.width*a,this.height*a)},area:$property(function(){return Math.abs(this.width*this.height)}),intersects:function(a){return!(this.right<a.left||this.left>a.right||this.bottom<a.top||this.top>a.bottom)}});$jscomp.initSymbol();"undefined"!==typeof Symbol&&($jscomp.initSymbol(),BBox.prototype[Symbol["for"]("String.ify")]=function(){return"{ "+this.left+","+this.top+" \u2190\u2192 "+this.right+","+this.bottom+
" }"});$global.Transform=$prototype({$static:{identity:$property(function(){return new Transform}),svgMatrix:function(a){return new Transform([[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]])},translation:function(a){return new Transform([[1,0,a.x],[0,1,a.y],[0,0,1]])}},constructor:function(a){this.components=a||[[1,0,0],[0,1,0],[0,0,1]]},multiply:function(a){var b=[[0,0,0],[0,0,0],[0,0,0]],c,e,h=this.components,p=a.components;for(a=0;3>a;a++)for(c=0;3>c;c++)for(e=0;3>e;e++)b[a][c]+=h[a][e]*p[e][c];return new Transform(b)},
translate:function(a){return this.multiply(Transform.translation(a))},scale:function(a){return this.multiply(new Transform([[a,0,0],[0,a,0],[0,0,1]]))},inverse:$property($memoized(function(){var a=this.components,b=1/(a[0][0]*(a[1][1]*a[2][2]-a[2][1]*a[1][2])-a[0][1]*(a[1][0]*a[2][2]-a[1][2]*a[2][0])+a[0][2]*(a[1][0]*a[2][1]-a[1][1]*a[2][0]));return new Transform([[(a[1][1]*a[2][2]-a[2][1]*a[1][2])*b,-(a[0][1]*a[2][2]-a[0][2]*a[2][1])*b,(a[0][1]*a[1][2]-a[0][2]*a[1][1])*b],[(a[1][0]*a[2][2]-a[1][2]*
a[2][0])*b,(a[0][0]*a[2][2]-a[0][2]*a[2][0])*b,-(a[0][0]*a[1][2]-a[1][0]*a[0][2])*b],[(a[1][0]*a[2][1]-a[2][0]*a[1][1])*b,-(a[0][0]*a[2][1]-a[2][0]*a[0][1])*b,(a[0][0]*a[1][1]-a[1][0]*a[0][1])*b]])})),unproject:function(a){var b=this.components;return new Vec2(a.x*b[0][0]+a.y*b[0][1]+b[0][2],a.x*b[1][0]+a.y*b[1][1]+b[1][2])},project:function(a){return this.inverse.unproject(a)}});_.rng=function(a,b,c){var e=a,h=987654321;return function(){h=36969*(h&65535)+(h>>16)&4294967295;e=18E3*(e&65535)+(e>>
16)&4294967295;var a=(h<<16)+e&4294967295,a=a/4294967296+.5;return void 0===b&&void 0===c?a:Math.round(b+a*(c-b))}};_.equalDistribution=function(a,b){var c=a/b,e=0;return _.times(b,function(){var a=Math.round(e),d=Math.round(e+=c);return Math.floor(d-a)})};_.ptInRect=function(a,b){return a.x>=b.left&&a.y>=b.top&&a.x<b.right&&a.y<b.bottom};_.hue2CSS=function(a,b){return _.RGB2CSS(_.hue2RGB(a),b)};_.HSL2CSS=function(a,b){return _.RGB2CSS(_.HSL2RGB(a),b)};_.HSL2RGB=function(a){var b=a[1],c=a[2];a=_.hue2RGB(a[0]);
b*=1-Math.abs(2*c-1);return[(a[0]-.5)*b+c,(a[1]-.5)*b+c,(a[2]-.5)*b+c]};_.hue2RGB=function(a){return[Math.max(0,Math.min(1,Math.abs(6*a-3)-1)),Math.max(0,Math.min(1,2-Math.abs(6*a-2))),Math.max(0,Math.min(1,2-Math.abs(6*a-4)))]};_.RGB2CSS=function(a,b){return"rgba("+Math.round(255*a[0])+","+Math.round(255*a[1])+","+Math.round(255*a[2])+","+(void 0===b?void 0===a[3]?1:a[3]:b)+")"};_.RGB2HSL=function(a,b){var c=a[0],e=a[1],h=a[2],p=void 0===b?a[3]:b,l=Math.max(c,e,h),m=Math.min(c,e,h),n,q=(l+m)/2;if(l==
m)n=m=0;else{var r=l-m,m=.5<q?r/(2-l-m):r/(l+m);switch(l){case c:n=(e-h)/r+(e<h?6:0);break;case e:n=(h-c)/r+2;break;case h:n=(c-e)/r+4}n/=6}return void 0===p?[n,m,q]:[n,m,q,p]};_.extend(Math,function(a){return{roundTo:function(a,b){return a-a%b},round10:function(b,c){return a("round",b,c)},floor10:function(b,c){return a("floor",b,c)},ceil10:function(b,c){return a("ceil",b,c)}}}(function(a,b,c){if("undefined"===typeof c||0===+c)return Math[a](b);b=+b;c=+c;if(isNaN(b)||"number"!==typeof c||0!==c%1)return NaN;
b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+c:c))}));(function(){var a=c(35);Array.prototype.topoSort=function(){return a(this)}})();Array.prototype.topoMerge=function(){for(var a=[],b=0,c=this.length;b<c;b++)for(var e=this[b],h=0,p=e.length-1;h<p;h++)a.push([e[h],e[h+1]]);return a.topoSort()};$global.DAG=function(a){this.cfg=a||{};this.nodes=a.nodes||_.noop};DAG.prototype.each=function(a,b,c,e){e=e||new Set;if(!e.has(a)){e.add(a);
var h=this,p=this.nodes(a)||[];!0!==b.call(this,a,{nodes:p,prev:c,visited:e})&&p.forEach(function(c){h.each(c,b,a,e)})}return e};DAG.prototype.edges=function(a){var b=[];this.each(a,function(a,c){c.nodes.concat(a).reduce(function(a,c){b.push([a,c]);return c})});return b};DAG.prototype.sortedSubgraphOf=function(a){return this.edges(a).topoSort().remove(a)};DAG.sortedSubgraphOf=function(a,b){return(new DAG(b)).sortedSubgraphOf(a)}},function(m,n){_.extend(_,{asArray:function(c){return void 0!==c.length?
[].slice.call(c,0):[c]}});_.extend(_,{numArgs:function(c){return void 0===c._ac?c.length:c._ac},restArg:function(c){return c._ra||!1},noArgs:function(c){return 0===_.numArgs(c)&&!c._ra},hasArgs:function(c){return 0<_.numArgs(c)&&!c._ra},oneArg:function(c){return 1===_.numArgs(c)&&!c._ra},withRestArg:$global.$restArg=function(c){Object.defineProperty(c,"_ra",{enumerable:!1,writable:!0,value:!0});return c},withArgs:function(c,a,b){void 0!==c&&Object.defineProperty(b,"_ac",{enumerable:!1,writable:!0,
value:c});void 0!==a&&Object.defineProperty(b,"_ra",{enumerable:!1,writable:!0,value:a});return b},withSameArgs:function(c,a){return _.withArgs(_.numArgs(c),_.restArg(c),a)}});(function(){var c=function(a,b){return _[a]=b(_[a])};c("memoize",function(a){return function(b){return _.withSameArgs(b,a(b))}});c("partial",function(a){return $restArg(function(b){return _.withArgs(Math.max(0,_.numArgs(b)-(arguments.length-1)),b._ra,a.apply(this,arguments))})});c("bind",function(a){return $restArg(function(b,
c){return _.withArgs(Math.max(0,_.numArgs(b)-(arguments.length-2)),b._ra,a.apply(this,arguments))})})})()},function(m,n){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};_.typeOf=function(a){return"undefined"===typeof a?"undefined":c(a)};_.instanceOf=
function(a){return function(b){return b instanceof a}};_.count=function(a){return a.length};_.array=_.tuple=function(){return _.asArray(arguments)};_.cons=function(a,b){return[a].concat(b||[])};_.atIndex=function(a){return function(b){return b[a]}};_.takesFirst=_.higherOrder(_.first);_.takesLast=_.higherOrder(_.last);_.applies=function(a,b,c){return function(){return a.apply(b,c)}};_.prepends=function(a){return function(b){return a+b}};_.appends=function(a){return function(b){return b+a}};_.join=
function(a,b){return a.join(b)};_.joinWith=_.flip2(_.join);_.joinsWith=_.higherOrder(_.joinWith);_.split=function(a,b){return a.split(b)};_.splitWith=_.flip2(_.split);_.splitsWith=_.higherOrder(_.splitWith);_.sum=function(a,b){return(a||0)+(b||0)};_.subtract=function(a,b){return(a||0)-(b||0)};_.mul=function(a,b){return(a||0)*(b||0)};_.equal=function(a,b){return a===b};_.sums=_.plus=_.higherOrder(_.sum);_.subtracts=_.minus=_.higherOrder(_.subtract);_.muls=_.higherOrder(_.mul);_.equals=_.higherOrder(_.equal);
_.less=function(a,b){return a<b};_.lessOrEqual=function(a,b){return a<=b};_.greater=function(a,b){return a>b};_.greaterOrEqual=function(a,b){return a>=b};_.isNegative=function(a){return 0>a};_.largest=function(a,b){return isNaN(a)&&isNaN(b)?NaN:isNaN(a)?b:isNaN(b)?a:Math.max(a,b)};_.notZero=function(a){return 0!==a};_.propertyOf=function(a){return function(b){return a[b]}};_.oneOf=$restArg(function(){return _.propertyOf(_.index(_.asArray(arguments)))})},function(m,n){_.debugEcho=function(){return[this].concat(_.asArray(arguments))};
_.call=function(c,a){for(var b=arguments.length,d=Array(2<b?b-2:0),k=2;k<b;k++)d[k-2]=arguments[k];return c.apply(a,d)};_.arity=function(c,a){return function(){for(var b=arguments.length,d=Array(b),k=0;k<b;k++)d[k]=arguments[k];return a.apply(this,d.slice(0,c))}};_.arity0=function(c){return function(){return c.call(this)}};_.arity1=function(c){return function(a){return c.call(this,a)}};_.arity2=function(c){return function(a,b){return c.call(this,a,b)}};_.arity3=function(c){return function(a,b,d){return c.call(this,
a,b,d)}};_.arityFn=function(c){return _["arity"+c]};_.tails=$restArg(function(c){for(var a=arguments.length,b=Array(1<a?a-1:0),d=1;d<a;d++)b[d-1]=arguments[d];return function(){return c.apply(this,_.asArray(arguments).concat(b))}});_.tails2=$restArg(function(c){for(var a=arguments.length,b=Array(1<a?a-1:0),d=1;d<a;d++)b[d-1]=arguments[d];return function(a){return c.apply(this,[a].concat(b))}});_.tails3=$restArg(function(c){for(var a=arguments.length,b=Array(1<a?a-1:0),d=1;d<a;d++)b[d-1]=arguments[d];
return function(a,d){return c.apply(this,[a,d].concat(b))}});_.callsTo=function(c){return $restArg(function(){return _.callsWith.apply(null,arguments)(c)})};_.tailsTo=function(c,a){return $restArg(function(){return _.tailsWith.apply(null,arguments)(c)})};_.callsWith=$restArg(function(){var c=_.asArray(arguments);return function(a){return _.withSameArgs(a,function(){return a.apply(this,c.concat(_.asArray(arguments)))})}});_.tailsWith=$restArg(function(){var c=_.asArray(arguments);return function(a){return _.withSameArgs(a,
function(){return a.apply(this,_.asArray(arguments).concat(c))})}});_.argumentAppendingWrapper=function(c,a){return _.withSameArgs(c,function(){var b=this,d=_.asArray(arguments);return a(function(){return c.apply(b,d.concat(_.asArray(arguments)))})})};_.argumentPrependingWrapper=function(c,a){return _.withSameArgs(c,function(){var b=this,d=_.asArray(arguments);return a(function(){return c.apply(b,_.asArray(arguments).concat(d))})})};_["new"]=$restArg(function(c,a,b,d,k){switch(arguments.length){case 1:return new c;
case 2:return new c(a);case 3:return new c(a,b);case 4:return new c(a,b,d);case 5:return new c(a,b,d,k);default:_.notImplemented()}});_.flipN=function(c){return $restArg(function(){return c.apply(this,_.asArray(arguments).reverse())})};_.flip=function(c){if(_.restArg(c))return _.flipN(c);switch(_.numArgs(c)){case 0:case 1:return c;case 2:return _.flip2(c);case 3:return _.flip3(c);default:throw Error("flip: unsupported arity");}};_.flip2=function(c){return function(a,b){return c.call(this,b,a)}};_.flip3=
function(c){return function(a,b,d){return c.call(this,d,b,a)}};_.or=function(c,a){return function(){return c.apply(this,arguments)||a.apply(this,arguments)}};_.and=function(c,a){return function(){return c.apply(this,arguments)&&a.apply(this,arguments)}};_.not=function(c){return function(){return!c.apply(this,arguments)}};_.extend(_,{Y:function(c){var a=c(function(){return a.apply(this,arguments)});return a}});(function(){_.hyperOperator=function(c,a,b,d){var k=_.arityFn(c)||_.identity,f=(b||_.goDeeperWhenFirstArgumentIsGood)(c,
d||_.isNonTrivial);return function(){var b=_.last(arguments);return _.Y(function(c){var d=_.tails(a,k(c));return function(){return(f(arguments)?d:b).apply(this,arguments)}}).apply(this,_.initial(arguments))}};_.goDeeperWhenFirstArgumentIsGood=function(c,a){return function(b){return 0<b.length?a(b[0]):!1}};_.goDeeperAlwaysIfPossible=function(c,a){return 0===c?_.constant(!1):1===c?function(b){return a(b[0])}:2===c?function(b){return a(b[0])||a(b[1])}:function(b){return _.some(_.asArray(b),a)}};_.goDeeperOnlyWhenNessesary=
function(c,a){return 0===c?_.constant(!1):1===c?function(b){return a(b[0])}:2===c?function(b){return a(b[0])&&a(b[1])}:function(b){return _.every(_.asArray(b),a)}};_.isTrivial=function(c){return _.isEmpty(c)||_.isString(c)||_.isNumber(c)||c instanceof RegExp||!(_.isStrictlyObject(c)||_.isArray(c))||_.isPrototypeInstance(c)||_.isMeta(c)};_.isMeta=_.constant(!1);_.isNonTrivial=_.not(_.isTrivial);_.binary=2;_.unary=1})();_.higherOrder=_.callsTo;_.eval=function(c){return _.isFunction(c)?c.call(this):
c};_.evals=function(c){var a=arguments;return function(b){return _.isFunction(b)?b.apply(this,a):b}};_.method=function(c){for(var a=arguments.length,b=Array(1<a?a-1:0),d=1;d<a;d++)b[d-1]=arguments[d];return function(a){return a[c].apply(a,b)}};_.asFreeFunction=function(c){return function(a){for(var b=arguments.length,d=Array(1<b?b-1:0),k=1;k<b;k++)d[k-1]=arguments[k];return c.apply(a,d)}};_.asMethod=function(c){return function(){return c.apply(void 0,[this].concat(_.asArray(arguments)))}};_.once=
function(c){var a=!1;return function(){if(!a)return a=!0,c.apply(this,arguments)}};_.withTimeout=function(c,a,b){var d=!1,k=setTimeout(function(){d=!0;c.expired&&c.expired(b)},c.maxTime);a(function(){d||(clearTimeout(k),b&&b.apply(this,arguments))})};_.sequence=function(c){var a=_.isArray(c)?c:_.asArray(arguments),b=a.length;return 0===b?_.identity:function(c){for(var k=0;k<b;k++)c=a[k].call(this,c);return c}};_.seq=_.sequence;_.then=function(c,a){return function(b){var d=c.apply(this,arguments);
return d instanceof Promise?d.then(a.bind(this)):a.call(this,d)}}},function(m,n,c){var a=Object;_.hasTags=!0;$global.Tags=function(a,b){void 0!==a&&(this.subject=a);void 0!==b&&_.extend(this,b)};Tags.$definition={};a.assign(Tags.prototype,{add:function(a,b){return this["$"+a]=b||!0,this},clone:function(b){return a.assign(new Tags(b||this.subject),Tags.get(this))},modify:function(b){this.subject=b(this.subject);return this.subject instanceof Tags?a.assign(this.subject,Tags.get(this)):this},extend:function(b){return b instanceof
Tags?a.assign(this,Tags.get(b)):this}});a.assign(Tags,{omit:$restArg(function(a){if(a instanceof Tags){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];var h=_.index(c),b=_.pick(a,function(a,b){return"$"===b[0]&&!(b in h)});return _.isEmptyObject(b)?a.subject:new Tags(a.subject,b)}return a}),clone:function(a,b){return a instanceof Tags?a.clone(b):b||a},extend:function(a,b){return a instanceof Tags?a.clone().extend(b):b instanceof Tags?Tags.wrap(a).extend(b):a},get:function(a){return a instanceof
Tags?_.pick(a,function(a,b){return"$"===b[0]}):{}},each:function(a,b){a instanceof Tags&&_.each(a,function(a,c){"$"===c[0]&&b(c.slice(1))})},hasSubject:function(a){return a instanceof Tags&&"subject"in a},matches:function(a){return function(b){return b&&void 0!==b["$"+a]}},unwrapAll:function(a){return _.map2(a,Tags.unwrap)},unwrap:function(a){return a instanceof Tags?a.subject:a},wrap:function(a){return a instanceof Tags?a:0===arguments.length?new Tags:new Tags(a)},modify:function(a,b){return a instanceof
Tags?a.clone().modify(b):b(a)},map:function(a,b){return Tags.modify(a,function(a){return _.map2(a,function(a,c){return Tags.modify(a,function(d){return b(d,c,a instanceof Tags?a:void 0)})})})},add:function(a,b,c){return Tags.wrap.apply(null,[].slice.call(arguments,1)).add(a,c)},all:new Set,isDefined:function(a){return Tags.all.has(a)},define:function(b,c){Tags.all.add(b);c=_.isFunction(c)&&c||_.identity;var f="$"+b;$global[f]=c(function(a,c){return 2>arguments.length?Tags.add(b,a):Tags.add(b,c,a)});
return a.assign($global[f],{matches:Tags.matches(b),is:function(a){return a instanceof Tags&&f in a||!1},isNot:function(a){return!(a instanceof Tags&&f in a)||!1},unwrap:function(a){return!0===$atom.matches(a)?Tags.unwrap(a):a}})}});$global.$untag=Tags.unwrap;["constant","get","once","async","atom"].forEach(Tags.define);$jscomp.initSymbol();if("undefined"!==typeof Symbol){var b=c(33);$jscomp.initSymbol();Tags.prototype[Symbol["for"]("String.ify")]=function(a){if(a.json)return a($untag(this));var c=
Tags.get(this),f=_.reduce(c,function(b,c,f){return _.isBoolean(c)?f+" ("+b:f+" ("+a.configure({pretty:!1})(c)+", "+b},"");return b(f,a($untag(this)))+")".repeats(_.keys(c).length)}}},function(m,n,c){(function(a){(function(){var b=function(){if("undefined"!==typeof window&&window.window===window&&void 0!==window.navigator){var b=navigator.platform,c=navigator.userAgent,d=b+"\n"+c;return _.extend({engine:"browser",browserEngine:0<=c.indexOf("AppleWebKit")?"WebKit":void 0,browser:0<=c.indexOf("Firefox")?
"Firefox":0<=c.indexOf("Chrome")?"Chrome":0<=c.indexOf("Safari")?"Safari":0<=c.indexOf("Trident")?"IE":void 0},0<=b.indexOf("Linux arm")||0<=d.indexOf("Android")?{touch:!0,system:"Android"}:0<=d.indexOf("iPad")?{touch:!0,system:"iOS",device:"iPad"}:0<=d.indexOf("iPhone")||0<=d.indexOf("iPod")?{touch:!0,system:"iOS",device:"iPhone"}:{})}return"undefined"!==typeof a&&a.global===a?{engine:"node"}:{}}(),c="browser"===b.engine?window:"node"===b.engine?a:void 0;c.property=function(a,b,e){if(a in c)throw Error("cannot redefine global "+
a);return Object.defineProperty(c,a,Object.assign({},b instanceof Function?{get:b,set:function(){throw Error("cannot set global "+a);}}:b,{enumerable:!0},e))};c["const"]=function(a,b,e){return c.property(a,{value:b,writable:!1},e)};c["const"]("$global",c);c["const"]("$platform",{engine:b.engine,system:b.system,device:b.device,touch:b.touch||!1,IE:"IE"===b.browser,Firefox:"Firefox"===b.browser,Safari:"Safari"===b.browser,Chrome:"Chrome"===b.browser,WebKit:"WebKit"===b.browserEngine,Browser:"browser"===
b.engine,NodeJS:"node"===b.engine,iPad:"iPad"===b.device,iPhone:"iPhone"===b.device,iOS:"iOS"===b.system})})()}).call(n,c(0))},function(m,n){_.extend(_,{defineProperty:function(c,a,b,d){if(_.isObject(c)&&c.hasOwnProperty(a))throw Error("_.defineProperty: targetObject already has property "+a);Object.defineProperty(c,a,_.extend({enumerable:!0},d,_.coerceToPropertyDefinition(b,a)))},defineHiddenProperty:function(c,a,b,d){return _.defineProperty(c,a,b,_.extend({enumerable:!1},d))},defineMemoizedProperty:function(c,
a,b,d){b=_.coerceToPropertyDefinition(b,a);return _.defineProperty(c,a,_.extend({},b,{get:_.memoizeToThis("_"+a,b.get)}),d)},defineProperties:function(c,a){_.each(a,_.defineProperty.partial(c).flip2)},memoizedState:function(c){return _.filter2(c,function(a,b){return"_"===b[0]&&!_.isFunction(a)})},memoizeToThis:function(c,a){return function(){var b=this[c];return void 0!==b?b:this[c]=a.call(this)}},coerceToPropertyDefinition:function(c,a){var b=c||{},d="undefined"===typeof Tags?c:Tags.unwrap(c);return!b.$constant&&
!b.$get&&_.isPropertyDefinition(d)&&d||(b.$get||!b.$constant&&_.isFunction(d)&&_.noArgs(d))&&{get:d,set:_.throwsError("cannot change "+(a||"property")+" (as it's an accessor function)")}||!b.$get&&{get:_.constant(d),set:_.throwsError("cannot change "+(a||"property")+" (as it's sealed to "+d+")")}||_.throwsError("coerceToPropertyDefinition: crazy input, unable to match")()},isPropertyDefinition:function(c){return _.isObject(c)&&(_.isFunction(c.get)||_.isFunction(c.set))},ownProperties:function(c){return c&&
_.pickKeys(c,c.hasOwnProperty.bind(c))||{}}})},function(m,n,c){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},b=c(1);_.hasStdlib=!0;_.throwsError=_.higherOrder(_.throwError=function(a){throw a instanceof Error?a:Error(a);});_["throws"]=_.higherOrder(_["throw"]=
function(a){throw a;});_.overrideThis=_.throwsError("override this");_.notImplemented=_.throwsError("not implemented");_.mixin({values2:function(a){return _.isArrayLike(a)?a:_.isStrictlyObject(a)?_.values(a):_.isEmpty(a)?[]:[a]}});_.mixin({map2:function(a,b,c){return _.isArrayLike(a)?_.map(a,b,c):a instanceof Set?_.mapSet(a,b,c):_.isStrictlyObject(a)?_.mapValues(a,b,c):b.call(c,a)}});_.mapSet=function(a,b,c){var e=new Set,h=!0,p=!1,l=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var m=
a[Symbol.iterator](),n;!(h=(n=m.next()).done);h=!0)e.add(b.call(c,n.value))}catch(q){p=!0,l=q}finally{try{!h&&m["return"]&&m["return"]()}finally{if(p)throw l;}}return e};_.mapsWith=_.higherOrder(_.mapWith=_.flip2(_.map2));_.pluck2=function(a,b){return _.map2(a,_.property(b))};_.mixin({scatter:function(a,b){var c=void 0;_.map2(a,function(a,d){b(a,d,function(a,b){2>arguments.length?(c=c||[]).push(a):(c=c||{})[b]=a})});return c}});_.obj=function(a){var b=void 0;a(function(a,c){(b=b||{})[c]=a});return b};
_.arr=function(a){var b=void 0;a(function(a){(b=b||[]).push(2>arguments.length?a:_.asArray(arguments))});return b};_.mapKeys=function(a,c){return _.isArrayLike(a)?_.map(a,_.tails2(_.mapKeys,c)):_.isStrictlyObject(a)?_.fromPairs(_.map(b.entries(a),function(a){return[c(a[0]),_.mapKeys(a[1],c)]})):a};_.mapMap=_.hyperOperator(_.unary,_.map2);_.hyperMap=function(a,b){return _.hyperOperator(_.unary,function(a,c){return b(a)||_.map2(a,c)})(a,_.identity)};_.pairs2=function(a){return _.scatter(a,function(a,
b,c){c([b,a])})};_.reject2=function(a,b){return _.filter2(a,_.not(b))};_.filter2=function(a,b){if(_.isArrayLike(a)){for(var c=[],e=0,h=a.length;e<h;e++){var p=a[e],l=b(p,e);!0===l?c.push(p):!1!==l&&c.push(l)}return c}if(_.isStrictlyObject(a))return c={},_.each(Object.keys(a),function(e){var h=a[e],l=b(h,e);!0===l?c[e]=h:!1!==l&&(c[e]=l)}),c;l=b(a);if(!0===l)return a;if(!1!==l)return l};_.filterFilter=_.hyperOperator(_.unary,_.filter2);_.hyperFilter=function(a,b){return _.hyperOperator(_.unary,function(a,
c){var d=b(a);return!0===d&&_.filter2(a,c)||d})(a,_.identity)};_.hyperReject=function(a,b){return _.hyperFilter(a,function(a){a=b(a);return _.isBoolean(a)?!a:a})};_.each2=function(a,b){if(_.isArrayLike(a))for(var c=0,e=a.length;c<e;c++)b(a[c],c,e);else if(_.isStrictlyObject(a))for(var h=Object.keys(a),p,c=0,e=h.length;c<e;c++)b(a[p=h[c]],p,e);else b(a,void 0,1)};_.reduce2=function(a,b,c){var e=3>arguments.length,h=a,p=b,l=c;e&&(h=void 0,p=a,l=b);_.each2(p,function(a,b){h=e?a:l(h,a);e=!1});return h};
_.reduceReduce=function(a,b,c){var e=a,h=b,p=c;3>arguments.length&&(e={},h=a,p=b);return _.hyperOperator(_.binary,_.reduce2,_.goDeeperAlwaysIfPossible)(e,h,p)};_.concat=function(a,b){var c,e;1===arguments.length?(c=a[0],e=a.slice(1)):(c=a,e=[].slice.call(arguments,1));return _.isArrayLike(c)?c.concat.apply(c,e):_.reduce2(c,e,function(a,b){return _.isObject(a)&&_.isObject(b)?_.extend({},a,b):a+b})};_.mixin({zipSetsWith:function(a,b){return _.reduce(a.slice(1),function(a,c){_.each(_.union(c&&Array.from(c.values())||
[],a&&Array.from(a.values())||[]),function(d){var p=b(a&&a.has(d)?d:void 0,c&&c.has(d)?d:void 0);void 0===p?a["delete"](d):a.add(p)});return a},new Set(a[0]))},zipObjectsWith:function(a,b){return _.reduce(a.slice(1),function(a,c){_.each(_.union(_.keys(c),_.keys(a)),function(d){var p=b(a&&a[d],c&&c[d]);void 0===p?delete a[d]:a[d]=p});return a},_.clone(a[0]))},zip2:function(a,b){var c=2===arguments.length?a:_.initial(arguments),e=2===arguments.length?b:_.last(arguments);return _.isArrayLike(c)&&0!==
c.length?_.isArrayLike(c[0])?_.zipWith(c,e):c[0]instanceof Set?_.zipSetsWith(c,e):_.isStrictlyObject(c[0])?_.zipObjectsWith(c,e):_.reduce2(c,e):c}});_.mixin({zipZip:_.hyperOperator(_.binary,_.zip2)});_.extend=$restArg(_.extend);_.extended=$restArg(function(){return _.extend.apply(this,[{}].concat(_.asArray(arguments)))});_.extendWith=_.flip(_.extend);_.extendsWith=_.flip(_.partial(_.partial,_.flip(_.extend)));_.extendedDeep=_.tails3(_.zipZip,function(a,b){return void 0===b?a:b});_.extend2=$restArg(function(b){return _.extend(b,
_.reduceRight(arguments,function(b,c){return _.fromPairs(_.map(_.union(_.keys(c),_.keys(b)),function(d){var h=c[d];return[d,d in b?"object"===("undefined"===typeof h?"undefined":a(h))?_.extend(h,b[d]):b[d]:h]}))},{}))});_.find2=function(a,b){if(_.isArrayLike(a))for(var c=0,e=a.length;c<e;c++){var h=b(a[c],c,a);if("boolean"!==typeof h)return h;if(!0===h)return a[c]}else if(_.isStrictlyObject(a))for(var c=0,p=Object.keys(a),e=p.length;c<e;c++){var l=p[c],h=b(a[l],l,a);if("boolean"!==typeof h)return h;
if(!0===h)return a[l]}};_.findFind=function(a,b){return _.hyperOperator(_.unary,function(a,c){if(_.isArrayLike(a))for(var d=0,p=a.length;d<p;d++){var l=c(a[d]);if("boolean"!==typeof l)return l;if(!0===l)return a[d]}else if(_.isStrictlyObject(a))for(var d=0,m=Object.keys(a),p=m.length;d<p;d++){var n=m[d],l=c(a[n]);if("boolean"!==typeof l)return l;if(!0===l)return a[n]}l=b(a);return"boolean"!==typeof l?l:!0===l?a:!1})(a,b)};_.nonempty=function(a){return _.filter2(a,_.isNonempty)};_.extend(_,{clone:function(a){return a instanceof
Set?new Set(a):_.isObject(a)?_.isArray(a)?a.slice():_.extend({},a):a},cloneDeep:_.tails2(_.mapMap,function(a){return _.isStrictlyObject(a)&&!_.isPrototypeInstance(a)?_.clone(a):a})});_.hyperMatch=_.hyperOperator(_.binary,function(a,b,c){return _.coerceToUndefined(_.nonempty(_.zip2(a,b,c)))});_.diff=_.tails3(_.hyperMatch,function(a,b){return $atom.unwrap(a)===$atom.unwrap(b)||a===$any||b===$any?void 0:b});_.hyperMatch=_.hyperOperator(_.binary,function(a,b,c){return _.coerceToUndefined(_.zip2(a,b,c))});
_.undiff=_.tails3(_.hyperMatch,function(a,b){return $atom.unwrap(a)===$atom.unwrap(b)||a===$any||b===$any?b:void 0});_.extend(_,{index:function(a){for(var b={},c=0,e=a.length;c<e;c++)b[a[c]]=!0;return b}});_.quote=function(a,b){var c=b||"",e=Math.floor(c.length/2+c.length%2),h=c.slice(0,e),c=c.slice(e)||h;return h+a+c};_.quoteWith=_.flip2(_.quote);_.quotesWith=_.higherOrder(_.quoteWith);_.partition2=function(a,b){return _.pluck(_.partition3(a,b),"items")};_.partition3=function(a,b){var c=a||[],e=
[],h={label:void 0,items:[c.first]};_.each(c,function(a){var c=b(a);h.label!=c&&h.items.length?e.push(h={label:c,items:[a]}):h.items.push(a)});return h.length&&e.push(h),e};(function(){var a=function(a){var b={};_.each(a,function(a,c){b[a]=b[a]||[];b[a].push(c)});return b};_.longestCommonSubstring=function(a,b){var c=_.indexOfLongestCommonSubstring(a,b);return c.length?a.substr(c.a,c.length):void 0};_.indexOfLongestCommonSubstring=function(b,c){var e={a:0,b:0,length:0},h=a(b),p=[];_.each(c,function(a,
b){var c,d=[];_.each(h[a]||[],function(a){c=(a&&p[a-1]||0)+1;c>e.length&&(e.length=c,e.a=a-c+1,e.b=b-c+1);d[a]=c});p=d});return e}})();_.key=function(a){return function(b,c){return a(c)}};_.pickKeys=function(a,b){return _.pick(a,function(a,c){return b(c)})}},function(m,n,c){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&
"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},b=c(1);_.isTypeOf=function(a,b){return b instanceof a};_.isPrototypeInstance=function(a){return a&&a.constructor&&_.isPrototypeConstructor(a.constructor)};_.isPrototypeConstructor=function(a){return a&&void 0!==a.$definition||!1};_.coerceToNaN=function(a){return _.isFinite(a)?a:Number.NaN};_.coerceToArray=function(a){return void 0===a?[]:_.isArray(a)?a:[a]};_.coerceToFunction=function(a){return _.isFunction(a)?a:_.constant(a)};
_.isArrayLike=function(a){return a instanceof Array||$platform.Browser&&a instanceof NodeList};_.isArray=function(a){return a instanceof Array};_.mixin({matches:function(a){return 0===arguments.length&&_.constant(!0)||_.tails2(_.match,a)},match:function(a,b){return a===b||_.isArray(a)&&_.isArray(b)&&_.arrayMatch(a,b)||_.isObject(a)&&_.isObject(b)&&_.objectMatch(a,b)||_.isTypeOf(RegExp,b)&&_.isString(a)&&null!==a.match(b)},arrayMatch:function(a,b){return _.every(b,_.propertyOf(_.index(a)))},objectMatch:function(a,
c){return _.reduce(b.entries(c),function(b,c){return b&&_.match(a[c[0]],c[1])},!0)}});_.isScalar=function(a){return void 0===a||null===a||a.constructor===String||a.constructor===Number||a.constructor===Boolean};_.isNonPOD=function(a){return!_.isPOD(a)};_.isPOD=function(a){return _.isScalar(a)||a&&(a.constructor===Object||a.constructor===Array)};_.extend(_,{isEmpty:function(a){return void 0===_.coerceToUndefined(a)},isNonempty:function(a){return void 0!==_.coerceToUndefined(a)},isEmptyObject:function(a){return!_.isArray(a)&&
!_.isFunction(a)&&_.isObject(a)&&0===_.keys(a).length},isStrictlyObject:function(b){return b&&"object"===("undefined"===typeof b?"undefined":a(b))?!0:!1},isEmptyArray:function(a){return _.isArray(a)&&0===a.length},isNonemptyString:function(a){return"string"===typeof a&&0<a.length},coerceToObject:function(a){return _.isStrictlyObject(a)?a:{}},coerceToEmpty:function(a){if(_.isArray(a))return[];if(_.isStrictlyObject(a))return{}},coerceToUndefined:function(a){return void 0===a||null===a||a===Math.NaN||
""===a||_.isPOD(a)&&(_.isEmptyObject(a)||0===a.length)?void 0:a}})},function(m,n){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};_.hasTypeMatch=!0;Tags.define("required");Tags.define("atom");$global["const"]("$any",_.identity);(function(){_.isMeta=
function(a){return a===$any||!0===$atom.is(a)||!0===$required.is(a)};var a=function(a,b,c){var d=Tags.unwrapAll(_.filter2(a,$required.matches));a=_.nonempty(_.zip2(Tags.unwrapAll(a),b,c));if(_.isEmpty(d))return a;c=_.nonempty(_.zip2(d,b,c));return _.values2(d).length===_.values2(c).length?a:_.coerceToEmpty(b)},b=_.hyperOperator(_.binary,function(b,c,d){var k=Tags.unwrap(b);if(_.isArray(k)){if(_.isArray(c))return a(_.times(c.length,_.constant(k[0])),c,d)}else if(_.isStrictlyObject(k)&&k["*"]){if(_.isStrictlyObject(c))return a(_.extend(_.map2(c,
_.constant(k["*"])),_.omit(k,"*")),c,d)}else return a(b,c,d)}),d=function(a,b){var d=Tags.unwrap(a);return d===$any||void 0===d&&void 0===b||_.isFunction(d)&&(_.isPrototypeConstructor(d)?_.isTypeOf(d,b):!0===d(b))||("undefined"===typeof b?"undefined":c(b))===d||b===d};_.mismatches=function(a,c,d){return b(c,d,function(b,c){return a(b,c)?void 0:b})};_.omitMismatches=function(a,c,d){return b(c,d,function(b,c){return a(b,c)?c:void 0})};_.typeMismatches=_.partial(_.mismatches,d);_.omitTypeMismatches=
_.partial(_.omitMismatches,d);_.valueMismatches=_.partial(_.mismatches,function(a,b){return a===$any||b===$any||a===b});var k=function(a){if(_.isArray(a))return _.nonempty([_.reduce(a.slice(1),function(a,b){return _.undiff(a,b)},_.first(a)||void 0)]);if(_.isStrictlyObject(a)){var b=_.pairs(a),b=_.map(_.reduce(b.slice(1),function(a,b){return _.undiff(a,b)},_.first(b)||[void 0,void 0]),_.nonempty);return _.isEmpty(b)||_.isEmpty(b[1])?a:_.fromPairs([[b[0]||"*",b[1]]])}return a};_.decideType=function(a){return _.hyperOperator(_.unary,
function(a,b){return a&&a.constructor&&a.constructor.$definition?a.constructor:k(_.map2(a,b))})(a,function(a){return _.isPrototypeInstance(a)?a.constructor:_.isEmptyArray(a)?a:"undefined"===typeof a?"undefined":c(a)})}})()},function(m,n){$global.DOMReference=$trait({domReady:$barrier(function(c){this.dom=c;"undefined"!==typeof jQuery&&(this.el=jQuery(this.dom))}),afterDestroy:function(){this.dom&&(this.dom.removeFromParent(),this.el=this.dom=void 0);this.domReady.reset()}});$global.DOMReferenceWeak=
$trait({domReady:$barrier(function(c){this.dom=c}),afterDestroy:function(){this.dom=void 0}});$global.DOMEvents=$trait({dispatchEvent:function(c){this.domReady(function(a){var b=document.createEvent("Event");b.initEvent(c,!0,!0);a.dispatchEvent(b)})},$macroTags:{on:function(c,a,b){var d=c.constructor.DOMEventListeners||(c.constructor.DOMEventListeners=[]),k=a.$on,k=_.isString(k)?{fn:b,e:k}:_.isObject(k)?{fn:b,e:k.what,target:k.target}:{fn:b,e:b};_.each(k.e.split(" "),function(a){d.push(_.defaults({e:a},
k))})}},domReady:function(c){_.each(this.constructor.DOMEventListeners,function(a){(a.target||c).addEventListener(a.e,this[a.fn])},this)},beforeDestroy:function(){this.domReady(function(c){_.each(this.constructor.DOMEventListeners,function(a){(a.target||c).removeEventListener(a.e,this[a.fn])},this)})}});$global.HideOnEscape=$trait({hideOnEscape:$on({what:"keydown",target:document},function(c){27===c.keyCode&&(this.destroy(),c.preventDefault())})})},function(m,n){$global.InertialValue=$component({$defaults:{duration:.2,
easing:"linear"},animating:$observableProperty(!1),target:$observableProperty(),value:$observableProperty(),init:function(c){var a=this;this.easing=(this.value instanceof Vec2?Easing.vector:Easing.scalar)[this.easing];this.targetChange(function(b){void 0!==b&&(!1===a.animating?(a.start=a.value,a.target=b,a.startTime=Date.now(),a.step()):a.start=a.value)})},step:function(){var c=Date.now(),c=Math.min(1,((this.lastTime=c)-this.startTime)/(1E3*this.duration));1>c?(this.animating=!0,this.value=this.easing(this.start,
this.target,c),requestAnimationFrame(this.step)):(this.value=this.target,this.animating=!1)}});$global.Easing={scalar:{linear:function(c,a,b){return c+(a-c)*b},"in":function(c,a,b){return c+(a-c)*Math.pow(b,2)},out:function(c,a,b){return a-(a-c)*Math.pow(1-b,2)},inOut:function(c,a,b){var d=a-c;return.5>b?c+.5*d*Math.pow(2*b,2):a-.5*d*Math.pow(2-2*b,2)}},vector:{linear:function(c,a,b){return c.add(a.sub(c).scale(b))},"in":function(c,a,b){return c.add(a.sub(c).scale(Math.pow(b,2)))},out:function(c,
a,b){return a.sub(a.sub(c).scale(Math.pow(1-b,2)))},inOut:function(c,a,b){var d=a.sub(c);return.5>b?c.add(d.scale(.5*Math.pow(2*b,2))):a.sub(d.scale(.5*Math.pow(2-2*b,2)))}}}},function(m,n){var c=function(a){return function(){return this.tagName===a}};$global.N=function(a,b){var c=document.createElement(a.uppercase);return b?c.append(b):c};N.text=function(a){return document.createTextNode(a)};_.each("br p div em a b i u s strong span sup sub button iframe pre img video source h1 h2 h3 h4 h5 textarea input style".split(" "),
function(a){var b=a.uppercase;_.defineProperty(N,a,function(){return document.createElement(b)})});N.all=document.querySelectorAll.bind(document);N.one=document.querySelector.bind(document);$mixin(Node,{$:$prototype.impl.$,$callableAsFreeFunction:{$property:{isElement:function(){return this.nodeType===Node.ELEMENT_NODE},isText:function(){return this.nodeType===Node.TEXT_NODE},isLinebreak:c("BR"),isDiv:c("DIV"),isParagraph:c("P"),isHyperlink:c("A"),isAttachedToDocument:function(){return this.matchUpwards(_.equals(document.body))?
!0:!1},forbidsEditing:function(){return this.nodeType===Node.ELEMENT_NODE&&"false"===this.getAttribute("contenteditable")}}},grandParentNode:$property(function(){return this.parentNode&&this.parentNode.parentNode}),isFirstInParent:$property(function(){return this.parentNode&&this.parentNode.firstChild===this}),isLastInParent:$property(function(){return this.parentNode&&this.parentNode.lastChild===this}),removeFromParent:$callableAsFreeFunction(function(){this.parentNode.removeChild(this);return this}),
outerLeftBoundaryIn:function(a){for(var b=this;b.grandParentNode&&b.parentNode!==a&&b.isFirstInParent;)b=b.parentNode;return b},outerRightBoundaryIn:function(a){for(var b=this;b.grandParentNode&&b.parentNode!==a&&b.isLastInParent;)b=b.parentNode;return b},matchUpwards:function(a){for(var b=this;b&&!a(b);)b=b.parentNode;return b},isLeftmostNodeIn:function(a){return a&&this.matchUpwards(function(b){return b===a||!b.isFirstInParent})===a},isRightmostNodeIn:function(a){return a&&this.matchUpwards(function(b){return b===
a||!b.isLastInParent})===a},hasChildren:$property(function(){return this.hasChildNodes()}),noChildren:$property(function(){return!this.hasChildNodes()}),numChildren:$property(function(){return this.childNodes.length}),length:$property(function(){return this.childNodes?this.childNodes.length:this.nodeValue?this.nodeValue.length:0}),safeEnumChildren:function(a,b){_.each(this.childNodesArray,a,b||this);return this},childNodesArray:$property(function(){return _.asArray(this.childNodes)}),add:$alias("appendChildren"),
append:$alias("appendChildren"),appendChildren:function(a,b){for(var c=void 0===b?_.coerceToArray(a):arguments,k=0,f=c.length;k<f;k++){var e=c[k];this.appendChild(_.isString(e)?document.createTextNode(e):e)}return this},removeChildren:function(a){a=_.coerceToArray(a);for(var b=0,c=a.length;b<c;b++)this.removeChild(a[b]);return this},removeAllChildren:function(){return this.removeChildren(this.childNodesArray)},walkTree:function(a,b){b=1===arguments.length?a:b;for(var c=document.createTreeWalker(this,
a&&a.what||NodeFilter.SHOW_ALL,a&&a.filter||null,a&&a.entityReferenceExpansion||null);node=c.nextNode();)b(node)},firstInnermostChild:$callableAsMethod($property(function(a){for(;a&&a.firstChild;)a=a.firstChild;return a})),unwrapChildren:$callableAsFreeFunction(function(){this.insertAfterMe(this.childNodesArray);var a=this.parentNode;a.removeChild(this);return a}),prevSiblings:$property(function(){for(var a=[],b=this.previousSibling;b;)a.push(b),b=b.previousSibling;return a.reversed}),nextNextSibling:$property(function(){return this.nextSibling&&
this.nextSibling.nextSibling}),nextOutermostSibling:$callableAsMethod($property(function(a){for(;a&&!a.nextSibling;)a=a.parentNode;a&&(a=a.nextSibling);return a})),nextInnermostSibling:$callableAsMethod($property(function(a){return Node.firstInnermostChild(Node.nextOutermostSibling(this))})),appendTo:function(a){a.appendChild(this);return this},prependTo:function(a){a.insertBefore(this,a.firstChild);return this},replaceWith:function(a){this.insertBeforeMe(a).removeFromParent()},insertMeBefore:function(a){a.parentNode.insertBefore(this,
a);return this},insertMeAfter:function(a){a.parentNode.insertBefore(this,a.nextSibling);return this},insertBeforeMe:function(a){var b=this.parentNode,c=this;_.each(_.coerceToArray(a).reversed,function(a){b.insertBefore(a,c)});return this},insertAfterMe:function(a){var b=this.parentNode,c=this.nextSibling;_.each(_.coerceToArray(a).reversed,function(a){b.insertBefore(a,c)});return this},on:function(a,b){this.addEventListener(a,b);return this},once:function(a){var b=this,c,k=!1,f=new Promise(function(e){b.addEventListener(a,
c=function(a){k||(k=!0,b.removeEventListener(a,c),e(a))})});f.finalize=c;return f},touched:function(a){return this.on($platform.touch?"touchstart":"click",a)},extend:function(a){return _.extend(this,a)},cls:function(a){this.className=a;return this},css:function(a){_.extend(this.style,a);return this},hasClass:function(a){return(this.className||"").split(" ").contains(a)},toggleAttribute:function(a,b){var c=2>arguments.length;c&&(b=!this.hasAttribute(a));b?this.setAttribute(a,b):this.removeAttribute(a);
return c?b:this},toggleAttributes:function(a){_.map(a,_.flip2(this.toggleAttribute),this);return this},setAttributes:function(a){_.map(a,_.flip2(this.setAttribute),this);return this},intAttribute:function(a){return(this.getAttribute(a)||"").parsedInt},attr:$alias("setAttributes"),removeAttr:function(a){this.removeAttribute(a);return this},splitSubtreeBefore:function(a){return a&&a.parentNode!==this?this.splitSubtreeBefore(a.previousSibling?document.createElement(a.parentNode.tagName).insertMeBefore(a.parentNode).appendChildren(a.prevSiblings).nextSibling:
a.parentNode):a},splitSubtreeAt:function(a){var b=a.node,c=a.offset;return 0<c?a.node.isText?this.splitSubtreeBefore(N.text(b.nodeValue.substr(c)).insertMeAfter(_.extend(b,{nodeValue:b.nodeValue.substr(0,c)}))):this.splitSubtreeBefore(b.childNodes[c]):this.splitSubtreeBefore(b)},html:function(a){this.innerHTML=a;return this},text:function(a){this.innerText=a;return this},attributeUntil:function(a,b){this.setAttribute(a,!0);return b.done(this.$(function(b,c){this.removeAttribute(a)}))},busyUntil:function(a){return this.attributeUntil("busy",
a)},onceAnimationEnd:$property(function(){return this.once($platform.WebKit?"webkitAnimationEnd":"animationend")}),onceTransitionEnd:$property(function(){return this.once($platform.WebKit?"webkitTransitionEnd":"transitionend")}),animateWithAttribute:function(a){if(this.hasAttribute(a)&&this._onceAnimationEnd)return this._onceAnimationEnd;this._onceAnimationEnd&&this._onceAnimationEnd.finalize();this.setAttribute(a,!0);this._onceAnimationEnd=this.onceAnimationEnd;return this._onceAnimationEnd.then(this.$(function(){this.removeAttribute(a);
this.getBoundingClientRect();this._onceAnimationEnd=void 0}))},animatedWithAttribute:function(a){this.animateWithAttribute(a);return this}});$mixin(Element,{all:Element.prototype.querySelectorAll,one:Element.prototype.querySelector,append:Node.prototype.append,clientBBox:$property(function(){return BBox.fromLTWH(this.getBoundingClientRect())}),bbox:$property(function(){return this.clientBBox.offset(document.bbox.leftTop)}),setWidthHeight:function(a){this.style.width=a.x+"px";this.style.height=a.y+
"px";return this},setTransform:function(a){this.transform=a;return this},transform:$property({get:function(){var a=(this.css("transform")||"").match(/^matrix\((.+\))$/);return a?(a=a[1].split(",").map(parseFloat),new Transform({a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]})):Transform.identity},set:function(a){this.style.transform=_.isStrictlyObject(a)&&(a.translate?"translate("+a.translate.x.toFixed(0)+"px,"+a.translate.y.toFixed(0)+"px) ":"")+(a.rotate?"rotate("+a.rotate+"rad) ":"")+(a.scale?"scale("+
(new Vec2(a.scale)).separatedWith(",")+")":"")||""}}),reads:function(a,b){a(this.$(function(a){a=(b||_.identity).call(this,a);this.removeAllChildren();this.add(a instanceof Node?a:a+"")}));return this},$toggleAttribute:function(a,b){b(this.$(function(b){this.toggleAttribute(a,b)}));return this},$add:function(a){if(a instanceof Promise){var b=document.createElement("PROMISE");this.appendChild(b);a.then(function(a){b.replaceWith(a)}).panic}else this.add(a);return this}});$mixin(HTMLInputElement,{$value:$property(function(){this._observableValue||
(this._observableValue=_.observable(this.value),this._observableValue.context=this,this.on("input",this.$(function(){this._observableValue(this.value)})));return this._observableValue})});$mixin(Image,{fetch:$static(function(a){return new Promise(function(b,c){_.extend(new Image,{src:a,onload:function(){b(this)},onerror:function(a){c(a)}})})})});_.defineProperties(document,{bbox:function(){return this.clientBBox.offset(Vec2.xy(window.pageXOffset,window.pageYOffset))},clientBBox:function(){return BBox.fromLTWH(0,
0,window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight)}});document.on("DOMContentLoaded",document.ready=_.barrier())},function(m,n){m.exports=function(c,a){var b=Array.isArray(a),d=b?a:a.split("\n"),k=c.replace(/[^\s]/g," "),d=d.map(function(a,b){return 0===b?c+a:k+a});return b?d:d.join("\n")}},function(m,n){m.exports="object"===typeof Reflect&&"function"===typeof Reflect.ownKeys?Reflect.ownKeys:"function"===typeof Object.getOwnPropertySymbols?
function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:Object.getOwnPropertyNames},function(m,n){function c(a,b){function c(h,l,m){if(0<=m.indexOf(h))throw Error("Cyclic dependency: "+JSON.stringify(h));if(!~a.indexOf(h))throw Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(h));if(!e[l]){e[l]=!0;var n=b.filter(function(a){return a[0]===h});if(l=n.length){m=m.concat(h);do{var q=n[--l][1];c(q,a.indexOf(q),m)}while(l)}f[--k]=
h}}for(var k=a.length,f=Array(k),e={},h=k;h--;)e[h]||c(a[h],h,[]);return f}m.exports=n=function(a){for(var b=[],d=0,k=a.length;d<k;d++){var f=a[d];0>b.indexOf(f[0])&&b.push(f[0]);0>b.indexOf(f[1])&&b.push(f[1])}return c(b,a)};n.array=c},function(m,n,c){var a,b;(function(){function c(a){return function(b,c,d,e){c=A(c,e,4);var f=!v(b)&&g.keys(b),h=(f||b).length,k=0<a?0:h-1;3>arguments.length&&(d=b[f?f[k]:k],k+=a);for(var l=c,m=d;0<=k&&k<h;k+=a)var n=f?f[k]:k,m=l(m,b[n],n,b);return m}}function k(a){return function(b,
c,d){c=t(c,d);d=y(b);for(var g=0<a?0:d-1;0<=g&&g<d;g+=a)if(c(b[g],g,b))return g;return-1}}function f(a,b,c){return function(d,e,f){var h=0,k=y(d);if("number"==typeof f)0<a?h=0<=f?f:Math.max(f+k,h):k=0<=f?Math.min(f+1,k):f+k+1;else if(c&&f&&k)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(q.call(d,h,k),g.isNaN),0<=f?f+h:-1;for(f=0<a?h:k-1;0<=f&&f<k;f+=a)if(d[f]===e)return f;return-1}}function e(a,b){var c=L.length,d=a.constructor,d=g.isFunction(d)&&d.prototype||w,e="constructor";for(g.has(a,e)&&
!g.contains(b,e)&&b.push(e);c--;)e=L[c],e in a&&a[e]!==d[e]&&!g.contains(b,e)&&b.push(e)}var h=this,p=h._,l=Array.prototype,w=Object.prototype,E=l.push,q=l.slice,r=w.toString,u=w.hasOwnProperty,D=Array.isArray,M=Object.keys,F=Function.prototype.bind,O=Object.create,G=function(){},g=function(a){if(a instanceof g)return a;if(!(this instanceof g))return new g(a);this._wrapped=a};"undefined"!==typeof m&&m.exports&&(n=m.exports=g);n._=g;g.VERSION="1.8.3";var A=function(a,b,c){if(void 0===b)return a;switch(null==
c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,g){return a.call(b,c,d,g)};case 4:return function(c,d,g,e){return a.call(b,c,d,g,e)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){return null==a?g.identity:g.isFunction(a)?A(a,b,c):g.isObject(a)?g.matcher(a):g.property(a)};g.iteratee=function(a,b){return t(a,b,Infinity)};var B=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;
for(var g=1;g<d;g++)for(var e=arguments[g],f=a(e),h=f.length,k=0;k<h;k++){var l=f[k];b&&void 0!==c[l]||(c[l]=e[l])}return c}},P=function(a){if(!g.isObject(a))return{};if(O)return O(a);G.prototype=a;a=new G;G.prototype=null;return a},C=function(a){return function(b){return null==b?void 0:b[a]}},T=Math.pow(2,53)-1,y=C("length"),v=function(a){a=y(a);return"number"==typeof a&&0<=a&&a<=T};g.each=g.forEach=function(a,b,c){b=A(b,c);var d;if(v(a))for(c=0,d=a.length;c<d;c++)b(a[c],c,a);else{var e=g.keys(a);
c=0;for(d=e.length;c<d;c++)b(a[e[c]],e[c],a)}return a};g.map=g.collect=function(a,b,c){b=t(b,c);c=!v(a)&&g.keys(a);for(var d=(c||a).length,e=Array(d),f=0;f<d;f++){var h=c?c[f]:f;e[f]=b(a[h],h,a)}return e};g.reduce=g.foldl=g.inject=c(1);g.reduceRight=g.foldr=c(-1);g.find=g.detect=function(a,b,c){b=v(a)?g.findIndex(a,b,c):g.findKey(a,b,c);if(void 0!==b&&-1!==b)return a[b]};g.filter=g.select=function(a,b,c){var d=[];b=t(b,c);g.each(a,function(a,c,x){b(a,c,x)&&d.push(a)});return d};g.reject=function(a,
b,c){return g.filter(a,g.negate(t(b)),c)};g.every=g.all=function(a,b,c){b=t(b,c);c=!v(a)&&g.keys(a);for(var d=(c||a).length,e=0;e<d;e++){var f=c?c[e]:e;if(!b(a[f],f,a))return!1}return!0};g.some=g.any=function(a,b,c){b=t(b,c);c=!v(a)&&g.keys(a);for(var d=(c||a).length,e=0;e<d;e++){var f=c?c[e]:e;if(b(a[f],f,a))return!0}return!1};g.contains=g.includes=g.include=function(a,b,c,d){v(a)||(a=g.values(a));if("number"!=typeof c||d)c=0;return 0<=g.indexOf(a,b,c)};g.invoke=function(a,b){var c=q.call(arguments,
2),d=g.isFunction(b);return g.map(a,function(a){var x=d?b:a[b];return null==x?x:x.apply(a,c)})};g.pluck=function(a,b){return g.map(a,g.property(b))};g.where=function(a,b){return g.filter(a,g.matcher(b))};g.findWhere=function(a,b){return g.find(a,g.matcher(b))};g.max=function(a,b,c){var d=-Infinity,e=-Infinity,f;if(null==b&&null!=a){a=v(a)?a:g.values(a);for(var h=0,k=a.length;h<k;h++)c=a[h],c>d&&(d=c)}else b=t(b,c),g.each(a,function(a,c,x){f=b(a,c,x);if(f>e||-Infinity===f&&-Infinity===d)d=a,e=f});
return d};g.min=function(a,b,c){var d=Infinity,e=Infinity,f;if(null==b&&null!=a){a=v(a)?a:g.values(a);for(var h=0,k=a.length;h<k;h++)c=a[h],c<d&&(d=c)}else b=t(b,c),g.each(a,function(a,c,x){f=b(a,c,x);if(f<e||Infinity===f&&Infinity===d)d=a,e=f});return d};g.shuffle=function(a){a=v(a)?a:g.values(a);for(var b=a.length,c=Array(b),d=0,e;d<b;d++)e=g.random(0,d),e!==d&&(c[d]=c[e]),c[e]=a[d];return c};g.sample=function(a,b,c){return null==b||c?(v(a)||(a=g.values(a)),a[g.random(a.length-1)]):g.shuffle(a).slice(0,
Math.max(0,b))};g.sortBy=function(a,b,c){b=t(b,c);return g.pluck(g.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var H=function(a){return function(b,c,d){var e={};c=t(c,d);g.each(b,function(d,g){var f=c(d,g,b);a(e,d,f)});return e}};g.groupBy=H(function(a,b,c){g.has(a,c)?a[c].push(b):a[c]=[b]});g.indexBy=H(function(a,b,c){a[c]=b});
g.countBy=H(function(a,b,c){g.has(a,c)?a[c]++:a[c]=1});g.toArray=function(a){return a?g.isArray(a)?q.call(a):v(a)?g.map(a,g.identity):g.values(a):[]};g.size=function(a){return null==a?0:v(a)?a.length:g.keys(a).length};g.partition=function(a,b,c){b=t(b,c);var d=[],e=[];g.each(a,function(a,c,g){(b(a,c,g)?d:e).push(a)});return[d,e]};g.first=g.head=g.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:g.initial(a,a.length-b)};g.initial=function(a,b,c){return q.call(a,0,Math.max(0,a.length-(null==
b||c?1:b)))};g.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.rest(a,Math.max(0,a.length-b))};g.rest=g.tail=g.drop=function(a,b,c){return q.call(a,null==b||c?1:b)};g.compact=function(a){return g.filter(a,g.identity)};var z=function(a,b,c,d){var e=[],f=0;d=d||0;for(var h=y(a);d<h;d++){var k=a[d];if(v(k)&&(g.isArray(k)||g.isArguments(k))){b||(k=z(k,b,c));var l=0,m=k.length;for(e.length+=m;l<m;)e[f++]=k[l++]}else c||(e[f++]=k)}return e};g.flatten=function(a,b){return z(a,b,!1)};
g.without=function(a){return g.difference(a,q.call(arguments,1))};g.uniq=g.unique=function(a,b,c,d){g.isBoolean(b)||(d=c,c=b,b=!1);null!=c&&(c=t(c,d));d=[];for(var e=[],f=0,h=y(a);f<h;f++){var k=a[f],l=c?c(k,f,a):k;b?(f&&e===l||d.push(k),e=l):c?g.contains(e,l)||(e.push(l),d.push(k)):g.contains(d,k)||d.push(k)}return d};g.union=function(){return g.uniq(z(arguments,!0,!0))};g.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=y(a);d<e;d++){var f=a[d];if(!g.contains(b,f)){for(var h=1;h<c&&
g.contains(arguments[h],f);h++);h===c&&b.push(f)}}return b};g.difference=function(a){var b=z(arguments,!0,!0,1);return g.filter(a,function(a){return!g.contains(b,a)})};g.zip=function(){return g.unzip(arguments)};g.unzip=function(a){for(var b=a&&g.max(a,y).length||0,c=Array(b),d=0;d<b;d++)c[d]=g.pluck(a,d);return c};g.object=function(a,b){for(var c={},d=0,e=y(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};g.findIndex=k(1);g.findLastIndex=k(-1);g.sortedIndex=function(a,b,c,d){c=t(c,d,1);b=c(b);
d=0;for(var e=y(a);d<e;){var g=Math.floor((d+e)/2);c(a[g])<b?d=g+1:e=g}return d};g.indexOf=f(1,g.findIndex,g.sortedIndex);g.lastIndexOf=f(-1,g.findLastIndex);g.range=function(a,b,c){null==b&&(b=a||0,a=0);c=c||1;b=Math.max(Math.ceil((b-a)/c),0);for(var d=Array(b),e=0;e<b;e++,a+=c)d[e]=a;return d};var Q=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);b=P(a.prototype);a=a.apply(b,e);return g.isObject(a)?a:b};g.bind=function(a,b){if(F&&a.bind===F)return F.apply(a,q.call(arguments,1));if(!g.isFunction(a))throw new TypeError("Bind must be called on a function");
var c=q.call(arguments,2),d=function(){return Q(a,d,b,this,c.concat(q.call(arguments)))};return d};g.partial=function(a){var b=q.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),h=0;h<e;h++)f[h]=b[h]===g?arguments[d++]:b[h];for(;d<arguments.length;)f.push(arguments[d++]);return Q(a,c,this,this,f)};return c};g.bindAll=function(a){var b,c=arguments.length,d;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)d=arguments[b],a[d]=g.bind(a[d],a);return a};g.memoize=
function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);g.has(e,f)||(e[f]=a.apply(this,arguments));return e[f]};c.cache={};return c};g.delay=function(a,b){var c=q.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};g.defer=g.partial(g.delay,g,1);g.throttle=function(a,b,c){var d,e,f,h=null,k=0;c||(c={});var l=function(){k=!1===c.leading?0:g.now();h=null;f=a.apply(d,e);h||(d=e=null)};return function(){var m=g.now();k||!1!==c.leading||(k=m);var n=b-(m-
k);d=this;e=arguments;0>=n||n>b?(h&&(clearTimeout(h),h=null),k=m,f=a.apply(d,e),h||(d=e=null)):h||!1===c.trailing||(h=setTimeout(l,n));return f}};g.debounce=function(a,b,c){var d,e,f,h,k,l=function(){var m=g.now()-h;m<b&&0<=m?d=setTimeout(l,b-m):(d=null,c||(k=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;h=g.now();var m=c&&!d;d||(d=setTimeout(l,b));m&&(k=a.apply(f,e),f=e=null);return k}};g.wrap=function(a,b){return g.partial(b,a)};g.negate=function(a){return function(){return!a.apply(this,
arguments)}};g.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}};g.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};g.before=function(a,b){var c;return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=null);return c}};g.once=g.partial(g.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),L="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");
g.keys=function(a){if(!g.isObject(a))return[];if(M)return M(a);var b=[],c;for(c in a)g.has(a,c)&&b.push(c);S&&e(a,b);return b};g.allKeys=function(a){if(!g.isObject(a))return[];var b=[],c;for(c in a)b.push(c);S&&e(a,b);return b};g.values=function(a){for(var b=g.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};g.mapObject=function(a,b,c){b=t(b,c);c=g.keys(a);for(var d=c.length,e={},f,h=0;h<d;h++)f=c[h],e[f]=b(a[f],f,a);return e};g.pairs=function(a){for(var b=g.keys(a),c=b.length,d=Array(c),
e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};g.invert=function(a){for(var b={},c=g.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b};g.functions=g.methods=function(a){var b=[],c;for(c in a)g.isFunction(a[c])&&b.push(c);return b.sort()};g.extend=B(g.allKeys);g.extendOwn=g.assign=B(g.keys);g.findKey=function(a,b,c){b=t(b,c);c=g.keys(a);for(var d,e=0,f=c.length;e<f;e++)if(d=c[e],b(a[d],d,a))return d};g.pick=function(a,b,c){var d={},e=a,f,h;if(null==e)return d;g.isFunction(b)?(h=g.allKeys(e),f=A(b,
c)):(h=z(arguments,!1,!1,1),f=function(a,b,c){return b in c},e=Object(e));for(var k=0,l=h.length;k<l;k++){var m=h[k],n=e[m];f(n,m,e)&&(d[m]=n)}return d};g.omit=function(a,b,c){if(g.isFunction(b))b=g.negate(b);else{var d=g.map(z(arguments,!1,!1,1),String);b=function(a,b){return!g.contains(d,b)}}return g.pick(a,b,c)};g.defaults=B(g.allKeys,!0);g.create=function(a,b){var c=P(a);b&&g.extendOwn(c,b);return c};g.clone=function(a){return g.isObject(a)?g.isArray(a)?a.slice():g.extend({},a):a};g.tap=function(a,
b){b(a);return a};g.isMatch=function(a,b){var c=g.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var h=c[f];if(b[h]!==e[h]||!(h in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof g&&(a=a._wrapped);b instanceof g&&(b=b._wrapped);var e=r.call(a);if(e!==r.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===
1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}e="[object Array]"===e;if(!e){if("object"!=typeof a||"object"!=typeof b)return!1;var f=a.constructor,h=b.constructor;if(f!==h&&!(g.isFunction(f)&&f instanceof f&&g.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];d=d||[];for(f=c.length;f--;)if(c[f]===a)return d[f]===b;c.push(a);d.push(b);if(e){f=a.length;if(f!==b.length)return!1;for(;f--;)if(!I(a[f],b[f],c,d))return!1}else{e=g.keys(a);f=e.length;
if(g.keys(b).length!==f)return!1;for(;f--;)if(h=e[f],!g.has(b,h)||!I(a[h],b[h],c,d))return!1}c.pop();d.pop();return!0};g.isEqual=function(a,b){return I(a,b)};g.isEmpty=function(a){return null==a?!0:v(a)&&(g.isArray(a)||g.isString(a)||g.isArguments(a))?0===a.length:0===g.keys(a).length};g.isElement=function(a){return!(!a||1!==a.nodeType)};g.isArray=D||function(a){return"[object Array]"===r.call(a)};g.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};g.each("Arguments Function String Number Date RegExp Error".split(" "),
function(a){g["is"+a]=function(b){return r.call(b)==="[object "+a+"]"}});g.isArguments(arguments)||(g.isArguments=function(a){return g.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(a){return"function"==typeof a||!1});g.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};g.isNaN=function(a){return g.isNumber(a)&&a!==+a};g.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===r.call(a)};g.isNull=function(a){return null===a};g.isUndefined=
function(a){return void 0===a};g.has=function(a,b){return null!=a&&u.call(a,b)};g.noConflict=function(){h._=p;return this};g.identity=function(a){return a};g.constant=function(a){return function(){return a}};g.noop=function(){};g.property=C;g.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};g.matcher=g.matches=function(a){a=g.extendOwn({},a);return function(b){return g.isMatch(b,a)}};g.times=function(a,b,c){var d=Array(Math.max(0,a));b=A(b,c,1);for(c=0;c<a;c++)d[c]=b(c);
return d};g.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};g.now=Date.now||function(){return(new Date).getTime()};D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};B=g.invert(D);C=function(a){var b=function(b){return a[b]},c="(?:"+g.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){a=null==a?"":""+a;return d.test(a)?a.replace(e,b):a}};g.escape=C(D);g.unescape=C(B);g.result=function(a,b,c){b=null==a?void 0:a[b];void 0===
b&&(b=c);return g.isFunction(b)?b.call(a):b};var U=0;g.uniqueId=function(a){var b=++U+"";return a?a+b:b};g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,X=function(a){return"\\"+V[a]};g.template=function(a,b,c){!b&&c&&(b=c);b=g.defaults({},b,g.templateSettings);c=RegExp([(b.escape||J).source,(b.interpolate||J).source,(b.evaluate||
J).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,c,f,g,h){e+=a.slice(d,h).replace(W,X);d=h+b.length;c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?e+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(e+="';\n"+g+"\n__p+='");return b});e+="';\n";b.variable||(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(h){throw h.source=e,h;
}c=function(a){return f.call(this,a,g)};c.source="function("+(b.variable||"obj")+"){\n"+e+"}";return c};g.chain=function(a){a=g(a);a._chain=!0;return a};var K=function(a,b){return a._chain?g(b).chain():b};g.mixin=function(a){g.each(g.functions(a),function(b){var c=g[b]=a[b];g.prototype[b]=function(){var a=[this._wrapped];E.apply(a,arguments);return K(this,c.apply(g,a))}})};g.mixin(g);g.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=l[a];g.prototype[a]=function(){var c=
this._wrapped;b.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||delete c[0];return K(this,c)}});g.each(["concat","join","slice"],function(a){var b=l[a];g.prototype[a]=function(){return K(this,b.apply(this._wrapped,arguments))}});g.prototype.value=function(){return this._wrapped};g.prototype.valueOf=g.prototype.toJSON=g.prototype.value;g.prototype.toString=function(){return""+this._wrapped};!(a=[],b=function(){return g}.apply(n,a),void 0!==b&&(m.exports=b))}).call(this)},function(m,n,c){(function(a){a=
"undefined"===typeof window?a:window;a.$uselessFile="useless.client.js";a._=m.exports=c(3);_.tests={};_.deferTest=_.withTest=function(a,c,k){k()};c(2);c(25);c(21);c(23);c(22);c(28);c(27);c(26);c(24);c(29);c(4);c(19);c(17);c(16);c(18);c(13);c(14);c(6);c(20);c(7);c(10);c(12);c(11);c(9);c(8);c(5);c(15);c(32);c(30);c(31)}).call(n,c(0))}]);
