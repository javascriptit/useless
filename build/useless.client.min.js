var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(h,l,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");h!=Array.prototype&&h!=Object.prototype&&(h[l]=b.value)};$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(h){return $jscomp.SYMBOL_PREFIX+(h||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var h=$jscomp.global.Symbol.iterator;h||(h=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[h]&&$jscomp.defineProperty(Array.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(h){var l=0;return $jscomp.iteratorPrototype(function(){return l<h.length?{done:!1,value:h[l++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(h){$jscomp.initSymbolIterator();h={next:h};h[$jscomp.global.Symbol.iterator]=function(){return this};return h};$jscomp.makeIterator=function(h){$jscomp.initSymbolIterator();var l=h[Symbol.iterator];return l?l.call(h):$jscomp.arrayIterator(h)};
$jscomp.inherits=function(h,l){function b(){}b.prototype=l.prototype;h.prototype=new b;h.prototype.constructor=h;for(var a in l)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(l,a);c&&Object.defineProperty(h,a,c)}else h[a]=l[a]};
(function(h){function l(a){if(b[a])return b[a].exports;var c=b[a]={i:a,l:!1,exports:{}};h[a].call(c.exports,c,c.exports,l);c.l=!0;return c.exports}var b={};l.m=h;l.c=b;l.i=function(a){return a};l.d=function(a,c,b){Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:b})};l.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};l.d(c,"a",c);return c};l.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};l.p="";return l(l.s=37)})([function(h,l){var b;
b=function(){return this}();try{b=b||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(b=window)}h.exports=b},function(h,l,b){h.exports=function(){var a=b(33),c=Function.bind.call(Function.call,Array.prototype.reduce),d=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),e=Function.bind.call(Function.call,Array.prototype.concat);Object.values||(Object.values=function(b){return c(a(b),function(a,c){return e(a,"string"===typeof c&&d(b,c)?[b[c]]:[])},
[])});Object.entries||(Object.entries=function(b){return c(a(b),function(a,c){return e(a,"string"===typeof c&&d(b,c)?[[c,b[c]]]:[])},[])});return Object}()},function(h,l,b){(function(a){("undefined"===typeof window?a:window).Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",e,f,k,m,n,p,h=0;for(a=Base64._utf8_encode(a);h<a.length;)e=a.charCodeAt(h++),f=a.charCodeAt(h++),k=a.charCodeAt(h++),m=e>>2,e=(e&3)<<4|f>>4,n=(f&15)<<2|k>>6,p=k&63,
isNaN(f)?n=p=64:isNaN(k)&&(p=64),b=b+Base64._keyStr.charAt(m)+Base64._keyStr.charAt(e)+Base64._keyStr.charAt(n)+Base64._keyStr.charAt(p);return b},decode:function(a){var b="",e,f,k,m,n,p=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<a.length;)e=Base64._keyStr.indexOf(a.charAt(p++)),f=Base64._keyStr.indexOf(a.charAt(p++)),m=Base64._keyStr.indexOf(a.charAt(p++)),n=Base64._keyStr.indexOf(a.charAt(p++)),e=e<<2|f>>4,f=(f&15)<<4|m>>2,k=(m&3)<<6|n,b+=String.fromCharCode(e),64!=m&&(b+=String.fromCharCode(f)),
64!=n&&(b+=String.fromCharCode(k));return b=Base64._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",e=0;e<a.length;e++){var f=a.charCodeAt(e);128>f?b+=String.fromCharCode(f):(127<f&&2048>f?b+=String.fromCharCode(f>>6|192):(b+=String.fromCharCode(f>>12|224),b+=String.fromCharCode(f>>6&63|128)),b+=String.fromCharCode(f&63|128))}return b},_utf8_decode:function(a){var b="",e=0,f;for(c1=c2=0;e<a.length;)f=a.charCodeAt(e),128>f?(b+=String.fromCharCode(f),e++):191<f&&224>
f?(c2=a.charCodeAt(e+1),b+=String.fromCharCode((f&31)<<6|c2&63),e+=2):(c2=a.charCodeAt(e+1),c3=a.charCodeAt(e+2),b+=String.fromCharCode((f&15)<<12|(c2&63)<<6|c3&63),e+=3);return b}}}).call(l,b(0))},function(h,l,b){var a=h.exports=b(35);a.fromPairs=a.object;a.mapValues=a.mapObject;a.zipWith=function(c,b){return a.reduce(c.slice(1),function(c,f){return a.times(Math.max(c&&c.length||0,f&&f.length||0),function(a){return b(c&&c[a],f&&f[a])})},c[0])};if("a1 b2 c3"!==a.zipWith([["a","b","c"],[1,2,3]],function(a,
b){return a+b}).join(" "))throw Error("_.zipWith broken");},function(h,l){_.cps=function(){return _.cps.sequence.apply(null,arguments)};_.cps.apply=function(b,a,c,d){c=_.asArray(c);var e=_.numArgs(b)-1,f=c[e];c[e]=function(){d.call(this,arguments,f)};return b.apply(a,c)};_.extend(_.cps,{each:function a(c,d,e,f,k,m){var n=e||_.noop,p=function(a,e,f){2===_.numArgs(d)?d(a,f,n,c):d(a,e,f,n,c)};if(_.isEmpty(c))n();else if(_.isScalar(c))p(c,void 0,n);else if(f=f||0,m=0===f?void 0===c.length?_.keys(c):void 0:
m,k=0===f?m?m.length:c.length:k,f>=(k||0))n();else{var h=m?m[f]:f;p(c[h],h,a.bind(this,c,d,e,f+1,k,m))}}});_.extend(_.cps,{map:function(a,c,d){var e=_.isArray(a)?[]:{};_.cps.each(a,2==_.numArgs(c)?function(a,d,m){c(a,function(a){e[d]=a;m()})}:function(a,d,m){c(a,d,function(a){e[d]=a;m()})},function(){d(e)})}});_.extend(_.cps,{find:function(a,c,d){var e=2!==_.numArgs(c);_.cps.each(a,function(a,d,m,n){var p=function(c){!1===c?m():n(!0===c?a:c,d)};e?c(a,d,p):c(a,p)},d)}});_.extend(_.cps,{memoize:function(a){return _.barrier?
_.cps._betterMemoize(a):_.cps._poorMemoize(a)},_poorMemoize:function(a){var c={};return function(d,e){d in c?e(c[d]):a.call(this,d,function(a){e(c[d]=a)})}},_betterMemoize:function(a){var c={};switch(_.numArgs(a)){case 1:return function(d){c.already||a.call(this,c=_.barrier());c(d)};case 2:return c={},function(d,e){d in c||a.call(this,d,c[d]=_.barrier());c[d](e)};default:throw Error("_.cps.memoize: unsupported number of arguments");}}});(function(){var a=function(c,d,e,f,k){!c||k>=(c.length||0)?e(f):
d(f,c[k],function(f){a(c,d,e,f,k+1)})};_.cps.reduce=function(c,d,e,f){4>arguments.length?a(c,d,e,c[0],1):a(c,d,e,f,0)}})();_.extend(_.cps,{noop:$restArg(function(){return _.last(arguments).call(this)}),identity:$restArg(function(){var a=_.initial(arguments),c=_.last(arguments);if(c)return c.apply(this,a)}),constant:$restArg(function(){var a=arguments;return function(){return _.last(arguments).apply(this,a)}})});_.cps.arity0=function(a){return function(){a.call(this,_.last(arguments))}};_.cps.arity1=
function(a){return function(){a.call(this,arguments[0],_.last(arguments))}};_.cps.arity2=function(a){return function(){a.call(this,arguments[0],arguments[1],_.last(arguments))}};_.cps.transformResult=function(a,c){return function(d){c.apply(this,_.initial(arguments).concat(a(_.last(arguments))))}};_.cps.resultArity2=_.partial(_.cps.transformResult,_.arity2);_.cps.resultArity1=_.partial(_.cps.transformResult,_.arity1);_.cps.resultArity0=_.partial(_.cps.transformResult,_.arity0);_.cps.sequence=$restArg(function(a){var c=
_.isArray(a)&&a||_.asArray(arguments);return _.reduceRight(c,function(a,c){return function(){return c.apply(this,_.asArray(arguments).concat(a))}},_.cps.identity)});_.cps.compose=$restArg(function(a){var c=_.isArray(a)&&a||_.asArray(arguments);return _.cps.sequence(c.slice().reverse())});_.cps.trySequence=function(a,c,d){_.reduceRight(a,function(a,f){return function(k){if(_.isTypeOf(Error,k))return(d||c)(k);try{return f.apply(this,_.asArray(arguments).concat(a))}catch(m){return(d||c)(m)}}},c)()}},
function(h,l){$global.Channel=$extends(Promise,{constructor:function(b,a,c){this.after=[];this.state="pending";this.value=void 0;this.transducers={resolve:a&&a.resolve||function(a){return a},reject:a&&a.reject||function(a){throw a;}};if(b instanceof Function)try{b.call(this,this.$(this.resolve),this.$(this.reject))}catch(d){this.reject(d)}else void 0!==b&&this.resolve(b)},_resolve:function(b){this.state="resolved";this.value=b;this.after.forEach(function(a){return a.resolve(b)})},_reject:function(b){this.state=
"rejected";this.value=b;this.after.forEach(function(a){return a.reject(b)})},resolve:function(b,a){var c=this;try{b=(a||this.transducers.resolve)(b),b instanceof Promise?b.then(function(a){return c._resolve(a)},function(a){return c._reject(a)}):this._resolve(b)}catch(d){this._reject(d)}return this},reject:function(b){return this.resolve(b,this.transducers.reject)},then:function(b,a){var c=new Channel(void 0,{resolve:b,reject:a},this);this.after.push(c);"resolved"===this.state?c.resolve(this.value):
"rejected"===this.state&&c.reject(this.value);return c},"catch":function(b){return this.then(void 0,b)}});Channel.all=function(b){return new Channel(function(a){var c=new Set,d=Array(b.length);b.forEach(function(b,f){b.then(function(b){d[f]=b;c.length===d.length?a(d):c.add(f)})})})};Channel.resolve=function(b){return new Channel(function(a){return a(b)})};Channel.reject=function(b){return new Channel(function(a,c){return c(b)})};$prototype.macroTag("channel",function(b,a,c){var d="_"+c,e=$untag(a);
b[c]=Tags.modify(a,function(){return $property({get:function(){return this[d]||(this[d]=new Channel(e))},set:function(a){this[c].resolve(a)}})})})},function(h,l){_.hasOOP=!0;_("property static final alias memoized private builtin hidden testArguments".split(" ")).each(Tags.define);_.extend($global,{$prototype:function(b,a){return $prototype.impl.compile.apply($prototype.impl,1<arguments.length?_.asArray(arguments).reverse():arguments)},$extends:function(b,a){return $prototype(b,a||{})},$mixin:function(b,
a){return $prototype.impl.compileMixin(_.extend(a,{constructor:b}))}});_.extend($prototype,{isConstructor:function(b){return _.isPrototypeConstructor(b)},macro:function(b,a){1===arguments.length?$prototype.impl.alwaysTriggeredMacros.push(b):$prototype.impl.memberNameTriggeredMacros[b]=a},macroTag:function(b,a){Tags.define(b);$prototype.impl.tagTriggeredMacros["$"+b]=a},each:function(b){var a=$global,c;for(c in a)if("$"!==c[0]){var d=a[c];$prototype.isConstructor(d)&&b(d,c)}},defines:function(b,a){return _.find($prototype.inheritanceChain(b),
function(c){return c.$definition&&c.$definition.hasOwnProperty(a)||!1})?!0:!1},inheritanceChain:function(b){for(var a=[];b;)a.push(b),b=b.$base&&b.$base.constructor;return a},wrapMethods:function(b,a){return Tags.map(b,function(c,b,e){return _.isFunction(c)?a(c,b,e).wraps(c):c})},impl:{alwaysTriggeredMacros:[],memberNameTriggeredMacros:{},tagTriggeredMacros:{},compile:function(b,a){var c=a&&a.$impl||this;return $untag(c.sequence(b,a).call(c,b||{}).constructor)},sequence:function(b,a){return _.sequence(this.convertPropertyAccessors,
this.extendWithTags,this.flatten,this.generateCustomCompilerImpl(a),this.ensureFinalContracts(a),this.generateConstructor(a),this.evalAlwaysTriggeredMacros(a),this.evalMemberTriggeredMacros(a),this.contributeTraits(a),this.evalPrototypeSpecificMacros(a),this.generateBuiltInMembers(a),this.callStaticConstructor,this.expandAliases,this.groupMembersByTagForFastEnumeration,this.defineStaticMembers,this.defineInstanceMembers)},compileMixin:function(b){return _.sequence(this.convertPropertyAccessors,this.flatten,
this.contributeTraits(),this.expandAliases,this.evalMemberTriggeredMacros(),this.defineStaticMembers,this.defineInstanceMembers).call(this,b||{}).constructor},convertPropertyAccessors:function(b){for(var a=$jscomp.makeIterator(Object.getOwnPropertyNames(b)),c=a.next();!c.done;c=a.next()){var c=c.value,d=Object.getOwnPropertyDescriptor(b,c);(d.get instanceof Function||d.set instanceof Function)&&Object.defineProperty(b,c,{value:$property(d)})}return b},flatten:function(b){var a=_.pick(b,this.isTagGroup),
a=_.object(_.flatten(_.map(a,function(a,b){return _.map(this.flatten(this.convertPropertyAccessors(a)),function(a,c){return[c,$global[b](a)]})},this),!0));b=_.omit(b,this.isTagGroup);return _.extend(b,a)},evalAlwaysTriggeredMacros:function(b){return function(a){for(var c=$prototype.impl.alwaysTriggeredMacros,d=0,e=c.length;d<e;d++)a=c[d](a,b)||a;return a}},evalMemberTriggeredMacros:function(b){return function(a){var c=$prototype.impl.memberNameTriggeredMacros,d=$prototype.impl.tagTriggeredMacros;
_.each(a,function(e,f){c.hasOwnProperty(f)&&(a=c[f](a,e,f,b)||a);_.each(_.keys(e),function(c){d.hasOwnProperty(c)&&(a=d[c](a,e,f,b)||a)})});return a}},evalPrototypeSpecificMacros:function(b){return function(a){if(!a.isTraitOf){var c=$untag(a.$macroTags||b&&b.$definition&&b.$definition.$macroTags);c&&this.applyMacroTags(c,a)}return a}},applyMacroTags:function(b,a){_.each(a,function(c,d){_.each(b,function(b,f){c=a[d];_.isObject(c)&&"$"+f in c&&(a[d]=b.call(a,a,c,d)||c)},this)},this);return a},generateCustomCompilerImpl:function(b){return function(a){a.$impl?
(a.$impl=_.extend(Object.create(b&&b.$impl||this),a.$impl),a.$impl=$static($builtin($property(a.$impl)))):b&&b.$impl&&(a.$impl=$static($builtin($property(b.$impl))));return a}},contributeTraits:function(b){return function(a){if(a.$traits){var c=a.$traits;this.mergeTraitsMembers(a,c,b);a.$traits=$static($builtin($property(c)));a.hasTrait=$static($builtin(function(a){return 0<=c.indexOf(a)}))}return a}},mergeTraitsMembers:function(b,a,c){_.each(a,function(a){_.defaults(b,_.omit(a.$definition,_.or($builtin.matches,
_.key(_.equals("constructor")))))})},extendWithTags:function(b){return _.extendWith($untag(b),_.mapValues(Tags.get(b),$static.arity1))},callStaticConstructor:function(b){b.isTraitOf||(_.each($untag(b.$traits),function(a){a.$definition.$constructor&&$untag(a.$definition.$constructor).call(b)}),b.$constructor&&$untag(b.$constructor).call(b));return b},generateConstructor:function(b){return function(a){return _.extend(a,{constructor:Tags.modify(a.hasOwnProperty("constructor")?a.constructor:this.defaultConstructor(b),
function(a){b&&(a.prototype=Object.create(b.prototype),a.prototype.constructor=a);return a})})}},generateBuiltInMembers:function(b){return function(a){a.$constructor&&(a.$constructor=$builtin($static(a.$constructor)));return _.defaults(a,{$base:$builtin($static($property(_.constant(b&&b.prototype)))),$definition:$builtin($static($property(_.constant(_.extend({},b&&b.$definition,a))))),isTypeOf:$builtin($static(_.partial(_.isTypeOf,$untag(a.constructor)))),isInstanceOf:$builtin(function(a){return _.isTypeOf(a,
this)}),$:$builtin($prototype.impl.$)})}},$:function(b){return _.$.apply(null,[this].concat(_.asArray(arguments)))},defaultConstructor:function(b){return b?function(){b.prototype.constructor.apply(this,arguments)}:function(a){_.extend(this,a||{})}},defineStaticMembers:function(b){this.defineMembers($untag(b.constructor),_.pick(b,$static.matches));return b},defineInstanceMembers:function(b){this.defineMembers($untag(b.constructor).prototype,_.omit(b,$static.matches));return b},defineMembers:function(b,
a){_.each(a,function(c,d){"constructor"!==d&&a.hasOwnProperty(d)&&this.defineMember(b,c,d)},this)},defineMember:function(b,a,c){a&&a.$property?a.$memoized?_.defineMemoizedProperty(b,c,a):_.defineProperty(b,c,a,a.$hidden?{enumerable:!1}:{}):(a=$untag(a),b[c]=a)},ensureFinalContracts:function(b){return function(a){if(b){if(b.$final)throw Error("Cannot derive from $final-marked prototype");if(b.$definition){var c=_.intersection(_.keys(_.pick(b.$definition,$final.matches)),_.keys(a));if(c.length)throw Error("Cannot override $final "+
c.join(", "));}}return a}},expandAliases:function(b){_.each(b,function(a,c){b[c]=this.resolveMember(b,c,a)[1]},this);return b},resolveMember:function(b,a,c){c=c||b[a];if($alias.is(c)){b=this.resolveMember(b,$untag(c));var d=b[0];b=b[1];return[d,$property.is(c)?$property({get:function(){return this[d]},set:function(a){this[d]=a}}):Tags.extend(b,Tags.omit(c,"$alias"))]}return[a,c]},groupMembersByTagForFastEnumeration:function(b){var a={};_.each(b,function(c,b){Tags.each(c,function(e){(a[e]=a[e]||{})[b]=
c})});b.$membersByTag=$static($builtin($property(a)));return b},isTagGroup:function(b,a){var c=$untag(b);return"$"===a[0]&&_.isFunction($global[a])&&"object"===typeof c&&!_.isArray(c)},modifyMember:function(b,a){return $property.is(b)&&Tags.modify(b,function(c){return _.extend(c,_.map2(_.pick(c,"get","set"),a))})||_.isFunction($untag(b))&&Tags.modify(b,a)||b}}});_.isTraitOf=function(b,a){var c=a&&a.constructor;return c&&c.hasTrait&&c.hasTrait(b)||!1};_.isTypeOf=_.or(_.isTypeOf,_.isTraitOf);$global.$trait=
function(b,a){var c=void 0,d=_.extend(1<arguments.length?a:b,{constructor:_.throwsError("Traits are not instantiable (what for?)"),isTraitOf:$static($builtin(function(a){return _.isTraitOf(c,a)}))});return c=$prototype.impl.compile(d,1<arguments.length?b:a)};$prototype.macro("$macroTags",function(b,a,c){_.each($untag(a),function(a,c){Tags.define(c)})});_.$=function(b,a,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];return d.length?_.bind.apply(void 0,[a,b].concat(d)):_.withSameArgs(a,
function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];return a.apply(b,d)})};$global.$const=function(b){return $static($property(b))};Tags.define("callableAsFreeFunction");$prototype.macroTag("callableAsFreeFunction",function(b,a,c){b.constructor[c]=$untag(a).asFreeFunction;return b});Tags.define("callableAsMethod");$prototype.macroTag("callableAsMethod",function(b,a,c){b[c]=Tags.modify(a,_.asMethod);b.constructor[c]=$untag(a);return b});$global.$singleton=function(b,a){return new ($prototype.apply(null,
arguments))}},function(h,l){$global.Parse={keyCodeAsString:function(b){return String.fromCharCode(96<=b&&105>=b?b-48:b)},fileName:function(b){return _.last(b.split(/\\|\//)).split(".")[0]}}},function(h,l){$global.TimeoutError=function(){Error.call(this,"timeout expired")};$jscomp.inherits($global.TimeoutError,Error);$global.TimeoutError.captureStackTrace=Error.captureStackTrace;$global.__=Promise.eval=function(b,a){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];var e=this;return b instanceof
Promise?b:b instanceof Function?new Promise(function(a){a(b.apply(e,c))}):Promise.resolve(b)};Promise.coerce=function(b){return b instanceof Promise?b:Promise.resolve(b)};__.noop=function(){return Promise.resolve()};__.eternity=new Promise(function(){});__.identity=function(b){return Promise.resolve(b)};__.constant=function(b){return function(){return Promise.resolve(b)}};__.reject=function(b){return Promise.reject(b)};__.rejects=function(b){return function(){return Promise.reject(b)}};__.then=function(b,
a){a=_.coerceToFunction(a);try{var c=b instanceof Function?b():b;return c instanceof Promise?c.then(a):a(c)}catch(d){return Promise.reject(d)}};__.delay=function(b){return __.delays(b)()};__.delays=function(b){return function(a){return new Promise(function(c){setTimeout(function(){c(a)},b||0)})}};$mixin(Promise,{delay:function(b){return this.then(__.delays(b))},timeout:function(b){return this.race(__.delay(b).reject(new TimeoutError))},now:$property(function(){return this.timeout(0)})});$mixin(Array,
{race:$property(function(){return Promise.race(this)})});$mixin(Promise,{race:function(b){return[this,b].race},firstResolved:$static(function(b){return new Promise(function(a,c){var d=b&&b.length;d?_.each(b,function(b){Promise.coerce(b).then(function(c){d--;a&&(a(c),a=void 0)})["catch"](function(){d--;d||c(null)})}):c(null)})}),reject:function(b){return this.then(_.throwsError(b))},chain:function(b){return this.then(function(a){b(a);return a})},done:function(b){return this.then(function(a){b(null,
a);return a},function(a){b(a,null);throw a;})},"finally":function(b){return this.then(function(a){return b(null,a)},function(a){return b(a,null)})},$callableAsFreeFunction:{$property:{reflect:function(){return this.then(function(b){return b},function(b){return b})}}},log:$property(function(){return this.then(log,log.then(_.throwsError))}),alert:$property(function(){return this.done(alert2,alert2.then(_.throwsError))}),panic:$property(function(){return this["catch"](function(b){_.globalUncaughtExceptionHandler&&
_.globalUncaughtExceptionHandler(b);throw b;})}),assert:function(b){return this.then(function(a){$assert(a,b);return a})},assertTypeMatches:function(b){return this.then(function(a){$assertTypeMatches(a,b);return a})},assertRejected:function(b){var a=0<arguments.length;return this["catch"](function(c){a&&$assert(c,b);return c})}});$global.TaskPool=$prototype({constructor:function(b){this.maxTime=b&&b.maxTime;this.pending=[];if(this.maxConcurrency=b&&b.maxConcurrency)this.numActive=0,this.queue=[]},
run:function(b){var a=this;if(this.numActive>=this.maxConcurrency)return new Promise(function(c){a.queue.push(function(){return a.run(b).then(c)})});var c=__(b);void 0!==this.maxTime&&(c=c.timeout(this.maxTime));void 0!==this.maxConcurrency&&(a.numActive++,c=c.then(function(c){a.numActive--;return a.queue.length&&a.numActive<a.maxConcurrency?a.queue.shift()().then(_.constant(c)):c}));this.pending.push(c);return c},all:$property(function(){return Promise.all(this.pending)})});__.scatter=function(b,
a,c){return __.then(b,function(b){if(_.isStrictlyObject(b)){var e=_.coerceToEmpty(b),f=new TaskPool(c);_.each2(b,function(c,m){f.run(a.$(c,m,b)).then(function(a){a&&(e[a[1]]=a[0])})});return f.all.then(_.constant(e))}return __(a,b,void 0,b).then(function(a){return a[0]})})};__.map=function(b,a,c){return __.scatter(b,function(c,b,f){return __.then(a.$(c,b,f),function(a){return[a,b]})},c)};__.filter=function(b,a,c){return __.scatter(b,function(c,b,f){return __.then(a.$(c,b,f),function(a){return!1===
a?void 0:!0===a?[c,b]:[a,b]})},c)};__.each=function(b,a){return __.then(b,function(c){return new Promise(function(b,e){_.cps.each(c,function(c,b,d){Promise.coerce(a(c,b)).then(d)["catch"](e)},b)})})};__.seq=function(b){return _.reduce2(b,__.then)};__.all=function(b){return Promise.all(_.map(b,__))};__.race=function(b){return Promise.race(_.map(b,__))};$mixin(Function,{promisifyAll:$static(function(b,a){a=a||{};var c=a.except||_.noop;c instanceof Array&&(c=c.asSet.matches);var d={},e;for(e in b){var f=
b[e];f instanceof Function?(f=f.bind(b),d[e]=c(e)?f:f.promisify):d[e]=f}return d}),promisify:$hidden($property(function(){var b=this;return function(){var a=this,c=arguments;return new Promise(function(d,e){b.apply(a,_.asArray(c).concat(function(a,c){a&&e(a);d(c)}))})}}))})},function(h,l){$global.R=$singleton({$test:function(){var b=function(a,b){$assert(a,_.quote(b.str,"//"))};b("/[^\\s]*/",$r.anyOf.except.space.$);b("/\\[.*\\]|[\\s]/",$r.anything.inBrackets.or.oneOf.space.$);var a=$r.expr("before",
$r.anything.text("$print").something).then($r.expr("argument",$r.someOf.except.text(",)")).inParentheses.then($r.expr("tail",$r.anything))).$;b("/(.*\\$print.+)\\(([^,\\)]+)\\)(.*)/",a);$assert(a.parse(" var x = $print (blabla) // lalala "),{before:" var x = $print ",argument:"blabla",tail:" // lalala "});$assert([["[^","\\s","]"],"*"],R.anyOf(R.except(R.space)))},constructor:function(){this.reduce=_.hyperOperator(_.binary,_.reduce2,_.goDeeperAlwaysIfPossible,_.isNonTrivial.and(_.not(this.isSubexpr)));
this.initDSL()},expr:function(b,a){a=a||[];return new R.Expr(R.reduce("",b,function(c,b){return R.isSubexpr(b)?(a.push(b),c+R.expr(R.root(b.value),a).str):c+b}),a)},Expr:$prototype({constructor:function(b,a){this.rx=RegExp();this.rx.compile(b);this.str=b;this.subexprs=a},parse:function(b){return(b=b.match(this.rx))&&_.extend.apply(null,_.zipWith([b.slice(1),this.subexprs],function(a,c){return _.fromPairs([[c.name,a]])}))||{}}}),escape:function(b){return _.map(b,function(a){return R.metacharacters[a]?
"\\"+a:a}).join("")},text:$alias("escape"),subexpr:function(b,a){return{name:b,value:["(",a,")"]}},maybe:function(b){return[b,"?"]},anyOf:function(b){return[b,"*"]},someOf:function(b){return[b,"+"]},oneOf:function(b){return["[",b,"]"]},except:function(b){return["[^",b,"]"]},or:function(b,a){return[b,"|",a]},$property:{metacharacters:_.index("\\^$.|?*+()[{"),begin:"^",end:"$",space:"\\s",maybeSpaces:"\\s*",spaces:"\\s+",anything:".*",something:".+",comma:","},parentheses:function(b){return["\\(",b,
"\\)"]},brackets:function(b){return["\\[",b,"\\]"]},isSubexpr:function(b){return _.isStrictlyObject(b)&&!_.isArray(b)?!0:!1},root:function(b){return b&&b.$$?b.$$:b},initDSL:function(){$global.property("$r",function(){return $$r([])});$global["const"]("$$r",function(b){var a=_.defineHiddenProperty;a(b,"then",function(a){b.push(R.root(a));return b});a(b,"text",function(a){b.push(R.text(a));return b});a(b,"expr",function(a,d){b.push(R.subexpr(a,R.root(d)));return b});a(b,"forward",function(){return b.next||
((b.next=$r).prev=b).next});_.each(["maybe","anyOf","someOf","oneOf","except"],function(c){a(b,c,function(){return b.push(R[c](b.forward)),b.forward})});_.each(["parentheses","brackets"],function(c){return a(b,"in"+c.capitalized,function(){return b.$$.prev=$$r(R[c](b.$$))})});_.each(["or"],function(c){return a(b,c,function(){var a=$r;return(a.prev=b.$$.prev=$$r(R[c](b.$$,a))).next=a})});_.each(["begin","end","space","anything","something"],function(c){return a(b,c,function(){return b.push([R[c],b.forward]),
b.forward})});a(b,"$$",function(){for(var a=b;a.prev;)a=a.prev;return a});a(b,"$",function(){return R.expr(b.$$)});return b})}})},function(h,l){$global.Sort={Ascending:1,Descending:-1,strings:function(b,a){b=$.trim(b).toLowerCase();a=$.trim(a).toLowerCase();return 0==b.length&&0<a.length?1:0<b.length&&0==a.length?-1:b==a?0:b<a?-1:1},numbers:function(b,a){return isNaN(b)&&isNaN(a)?0:isNaN(b)?-1:isNaN(a)?1:b<a?-1:b>a?1:0},generic:function(b,a){return b||a?b?a?b<a?-1:b>a?1:0:1:-1:0},inverse:function(b){return function(a,
c){return-b(a,c)}},field:function(b,a,c){return function(d,e){return a(d[b],e[b])*c}}}},function(h,l){$global.$component=function(b){return $extends(Component,b)};_("extendable trigger triggerOnce barrier bindable memoize interlocked memoizeCPS debounce throttle overrideThis listener postpones reference raw binds observes".split(" ")).each(Tags.define);(function(){var b=function(a){return function(c,b){return _.isFunction(c)&&1===arguments.length?a(c,b):a(b,c)}};Tags.define("observableProperty",b);
Tags.define("observable",b)})();$global.$observableRef=function(b){return $observableProperty($reference(b))};$prototype.macro("$depends",function(b,a,c){b.$depends=$builtin($const(_.coerceToArray(a)));return b});$prototype.macroTag("extendable",function(b,a,c){b[c]=$builtin($const(a));return b});$global.Component=$prototype({$defaults:$extendable({}),$requires:$extendable({}),$macroTags:$extendable({}),$impl:{sequence:function(b,a){return _.sequence(this.convertPropertyAccessors,this.extendWithTags,
this.flatten,this.generateCustomCompilerImpl(a),this.ensureFinalContracts(a),this.generateConstructor(a),this.evalAlwaysTriggeredMacros(a),this.evalMemberTriggeredMacros(a),this.expandTraitsDependencies,this.mergeExtendables(a),this.contributeTraits(a),this.mergeStreams,this.mergeBindables,this.generateBuiltInMembers(a),this.callStaticConstructor,this.expandAliases,this.groupMembersByTagForFastEnumeration,this.defineStaticMembers,this.defineInstanceMembers)},expandTraitsDependencies:function(b){_.isNonempty($untag(b.$depends))&&
_.isEmpty($untag(b.$traits))&&(b.$traits=DAG.sortedSubgraphOf(b,{nodes:function(a){return $untag(a.$depends)}}));return b},mergeExtendables:function(b){return function(a){_.each(b.$definition,function(c,b){c&&c.$extendable&&(a[b]=Tags.modify(c,function(c){c=_.extendedDeep(c,$untag(a[b]||{}));_.each($untag(a.$traits),function(f){if(!f)throw log.e(a.$traits),Error("invalid $traits value");(f=f.$definition[b])&&(c=_.extendedDeep($untag(f),c))});return c}))});return a}},mergeTraitsMembers:function(b,
a){var c={},d={},e={},f=$untag(b.$macroTags),k=_.pluck(a,"$definition").concat(_.clone(b));_.each(k,function(a){_.each(f&&this.applyMacroTags(f,_.extend(_.clone(a),{constructor:b.constructor}))||a,function(a,f){$builtin.isNot(a)&&$builtin.isNot(b[f])&&"constructor"!==f&&($bindable.is(a)&&(d[f]=a),Component.isStreamDefinition(a)&&(e[f]=a),(c[f]||(c[f]=[])).push(a),b[f]=a)})},this);b.__bindables=d;b.__streams=e;b.__membersByName=c},mergeStreams:function(b){var a=b.__membersByName;_.each(b.__streams,
function(c,d){var e=b[d]=Tags.clone(c);e.listeners=[];_.each(a[d],function(a){a!==c&&e.listeners.push($untag(a))})});return b},mergeBindables:function(b){var a=b.__membersByName;_.each(b.__bindables,function(c,d){var e=_.filter2(_.bindable.hooks,function(c,b){var e=a[_.bindable.hooksShort[b]+d.capitalized];return e?[c,e]:!1});if(e.length){var f={};_.each(e,function(a){_.each(a[1],function(c){c=$untag(c);if(_.isFunction(c)){var b="_"+a[0];(f[b]||(f[b]=[])).push(c)}})});b[d]=$bindable({hooks:f},Tags.clone(c))}},
this);return b}},isStreamDefinition:$static(function(b){return _.isObject(b)&&(b.$trigger||b.$triggerOnce||b.$barrier||b.$observable||b.$observableProperty)}),mapMethods:function(){var b=_.last(arguments),a=1===arguments.length?_.constant(!0):arguments[0],c;for(c in this){var d=this.constructor.$definition[c];if(!d||!d.$property){var e=this[c];_.isFunction(e)&&!_.isPrototypeConstructor(e)&&a(d)&&(this[c]=b.call(this,e,c,d)||e)}}},enumMethods:function(b,a){2===arguments.length?this.mapMethods(b,a.returns(void 0)):
this.mapMethods(b.returns(void 0))},constructor:$final(function(b,a){this.parent_=void 0;this.children_=[];var c=this.cfg="object"===typeof b?b:{},d=this.constructor.$definition;this.constructor.$defaults&&(c=this.cfg=_.extend(_.cloneDeep(this.constructor.$defaults),c));this.mapMethods(function(a,c,b){if(!("$"===c||"init"===c||b&&b.$raw))return this.$(a)});_.onBefore(this,"destroy",this._beforeDestroy);_.onAfter(this,"destroy",this._afterDestroy);var e=[],f={init:!0};_.each(d,function(a,b){if(void 0!==
a){if(a.$observableProperty){var d=a.subject,p=b in c?c[b]:d,h=b+"Change",l=f[h]=this[h]=_.observable();l.context=this;l.postpones=a.$postpones;if(_.isPrototypeInstance(d)){var q=d.constructor;l.beforeWrite=function(a){return q.isTypeOf(a)?a:new q(a)}}a.$reference&&(l.trackReference=!0);_.defineProperty(this,b,{get:function(){return l.value},set:function(a){l.write.call(this,a)}});a.listeners&&_.each(a.listeners,function(a){e.push([l,a])});_.isFunction(a.$observableProperty)&&e.push([l,a.$observableProperty]);
void 0!==p&&l(p)}else if(Component.isStreamDefinition(a)){var t=f[b]=this[b]=_.extend((a.$trigger?_.trigger:a.$triggerOnce?_.triggerOnce:a.$observable?_.observable:a.$barrier?_.barrier:void 0)(a.subject),{context:this,postpones:a.$postpones});a.$reference&&(l.trackReference=!0);a.listeners&&_.each(a.listeners,function(a){e.push([t,a])});_.isFunction(a.$observable)&&e.push([t,a.$observable]);(d=c[b])&&(a.$observable&&d.isObservable?d.tie(t):e.push([t,d]))}a.$listener&&(this[b].queuedBy=[]);a.$interlocked&&
(this[b]=_.interlocked(this[b]));a.$bindable&&(this[b]=_.extend(_.bindable(this[b],this),_.map2(a.$bindable.hooks||{},_.mapsWith(this.$.bind(this).arity1))));a.$debounce&&(d=this[b],p=_.coerceToObject(a.$debounce),this[b]=d.debounced(p.wait||500,p.immediate));a.$throttle&&(d=this[b],p=_.coerceToObject(a.$throttle),this[b]=_.throttle(d,p.wait||500,p));a.$memoize?this[b]=_.memoize(this[b]):a.$memoizeCPS&&(this[b]=_.cps.memoize(this[b]))}},this);this.init=this._beforeInit.then(this.init.then(this._afterInit)).bind(this);
_.each(c,function(a,c){c in f||(this[c]=_.isFunction(a)?this.$(a):a)},this);_.each(d,function(a,c){a&&a.$alias&&!a.$raw&&(this[c]=this[$untag(a)])},this);_.hasAsserts&&_.each(this.constructor.$requires,function(a,c){$assertTypeMatches(_.fromPairs([[c,this[c]]]),_.fromPairs([[c,a]]))},this);_.each(e,function(a){a[0].call(this,a[1])},this);!1===c.init||this.constructor.$defaults&&!1===this.constructor.$defaults.init||(d=this.init(),d instanceof Promise&&d.panic)}),callChainMethod:function(b){var a=
this;return __.seq(_.filter2(this.constructor.$traits||[],function(c){return(c=c.prototype[b])&&c.bind(a)||!1}))},_beforeInit:function(){if(this.initialized.already)throw Error("Component: I am already initialized. Probably you're doing it wrong.");return this.callChainMethod("beforeInit")},init:function(){},_afterInit:function(){var b=this.cfg,a=this;return __.then(this.callChainMethod.$("afterInit"),function(){a.initialized(!0);a.alive(!0);_.each(a.constructor.$definition,function(c,d){if(c&&c.$observableProperty){d+=
"Change";var e=b[d];if(e)a[d](e)}});return!0})},initialized:$barrier(),alive:$observable(!1),_beforeDestroy:function(){if(this.destroyed_)throw Error("Component: I am already destroyed. Probably you're doing it wrong.");if(this.destroying_)throw Error("Component: Recursive destroy() call detected. Probably you're doing it wrong.");this.destroying_=!0;_.each(this.constructor.$traits,function(b){b.prototype.beforeDestroy&&b.prototype.beforeDestroy.call(this)},this);this.alive(!1);this.enumMethods(_.off.arity1);
_.each(this.children_,_.method("destroy"));this.children_=[]},destroy:function(){},_afterDestroy:function(){_.each(this.constructor.$traits,function(b){b.prototype.destroy&&b.prototype.destroy.call(this);b.prototype.afterDestroy&&b.prototype.afterDestroy.call(this)},this);delete this.destroying_;this.parent_=void 0;this.destroyed_=!0},attachedTo:$property(function(){return this.parent_}),attachTo:function(b){if(b===this)throw Error("smells like time-travel paradox.. how else can I be parent of myself?");
this.parent_!==b&&(void 0!==this.parent_&&this.parent_.children_.remove(this),void 0!==(this.parent_=b)&&this.parent_.children_.push(this));return this},detach:function(){return this.attachTo(void 0)},attached:$property(function(){return this.children_}),attach:function(b){_.invoke(_.coerceToArray(b),"attachTo",this);return this},detachAll:function(){_.each(this.children_,function(b){b.parent_=void 0});this.children_=[];return this},destroyAll:function(){_.each(this.children_,function(b){b.parent_=
void 0;b.destroy()});this.children_=[];return this}})},function(h,l){$global.Lock=function(){};$global.Lock.prototype.acquire=function(b){var a=this;this.wait(function(){a.waitQueue||(a.waitQueue=[]);b()})};$global.Lock.prototype.acquired=function(){return void 0!==this.waitQueue};$global.Lock.prototype.wait=function(b){this.acquired()?this.waitQueue.push(b):b()};$global.Lock.prototype.release=function(){if(this.waitQueue.length){var b=this.waitQueue[0];this.waitQueue=this.waitQueue.slice(1);b()}else delete this.waitQueue};
_.interlocked=function(b){var a=new Lock;b=$untag(b);return _.extendWith({lock:a,wait:a.wait.bind(a)},function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];var f=this;return new Promise(function(c){a.acquire(function(){__.then(b.apply(f,d),function(b){a.release();c(b)})})})})};$global.$scope=function(b){var a=void 0;return _.argumentPrependingWrapper(Tags.unwrap(b),function(c){var b={when:void 0};(a=a||[]).push(b);c(function(c){if(b.when)throw Error("$scope: release called twice");
for(b.when=c;a&&a.last&&a.last.when;)c=a.last.when,(a=_.initial(a)).isEmpty&&(a=void 0),c()})})}},function(h,l){(function(){var b=["onceBefore","onceAfter","onBefore","onAfter","intercept"],a=function(a,d){if("function"!==typeof a)throw Error("method should be a function");return _.extend({},a,{_bindable:!0,impl:a,_wrapped:a,context:d,off:function(a){_.each(b,function(c){a?this["_"+c].remove(a):this["_"+c].removeAll()},this);return this}},_.fromPairs(_.map(b,function(a){var c="_"+a,b=0<=a.indexOf("once");
return[a,function(a){if(!_.isBindable(this))throw Error("wrong this");var d=this[c];(!b||0>d.indexOf(a))&&this[c].push(a);return this}]})),_.fromPairs(_.map(b,function(a){return["_"+a,[]]})))};_.extend(_,_.mapValues(_.invert(b),function(a){return function(b,e,f){var k=b[e];b=_.isBindable(k)?k:b[e]=_.bindable(k);return b[a].call(b,f)}}.flip2),{unbind:function(a,b,e){(a=a[b])&&a.off&&a.off(e)},isBindable:function(a){return a&&a._bindable?!0:!1},bindable:_.extendWith({hooks:b,hooksShort:["onceBefore",
"onceAfter","before","after","intercept"]},function(c,b){return _.withSameArgs(c,_.extendWith(a(c,b),function f(a){for(var m=[],n=0;n<arguments.length;++n)m[n-0]=arguments[n];var p=f._onceBefore,n=f._onceAfter,h=f._onBefore,l=f._onAfter,q=f._intercept,t=b||this,r,x;if(p.length){r=0;for(x=p.length;r<x;r++)p[r].apply(t,m);p.removeAll()}r=0;for(x=h.length;r<x;r++)h[r].apply(t,m);p=(q.length?_.cps.compose([c].concat(q)):c).apply(t,m);if(l.length||n.length){m=m.concat(p);r=0;for(x=l.length;r<x;r++)l[r].apply(t,
m);if(n.length)for(l=n.copy,n.removeAll(),r=0,x=l.length;r<x;r++)l[r].apply(t,m)}return p}))})})})()},function(h,l){_.extend(_,{gatherChanges:function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];var d=_.isArray(a[0])?a[0]:_.initial(a),e=_.last(a),f=function(a){e.apply(this,_.pluck(d,"value"))};_.each(d,function(a){a(f)})},allTriggered:function(b,a){var c=[];0<b.length?_.each(b,function(d){d(function(){c=_.union(c,[d]);a&&c.length===b.length&&(a(),a=void 0)})}):a()},observableRef:function(b){for(var a=
[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];return _.extend(_.observable.apply(this,a),{trackReference:!0})},observable:function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];var c=a[0],d=_.stream({isObservable:!0,hasValue:0<a.length,value:_.isFunction(c)?void 0:c,read:function(a){return function(b){d.hasValue&&b.call(this,d.value);a.call(this,b)}},write:function(a){return function(b){d.beforeWrite&&(b=d.beforeWrite(b));if(!d.hasValue||(d.trackReference?d.value!==b:!_.isEqual(d.value,
b))){var c=d.value,m=d.hasValue;d.hasValue=!0;d.value=b;m?a.call(this,!1,d.value,c):a.call(this,!1,d.value)}}}});a.length&&d.apply(this,a);return _.extend(d,{force:function(a){d.hasValue=!1;d(a||d.value)},then:function(a){var b=_.observable();b.beforeWrite=a;d(function(a){b.write(a)});return b},toggle:function(){return d(!d.value)},tie:function(a){d(a);a(d);return d},item:function(a){var b=d.itemObservables||(d.itemObservables={}),c=b[a];c||(c=b[a]=_.observable((d.value&&d.value)[a]),c(function(b){(d.value&&
d.value[b])!==b&&((d.value||(d.value={}))[a]=b,d.force())}),d(function(b){c.write(b[a])}));return c},when:function(a,b){var c=_.isFunction(a)?a:_.equals(a),m=!1;d(function p(a){for(var e=[],h=0;h<arguments.length;++h)e[h-0]=arguments[h];c(e[0])&&!m&&(m=!0,d.off(p),b.apply(this,e))})}})},barrier:function(b){var a=void 0;_.isFunction(b)&&(a=b,b=void 0);var c=_.stream({already:void 0!==b,value:b,reset:function(){c.already=!1;delete c.value},write:function(a){return function(b){c.already||(c.already=
!0,c.value=b);a.call(this,!0,c.value)}},read:function(a){return function(b){c.already?(c.postpones||c.commitingReads?b.postponed:b).call(this,c.value):a.call(this,b)}}});a&&c(a);_.defineProperty(c,"promise",function(){return new Promise(function(a){c(a)})});return c},triggerOnce:$restArg(function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];var d=_.stream({read:function(a){return function(b){0>d.queue.indexOf(b)&&a.call(this,b)}},write:function(a){return a.partial(!0)}}).apply(this,
a);return d}),trigger:$restArg(function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];return _.stream({read:_.identity,write:function(a){return a.partial(!1)}}).apply(this,a)}),off:function(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];var d=a[0],c=a[1];d.queue&&(1===a.length?d.queue.off():d.queue.off(c));d.queuedBy&&(_.each(d.queuedBy,function(a){a.remove(d)}),delete d.queuedBy)},stream:function(b){var a=this;b=b||{};var c=_.extend([],{off:function(a){for(var b=
[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=b[0];this.length&&(0===b.length?(_.each(this,function(a){a.queuedBy.remove(this)},this),this.removeAll()):c.queuedBy&&(c.queuedBy.remove(this),this.remove(c)))}}),d=void 0,e=b.write(function(a,b){for(var e=[],f=1;f<arguments.length;++f)e[f-1]=arguments[f];var f=d.context||this,k=c.copy;a&&c.off();d.commitingReads=!0;for(var h=0,l=k.length;h<l;h++)(d.postpones?k[h].postponed:k[h]).apply(f,e);delete d.commitingReads}),f=b.read(function(a){0>c.indexOf(a)&&
(a.queuedBy?a.queuedBy.push(c):a.queuedBy=[c],c.push(a))}),k=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=b[0];_.isFunction(c)?f.call(this,c):e.apply(this,b);return k};return d=_.extend($restArg(k),b,{queue:c,once:function(a){_.find(c,function(b){return b.onceWrapped_===a})||f(_.extend(function p(b){_.off(d,p);a(b)},{onceWrapped_:a}))},off:_.off.asMethod,read:f,write:e,postpone:function(b){for(var c=[],e=0;e<arguments.length;++e)c[e-0]=arguments[e];a.postponed.apply(d.context,
c)}})}});_.observable.map=function(b,a){a=a||_.identity;var c=_.isArray(b)?Array(b.length):{},d=_.observable(c);_.each(b,function(b,f){b(function(b){c[f]=a(b,f);d.force(c)})});return d};_.observable.all=_.observable.map},function(h,l){var b=Object;$global.Http=$singleton(Component,{$traits:[$global.HttpMethods=$trait({get:function(a,b){return this.request("GET",a,b)},post:function(a,b){return this.request("POST",a,b)},loadFile:function(a,b){return this.request("GET",a,{responseType:"arraybuffer"})},
uploadFile:function(a,b,d){return this.post(a,_.extend2({data:b,headers:{"Content-Type":"binary/octet-stream","X-File-Name":Parse.fileName(b.name||"file").transliterate||"file","X-File-Size":b.size,"X-File-Type":b.type}},d))}})],request:function(a,b,d){var e=d||{},f=void 0;d=new Promise(function(d,m){if($platform.Browser){var n=new XMLHttpRequest;n.open(a,(e.protocol||e.hostname||e.port?(e.protocol||window.location.protocol)+"//"+(e.hostname||window.location.hostname)+":"+(e.port||window.location.port):
"")+b,!0);e.responseType&&(n.responseType=e.responseType);_.each(e.headers,function(a,b){n.setRequestHeader(b,a)});e.progress&&(n.onprogress=Http.progressCallbackWithSimulation(e.progress));n.onreadystatechange=function(){if(4===n.readyState){e.progress&&e.progress(1);var a="arraybuffer"===n.responseType?n.response:n.responseText;200===n.status?d(a):m(_.extend(Error(n.statusText),{httpResponse:a,httpStatus:n.status}))}};f=function(){n.abort();m("aborted")};e.data?n.send(e.data):n.send()}else m("not implemented")});
return _.extend(d,{abort:f})},progressCallbackWithSimulation:function(a){var b=0;a(0);return function(d){d.lengthComputable?a(d.loaded/d.total):a(b=1<(b+=.1)?0:b)}}});$global.JSONAPI=$singleton(Component,{$traits:[HttpMethods],request:function(a,c,d){d=_.extend2({headers:{"Cache-Control":"no-cache","Content-Type":"application/json; charset=utf-8"}},d);d.what&&(d.data=JSON.stringify(d.what));var e=_.hasReflection&&new StackTracey;return Http.request(a,"/api/"+c,d)["finally"](function(a,b){if(b)return JSON.parse(b);
if(a){if(a.httpResponse)return JSON.parse(a.httpResponse);throw a;}throw Error("empty response");}).then(function(a){if(a.success)return a.value;if(a.parsedStack){$jscomp.initSymbol();$jscomp.initSymbol();var c="undefined"!==typeof Symbol?Symbol["for"]("StackTracey"):"__StackTracey",d=a.parsedStack.map(function(a){return b.assign(a,{file:"/api/source/"+a.file})}).concat(e||[]),n={};throw b.assign(Error("SERVER: "+a.error),(n.remote=!0,n[c]=d,n));}throw Error(a.error);})}})},function(h,l){$extensionMethods(Array,
{each:_.each,map:_.map,fold:_.reduce2,reduce:_.reduce,reduceRight:_.reduceRight,zip:_.zipWith,groupBy:_.groupBy,indexBy:_.indexBy,find:_.find,findWhere:$method(_.findWhere),filter:_.filter,reject:$method(_.reject),flat:_.flatten.tails2(!0),object:_.fromPairs,shuffle:_.shuffle,nonempty:_.nonempty,pluck:$method(_.pluck),without:$method(_.without),join:function(b){return $forceOverride(function(a,c){c=2>arguments.length?"":c;return _.isString(c)?b.call(a,c):_.reduce2(a,function(a,b){return[a].concat([c,
b])})})}(Array.prototype.join),contains:function(b,a){return 0<=b.indexOf(a)},top:function(b){return b[b.length-1]},first:function(b){return b[0]},second:function(b){return b[1]},rest:function(b){return b.slice(1)},last:function(b){return b[b.length-1]},take:function(b,a){return b.slice(0,a)},takeAt:$method(function(b,a){var c="number"==typeof a?a:b.findIndex(a);return-1!==c?b.splice(c,1).first:void 0}),lastN:$method(_.last),before:function(b,a){var c=b.indexOf(a);return 0>c?b:b.slice(0,c-1)},after:function(b,
a){var c=b.indexOf(a);return 0>c?b:b.slice(c+1)},isEmpty:function(b){return 0===b.length},notEmpty:function(b){return 0<b.length},lastIndex:function(b){return b.length-1},random:function(b){return b[_.random(0,b.lastIndex)]},copy:function(b){return b.slice(0)},removeAll:$method(function(b){return b.splice(0,b.length),b}),remove:function(b,a){for(var c;-1!==(c=b.indexOf(a));)b.splice(c,1);return b},removeAt:function(b,a){b.splice(a,1);return b},insertAt:function(b,a,c){b.splice(c,0,a);return b},itemAtWrappedIndex:function(b,
a){return b[a%b.length]},reversed:function(b){return b.slice().reverse()},swap:$method(function(b,a,c){var d=b[a];b[a]=b[c];b[c]=d;return b})})},function(h,l){$extensionMethods(Function,{$:$method(_.partial),$$:$method(_.tails),bind:_.bind,partial:_.partial,calls:_.bind,tails:_.tails,tails2:_.tails2,tails3:_.tails3,applies:_.applies,compose:_.compose,then:_.then,"with":_.flipN,flip2:_.flip2,flip3:_.flip3,asFreeFunction:_.asFreeFunction,asMethod:_.asMethod,callsWith:_.callsTo,tailsWith:_.tailsTo,higherOrder:_.higherOrder,
returns:function(b,a){return function(){b.apply(this,arguments);return a}},asContinuation:function(b){return $restArg(function(){_.last(arguments)(b.apply(this,_.initial(arguments)))})},wraps:function(b,a){b._wrapped=_.withSameArgs(b,a);return b},wrapped:function(b){return b._wrapped||b},arity0:_.arity0,arity1:_.arity1,arity2:_.arity2,arity3:_.arity3,or:_.or,and:_.and,not:_.not,"new":_.higherOrder(_["new"]),each:function(b,a){return _.each2(a,b)},map:function(b,a){return _.map2(a,b)},oneShot:function(b){var a=
!1;return function(){if(!a)return a=!0,b.apply(this,arguments)}},memoized:_.memoize,throttled:_.throttle,debounced:function(b,a,c){var d,e,f,k,m,n=function(){var h=Date.now()-d;h<a&&0<h?e=setTimeout(n,a-h):(e=null,c||(f=b.apply(m,k),e||(m=k=null)))},h=function(){m=this;k=arguments;d=Date.now();var h=c&&!e;e||(e=setTimeout(n,a));h&&(f=b.apply(m,k),m=k=null);return f};h.cancel=function(){e&&(clearTimeout(e),e=null)};h.callImmediately=function(){h.cancel();b.apply(m,k)};return h},postpone:$method(function(b){b.postponed.apply(null,
arguments)}),postponed:function(b){return function(){var a=!b._postponed;b._postponed=_.asArray(arguments);b._postponedThis=this;a&&_.delay(function(){var a=b._postponed,d=b._postponedThis;b._postponed=void 0;b._postponedThis=void 0;b.apply(d,a)})}},delay:_.delay,delayed:function(b,a){return function(){var c=arguments,d=this;_.delay(function(){b.apply(d,c)},a)}}});$extensionMethods(Function,{catch_:function(b,a,c,d){return b.catches(a,c)()},catches:function(b,a,c,d){var e=arguments.length;a=1<e?_.coerceToFunction(a):
_.identity;c=2<e?_.coerceToFunction(c):_.identity;d=3<e?_.coerceToFunction(d):_.identity;return function(){var e=void 0,k=!1;try{e=b.apply(this,arguments)}catch(m){e=a(m),k=!0}k||(e=c(e));return d(e)}}})},function(h,l){$extensionMethods(String,{quote:_.quote,concatPath:function(b,a){var c="/"===b[b.length-1],d="/"===a[0];return b+(c||d?"":"/")+(c&&d?a.substring(1):a)},pluck:function(b,a){return _.pluck2(a,b)},contains:function(b,a){return 0<=b.indexOf(a)},startsWith:function(b,a){return 1===a.length?
b[0]===a:b.substring(0,a.length)===a},endsWith:function(b,a){return 1===a.length?b[b.length-1]===a:b.substring(b.length-a.length)===a},pad:function(b,a,c){return b+(c||" ").repeats(Math.max(0,a-b.length))},cut:function(b,a){return b.substring(0,a-1)+b.substring(a,b.length)},insert:function(b,a,c){return b.substring(0,a)+c+b.substring(a,b.length)},lowercase:function(b){return b.toLowerCase()},uppercase:function(b){return b.toUpperCase()},trimmed:function(b){return b.trim()},limitedTo:function(b,a){return b&&
(b.length<=a?b:b.substr(0,a-1)+"\u2026")},escaped:function(b){return _.escape(b)},repeats:function(b,a){return _.times(a,_.constant(b)).join("")},prepend:function(b,a){return a+b},append:function(b,a){return b+a},first:function(b,a){return b.slice(0,a)},last:function(b,a){return b.slice(-2)},reversed:function(b){return b.split("").reverse().join("")},capitalized:function(b){return b.charAt(0).toUpperCase()+b.slice(1)},decapitalized:function(b){return b.charAt(0).toLowerCase()+b.slice(1)},latinAlphanumericValue:function(b){return b.replace(/[^a-z0-9]/gi,
"")},alphanumericValue:function(b){return b.replace(unicode_hack(/[^0-9\p{L}|^0-9\p{N}|^0-9\p{Pc}|^0-9\p{M}]/g),"")},numericValue:function(b){return b.replace(/[^0-9]/g,"")},integerValue:function(b){return b.numericValue.parsedInt},parsedInt:function(b){b=parseInt(b,10);return _.isFinite(b)?b:void 0},bytes:function(b){for(var a=new Uint8Array(b.length),c=0;c<b.length;++c)a[c]=b.charCodeAt(c);return a},hash:function(b){var a=0,c,d,e;if(0===b.length)return a;c=0;for(e=b.length;c<e;c++)d=b.charCodeAt(c),
a=(a<<5)-a+d,a|=0;return a},transliterate:function(){var b=_.extend({"\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"yo","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"y","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"ph","\u0445":"h","\u0446":"ts","\u0447":"ch","\u0448":"sh","\u0449":"sch","\u044c":"","\u044a":"","\u044b":"y","\u044d":"e","\u044e":"yu","\u044f":"ya"},
_.fromPairs(_.map("_-1234567890qwertyuiopasdfghjklzxcvbnm",function(a){return[a,a]})));return function(a){var c="";a=(a||"").toLowerCase();for(var d=0,e=a.length;d<e;d++)c+=b[a[d]]||"";return c}}()});_.extend(String,{randomHex:function(b){void 0===b&&(b=_.random(1,32));for(var a="",c=0;c<b;c++)a+=Math.floor(16*Math.random()).toString(16);return a},leadingZero:function(b){return 10>b?"0"+b:b.toString()}});_.camelCaseToDashes=function(b){return b.replace(/[a-z][A-Z]/g,function(a){return a[0]+"-"+a[1].lowercase})};
_.camelCaseToLoDashes=function(b){return b.replace(/[a-z][A-Z]/g,function(a){return a[0]+"_"+a[1].lowercase})};_.dashesToCamelCase=function(b){return b.replace(/(-.)/g,function(a){return a[1].uppercase})};_.loDashesToCamelCase=function(b){return b.replace(/(_.)/g,function(a){return a[1].uppercase})}},function(h,l){["method","property","flipped","forceOverride"].forEach(Tags.define);$global.$extensionMethods=function(b,a){_.each(a,function(a,d){var e=Tags.unwrap(a);d in _||(_[d]=_[d]||e);if(a.$method||
!a.$property&&!_.oneArg(e)){if(a.$property)throw Error("$extensionMethods: crazy input, unable to match");d in b.prototype&&!a.$forceOverride||(b.prototype[d]=_.asMethod(a.$flipped?_.flip(e):e))}else d in b.prototype&&!a.$forceOverride||_.defineHiddenProperty(b.prototype,d,function(){return e(this)})})}},function(h,l,b){Math.clamp=_.clamp=function(a,b,d){return Math.max(b,Math.min(d,a))};Math.lerp=_.lerp=function(a,b,d){return b+(d-b)*a};Math.rescale=_.rescale=function(a,b,d,e){a=(a-b[0])/(b[1]-b[0]);
return _.lerp(e&&e.clamp?_.clamp(a,0,1):a,d[0],d[1])};Math.rescaleClamped=_.rescaleClamped=function(a,b,d){return _.rescale(a,b,d,{clamp:!0})};Math.sqr=_.sqr=function(a){return a*a};Math.sign||(Math.sign=function(a){return 0>a?-1:0<a?1:0});$global.Intersect={rayCircle:function(a,b,d,e){var f=a.sub(d);d=b.dot(b);var k=2*f.dot(b);e=f.dot(f)-e*e;f=k*k-4*d*e;if(!(0>f)){f=Math.sqrt(f);e=(-k-f)/(2*d);d=(-k+f)/(2*d);if(0<=e&&1>=e)return{time:e,where:a.add(b.scale(e))};if(0<=d&&1>=d)return{time:d,where:a.add(b.scale(d)),
insideOut:!0}}}};$global.Vec2=$prototype({$static:{xx:function(a){return new Vec2(a,a)},xy:function(a,b){return new Vec2(a,b)},x:function(a){return new Vec2(a,0)},y:function(a){return new Vec2(0,a)},zero:$property(function(){return new Vec2(0,0)}),unit:$property(function(){return new Vec2(1,1)}),one:$alias("unit"),lt:$alias("fromLT"),wh:$alias("fromWH"),fromLT:function(a){return a&&new Vec2(a.left,a.top)},fromWH:function(a){return a&&new Vec2(a.width,a.height)},fromLeftTop:$alias("fromLT"),fromWidthHeight:$alias("fromWH"),
lerp:function(a,b,d){return new Vec2(_.lerp(a,b.x,d.x),_.lerp(a,b.y,d.y))},clamp:function(a,b,d){return new Vec2(_.clamp(a.x,b.x,d.x),_.clamp(a.y,b.y,d.y))}},constructor:function(a,b){1===arguments.length?_.isNumber(a)?this.x=this.y=a:(this.x=a.x,this.y=a.y):(this.x=a,this.y=b)},w:$alias($property("x")),h:$alias($property("y")),width:$alias($property("x")),height:$alias($property("y")),length:$property(function(){return Math.sqrt(this.lengthSquared)}),lengthSquared:$property(function(){return this.x*
this.x+this.y*this.y}),distance:function(a){return this.sub(a).length},aspect:$property(function(){return this.x/this.y}),add:function(a,b){return void 0===b?"number"===typeof a?new Vec2(this.x+a,this.y+a):new Vec2(this.x+a.x,this.y+a.y):new Vec2(this.x+a,this.y+b)},aspect:$property(function(){return this.w/this.h}),dot:function(a){return this.x*a.x+this.y*a.y},sub:function(a){return new Vec2(this.x-a.x,this.y-a.y)},scale:function(a,b){return new Vec2(this.x*a,this.y*(void 0===b?a:b))},mul:function(a){return new Vec2(this.x*
a.x,this.y*a.y)},divide:function(a){return new Vec2(this.x/a.x,this.y/a.y)},normal:$property(function(){return this.scale(1/this.length)}),perp:$property(function(){return new Vec2(this.y,-this.x)}),half:$property(function(){return new Vec2(.5*this.x,.5*this.y)}),inverse:$property(function(){return new Vec2(-this.x,-this.y)}),asArray:$property(function(){return[this.x,this.y]}),asLeftTop:$property(function(){return{left:this.x,top:this.y}}),asLeftTopMargin:$property(function(){return{marginLeft:this.x,
marginTop:this.y}}),asWidthHeight:$property(function(){return{width:this.x,height:this.y}}),asTranslate:$property(function(){return"translate("+this.x+" "+this.y+")"}),separatedWith:function(a){return this.x+a+this.y},floor:$property(function(){return new Vec2(Math.floor(this.x),Math.floor(this.y))}),sum:$static(function(a){return _.reduce(_.isArray(a)&&a||_.asArray(arguments),function(a,b){return a.add(b||Vec2.zero)},Vec2.zero)}),projectOnCircle:function(a,b){return a.add(this.sub(a).normal.scale(b))},
projectOnLineSegment:function(a,b){var d=b.sub(a),e=d.lengthSquared;if(0==e)return a;e=this.sub(a).dot(d)/e;return 0>e?a:1<e?b:a.add(d.scale(e))},projectOnRay:function(a,b){var d=b.lengthSquared;return 0==d?0:this.sub(a).dot(b)/d}});$jscomp.initSymbol();"undefined"!==typeof Symbol&&($jscomp.initSymbol(),Vec2.prototype[Symbol["for"]("String.ify")]=function(){return"{"+this.x+","+this.y+"}"});$global.Bezier={cubic:function(a,b,d,e,f){var k=a*a*a,m=a*a,n=3*(d.x-b.x),h=3*(d.y-b.y),l=3*(e.x-d.x)-n;d=3*
(e.y-d.y)-h;return new Vec2((f.x-b.x-n-l)*k+l*m+n*a+b.x,(f.y-b.y-h-d)*k+d*m+h*a+b.y)},cubic1D:function(a,b,d,e,f){return Bezier.cubic(a,Vec2.zero,new Vec2(b,d),new Vec2(e,f),Vec2.one).y},make:{cubic:function(a,b,d,e){return function(f){return Bezier.cubic(f,a,b,d,e)}},cubic1D:function(a,b,d,e){return function(f){return Bezier.cubic1D(f,a,b,d,e)}}}};$global.BBox=$prototype({$static:{zero:$property(function(){return new BBox(0,0,0,0)}),unit:$property(function(){return new BBox(0,0,1,1)}),rect:$property(function(a){return new BBox(0,
0,a,a)}),fromLeftTopAndSize:function(a,b){return BBox.fromLTWH({left:a.x,top:a.y,width:b.x,height:b.y})},fromLTWH:function(a,b,d,e){return 1===arguments.length?a&&BBox.fromLTWH(a.left,a.top,a.width,a.height):new BBox(a+d/2,b+e/2,d,e)},fromLTRB:function(a,b,d,e){return 1===arguments.length?a&&BBox.fromLTRB(a.left,a.top,a.right,a.bottom):new BBox(_.lerp(.5,a,d),_.lerp(.5,b,e),d-a,e-b)},fromSizeAndCenter:function(a,b){return new BBox(b.x-a.x/2,b.y-a.y/2,a.x,a.y)},fromSize:function(a,b){return b?new BBox(-a/
2,-b/2,a,b):new BBox(-a.x/2,-a.y/2,a.x,a.y)},fromPoints:function(a){var b=Number.MAX_VALUE,d=Number.MAX_VALUE,e=Number.MIN_VALUE,f=Number.MIN_VALUE;_.each(a,function(a){b=Math.min(a.x,b);d=Math.min(a.y,d);e=Math.max(a.x,e);f=Math.max(a.y,f)});return BBox.fromLTRB(b,d,e,f)}},constructor:function(a,b,d,e){4==arguments.length?(this.x=a,this.y=b,this.width=d,this.height=e):_.extend(this,a)},classifyPoint:function(a){a=_.extend(a.x>this.right?{right:!0}:{},a.x<this.left?{left:!0}:{},a.y>this.bottom?{bottom:!0}:
{},a.y<this.top?{top:!0}:{});return _.extend(a,a.left||a.right||a.bottom||a.top?{}:{inside:!0})},classifyRay:function(a,b,d){var e=this.size.half,f,k,m,n,h,l;f=1/b.x;k=1/b.y;h=Math.sign(f);l=Math.sign(k);m=(this.x-h*e.x-a.x)*f;n=(this.y-l*e.y-a.y)*k;f*=this.x+h*e.x-a.x;e=(this.y+l*e.y-a.y)*k;if(!(m>e||n>f||(k=m>n?m:n,1<=k||0>=(f<e?f:e))))return f={time:_.clamp(k,0,1)},f.normal=m>n?new Vec2(-h,0):new Vec2(0,-l),f.delta=b.scale(f.time),f.where=a.add(f.delta),d&&(m=this.grow(-d),f.where.x>m.right?f.where.y<
m.top?f=Intersect.rayCircle(a,b,m.rightTop,d):f.where.y>m.bottom&&(f=Intersect.rayCircle(a,b,m.rightBottom,d)):f.where.x<m.left&&(f.where.y<m.top?f=Intersect.rayCircle(a,b,m.leftTop,d):f.where.y>m.bottom&&(f=Intersect.rayCircle(a,b,m.leftBottom,d))),f&&f.insideOut&&(f.where=a)),f},nearestPointTo:function(a,b){var d=b||0,e=new Vec2(this.left,this.top),f=new Vec2(this.right,this.top),k=new Vec2(this.right,this.bottom),m=new Vec2(this.left,this.bottom),d=[a.projectOnLineSegment(e.add(d,0),f.add(-d,0)),
a.projectOnLineSegment(f.add(0,d),k.add(0,-d)),a.projectOnLineSegment(k.add(-d,0),m.add(d,0)),a.projectOnLineSegment(m.add(0,-d),e.add(0,d)),a.projectOnCircle(e.add(d,d),d),a.projectOnCircle(f.add(-d,d),d),a.projectOnCircle(k.add(-d,-d),d),a.projectOnCircle(m.add(d,-d),d)];return _.min(d,function(b){return a.sub(b).length})},xywh:$property(function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}),ltwh:$property(function(){return{left:this.left,top:this.top,width:this.width,height:this.height}}),
union:function(a){return BBox.fromLTRB(Math.min(this.left,a.left),Math.min(this.top,a.top),Math.max(this.right,a.right),Math.max(this.bottom,a.bottom))},centerIn:function(a){return new BBox(a.x,a.y,this.width,this.height)},clone:$property(function(){return new BBox(this.x,this.y,this.width,this.height)}),floor:$property(function(){return new BBox.fromLTRB(Math.floor(this.left),Math.floor(this.top),Math.floor(this.right),Math.floor(this.bottom))}),css:$property(function(){return{left:this.left+"px",
top:this.top+"px",width:this.width+"px",height:this.height+"px"}}),leftTop:$property(function(){return new Vec2(this.left,this.top)}),leftBottom:$property(function(){return new Vec2(this.left,this.bottom)}),rightBottom:$property(function(){return new Vec2(this.right,this.bottom)}),rightTop:$property(function(){return new Vec2(this.right,this.top)}),left:$property(function(){return this.x-this.width/2}),right:$property(function(){return this.x+this.width/2}),top:$property(function(){return this.y-
this.height/2}),bottom:$property(function(){return this.y+this.height/2}),center:$property(function(){return new Vec2(this.x,this.y)}),extent:$alias("size"),size:$property(function(){return new Vec2(this.width,this.height)}),offset:function(a){return new BBox(this.x+a.x,this.y+a.y,this.width,this.height)},newWidth:function(a){return new BBox(this.x-(a-this.width)/2,this.y,a,this.height)},grow:function(a){return new BBox(this.x,this.y,this.width+2*a,this.height+2*a)},shrink:function(a){return this.grow(-a)},
mul:function(a){return new BBox(this.x*a,this.y*a,this.width*a,this.height*a)},area:$property(function(){return Math.abs(this.width*this.height)}),intersects:function(a){return!(this.right<a.left||this.left>a.right||this.bottom<a.top||this.top>a.bottom)}});$jscomp.initSymbol();"undefined"!==typeof Symbol&&($jscomp.initSymbol(),BBox.prototype[Symbol["for"]("String.ify")]=function(){return"{ "+this.left+","+this.top+" \u2190\u2192 "+this.right+","+this.bottom+" }"});$global.Transform=$prototype({$static:{identity:$property(function(){return new Transform}),
svgMatrix:function(a){return new Transform([[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]])},translation:function(a){return new Transform([[1,0,a.x],[0,1,a.y],[0,0,1]])}},constructor:function(a){this.components=a||[[1,0,0],[0,1,0],[0,0,1]]},multiply:function(a){var b=[[0,0,0],[0,0,0],[0,0,0]],d,e,f=this.components,k=a.components;for(a=0;3>a;a++)for(d=0;3>d;d++)for(e=0;3>e;e++)b[a][d]+=f[a][e]*k[e][d];return new Transform(b)},translate:function(a){return this.multiply(Transform.translation(a))},scale:function(a){return this.multiply(new Transform([[a,
0,0],[0,a,0],[0,0,1]]))},inverse:$property($memoized(function(){var a=this.components,b=1/(a[0][0]*(a[1][1]*a[2][2]-a[2][1]*a[1][2])-a[0][1]*(a[1][0]*a[2][2]-a[1][2]*a[2][0])+a[0][2]*(a[1][0]*a[2][1]-a[1][1]*a[2][0]));return new Transform([[(a[1][1]*a[2][2]-a[2][1]*a[1][2])*b,-(a[0][1]*a[2][2]-a[0][2]*a[2][1])*b,(a[0][1]*a[1][2]-a[0][2]*a[1][1])*b],[(a[1][0]*a[2][2]-a[1][2]*a[2][0])*b,(a[0][0]*a[2][2]-a[0][2]*a[2][0])*b,-(a[0][0]*a[1][2]-a[1][0]*a[0][2])*b],[(a[1][0]*a[2][1]-a[2][0]*a[1][1])*b,-(a[0][0]*
a[2][1]-a[2][0]*a[0][1])*b,(a[0][0]*a[1][1]-a[1][0]*a[0][1])*b]])})),unproject:function(a){var b=this.components;return new Vec2(a.x*b[0][0]+a.y*b[0][1]+b[0][2],a.x*b[1][0]+a.y*b[1][1]+b[1][2])},project:function(a){return this.inverse.unproject(a)}});_.rng=function(a,b,d){var e=a,f=987654321;return function(){f=36969*(f&65535)+(f>>16)&4294967295;e=18E3*(e&65535)+(e>>16)&4294967295;var a=(f<<16)+e&4294967295,a=a/4294967296+.5;return void 0===b&&void 0===d?a:Math.round(b+a*(d-b))}};_.equalDistribution=
function(a,b){var d=a/b,e=0;return _.times(b,function(){var a=Math.round(e),b=Math.round(e+=d);return Math.floor(b-a)})};_.ptInRect=function(a,b){return a.x>=b.left&&a.y>=b.top&&a.x<b.right&&a.y<b.bottom};_.hue2CSS=function(a,b){return _.RGB2CSS(_.hue2RGB(a),b)};_.HSL2CSS=function(a,b){return _.RGB2CSS(_.HSL2RGB(a),b)};_.HSL2RGB=function(a){var b=a[1],d=a[2];a=_.hue2RGB(a[0]);b*=1-Math.abs(2*d-1);return[(a[0]-.5)*b+d,(a[1]-.5)*b+d,(a[2]-.5)*b+d]};_.hue2RGB=function(a){return[Math.max(0,Math.min(1,
Math.abs(6*a-3)-1)),Math.max(0,Math.min(1,2-Math.abs(6*a-2))),Math.max(0,Math.min(1,2-Math.abs(6*a-4)))]};_.RGB2CSS=function(a,b){return"rgba("+Math.round(255*a[0])+","+Math.round(255*a[1])+","+Math.round(255*a[2])+","+(void 0===b?void 0===a[3]?1:a[3]:b)+")"};_.RGB2HSL=function(a,b){var d=a[0],e=a[1],f=a[2],k=void 0===b?a[3]:b,m=Math.max(d,e,f),h=Math.min(d,e,f),l,v=(m+h)/2;if(m==h)l=h=0;else{var y=m-h,h=.5<v?y/(2-m-h):y/(m+h);switch(m){case d:l=(e-f)/y+(e<f?6:0);break;case e:l=(f-d)/y+2;break;case f:l=
(d-e)/y+4}l/=6}return void 0===k?[l,h,v]:[l,h,v,k]};_.extend(Math,function(a){return{roundTo:function(a,b){return a-a%b},round10:function(b,d){return a("round",b,d)},floor10:function(b,d){return a("floor",b,d)},ceil10:function(b,d){return a("ceil",b,d)}}}(function(a,b,d){if("undefined"===typeof d||0===+d)return Math[a](b);b=+b;d=+d;if(isNaN(b)||"number"!==typeof d||0!==d%1)return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-d:-d)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?
+b[1]+d:d))}));(function(){var a=b(34);Array.prototype.topoSort=function(){return a(this)}})();Array.prototype.topoMerge=function(){for(var a=[],b=0,d=this.length;b<d;b++)for(var e=this[b],f=0,k=e.length-1;f<k;f++)a.push([e[f],e[f+1]]);return a.topoSort()};$global.DAG=function(a){this.cfg=a||{};this.nodes=a.nodes||_.noop};DAG.prototype.each=function(a,b,d,e){e=e||new Set;if(!e.has(a)){e.add(a);var f=this,k=this.nodes(a)||[];!0!==b.call(this,a,{nodes:k,prev:d,visited:e})&&k.forEach(function(d){f.each(d,
b,a,e)})}return e};DAG.prototype.edges=function(a){var b=[];this.each(a,function(a,e){e.nodes.concat(a).reduce(function(a,d){b.push([a,d]);return d})});return b};DAG.prototype.sortedSubgraphOf=function(a){return this.edges(a).topoSort().remove(a)};DAG.sortedSubgraphOf=function(a,b){return(new DAG(b)).sortedSubgraphOf(a)}},function(h,l){_.extend(_,{asArray:function(b){return void 0!==b.length?[].slice.call(b,0):[b]}});_.extend(_,{numArgs:function(b){return void 0===b._ac?b.length:b._ac},restArg:function(b){return b._ra||
!1},noArgs:function(b){return 0===_.numArgs(b)&&!b._ra},hasArgs:function(b){return 0<_.numArgs(b)&&!b._ra},oneArg:function(b){return 1===_.numArgs(b)&&!b._ra},withRestArg:$global.$restArg=function(b){Object.defineProperty(b,"_ra",{enumerable:!1,writable:!0,value:!0});return b},withArgs:function(b,a,c){void 0!==b&&Object.defineProperty(c,"_ac",{enumerable:!1,writable:!0,value:b});void 0!==a&&Object.defineProperty(c,"_ra",{enumerable:!1,writable:!0,value:a});return c},withSameArgs:function(b,a){return _.withArgs(_.numArgs(b),
_.restArg(b),a)}});(function(){var b=function(a,b){return _[a]=b(_[a])};b("memoize",function(a){return function(b){return _.withSameArgs(b,a(b))}});b("partial",function(a){return $restArg(function(b){return _.withArgs(Math.max(0,_.numArgs(b)-(arguments.length-1)),b._ra,a.apply(this,arguments))})});b("bind",function(a){return $restArg(function(b,d){return _.withArgs(Math.max(0,_.numArgs(b)-(arguments.length-2)),b._ra,a.apply(this,arguments))})})})()},function(h,l){_.typeOf=function(b){return typeof b};
_.instanceOf=function(b){return function(a){return a instanceof b}};_.count=function(b){return b.length};_.array=_.tuple=function(){return _.asArray(arguments)};_.cons=function(b,a){return[b].concat(a||[])};_.atIndex=function(b){return function(a){return a[b]}};_.takesFirst=_.higherOrder(_.first);_.takesLast=_.higherOrder(_.last);_.applies=function(b,a,c){return function(){return b.apply(a,c)}};_.prepends=function(b){return function(a){return b+a}};_.appends=function(b){return function(a){return a+
b}};_.join=function(b,a){return b.join(a)};_.joinWith=_.flip2(_.join);_.joinsWith=_.higherOrder(_.joinWith);_.split=function(b,a){return b.split(a)};_.splitWith=_.flip2(_.split);_.splitsWith=_.higherOrder(_.splitWith);_.sum=function(b,a){return(b||0)+(a||0)};_.subtract=function(b,a){return(b||0)-(a||0)};_.mul=function(b,a){return(b||0)*(a||0)};_.equal=function(b,a){return b===a};_.sums=_.plus=_.higherOrder(_.sum);_.subtracts=_.minus=_.higherOrder(_.subtract);_.muls=_.higherOrder(_.mul);_.equals=_.higherOrder(_.equal);
_.less=function(b,a){return b<a};_.lessOrEqual=function(b,a){return b<=a};_.greater=function(b,a){return b>a};_.greaterOrEqual=function(b,a){return b>=a};_.isNegative=function(b){return 0>b};_.largest=function(b,a){return isNaN(b)&&isNaN(a)?NaN:isNaN(b)?a:isNaN(a)?b:Math.max(b,a)};_.notZero=function(b){return 0!==b};_.propertyOf=function(b){return function(a){return b[a]}};_.oneOf=$restArg(function(){return _.propertyOf(_.index(_.asArray(arguments)))})},function(h,l){_.debugEcho=function(){return[this].concat(_.asArray(arguments))};
_.call=function(b,a,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];return b.apply(a,d)};_.arity=function(b,a){return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];return a.apply(this,d.slice(0,b))}};_.arity0=function(b){return function(){return b.call(this)}};_.arity1=function(b){return function(a){return b.call(this,a)}};_.arity2=function(b){return function(a,c){return b.call(this,a,c)}};_.arity3=function(b){return function(a,c,d){return b.call(this,a,c,
d)}};_.arityFn=function(b){return _["arity"+b]};_.tails=$restArg(function(b,a){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return function(){return b.apply(this,_.asArray(arguments).concat(c))}});_.tails2=$restArg(function(b,a){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return function(a){return b.apply(this,[a].concat(c))}});_.tails3=$restArg(function(b,a){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return function(a,d){return b.apply(this,[a,d].concat(c))}});
_.callsTo=function(b){return $restArg(function(){return _.callsWith.apply(null,arguments)(b)})};_.tailsTo=function(b,a){return $restArg(function(){return _.tailsWith.apply(null,arguments)(b)})};_.callsWith=$restArg(function(){var b=_.asArray(arguments);return function(a){return _.withSameArgs(a,function(){return a.apply(this,b.concat(_.asArray(arguments)))})}});_.tailsWith=$restArg(function(){var b=_.asArray(arguments);return function(a){return _.withSameArgs(a,function(){return a.apply(this,_.asArray(arguments).concat(b))})}});
_.argumentAppendingWrapper=function(b,a){return _.withSameArgs(b,function(){var c=this,d=_.asArray(arguments);return a(function(){return b.apply(c,d.concat(_.asArray(arguments)))})})};_.argumentPrependingWrapper=function(b,a){return _.withSameArgs(b,function(){var c=this,d=_.asArray(arguments);return a(function(){return b.apply(c,_.asArray(arguments).concat(d))})})};_["new"]=$restArg(function(b,a,c,d,e){switch(arguments.length){case 1:return new b;case 2:return new b(a);case 3:return new b(a,c);case 4:return new b(a,
c,d);case 5:return new b(a,c,d,e);default:_.notImplemented()}});_.flipN=function(b){return $restArg(function(){return b.apply(this,_.asArray(arguments).reverse())})};_.flip=function(b){if(_.restArg(b))return _.flipN(b);switch(_.numArgs(b)){case 0:case 1:return b;case 2:return _.flip2(b);case 3:return _.flip3(b);default:throw Error("flip: unsupported arity");}};_.flip2=function(b){return function(a,c){return b.call(this,c,a)}};_.flip3=function(b){return function(a,c,d){return b.call(this,d,c,a)}};
_.or=function(b,a){return function(){return b.apply(this,arguments)||a.apply(this,arguments)}};_.and=function(b,a){return function(){return b.apply(this,arguments)&&a.apply(this,arguments)}};_.not=function(b){return function(){return!b.apply(this,arguments)}};_.extend(_,{Y:function(b){var a=b(function(){return a.apply(this,arguments)});return a}});(function(){_.hyperOperator=function(b,a,c,d){var e=_.arityFn(b)||_.identity,f=(c||_.goDeeperWhenFirstArgumentIsGood)(b,d||_.isNonTrivial);return function(){var b=
_.last(arguments);return _.Y(function(c){var d=_.tails(a,e(c));return function(){return(f(arguments)?d:b).apply(this,arguments)}}).apply(this,_.initial(arguments))}};_.goDeeperWhenFirstArgumentIsGood=function(b,a){return function(b){return 0<b.length?a(b[0]):!1}};_.goDeeperAlwaysIfPossible=function(b,a){return 0===b?_.constant(!1):1===b?function(b){return a(b[0])}:2===b?function(b){return a(b[0])||a(b[1])}:function(b){return _.some(_.asArray(b),a)}};_.goDeeperOnlyWhenNessesary=function(b,a){return 0===
b?_.constant(!1):1===b?function(b){return a(b[0])}:2===b?function(b){return a(b[0])&&a(b[1])}:function(b){return _.every(_.asArray(b),a)}};_.isTrivial=function(b){return _.isEmpty(b)||_.isString(b)||_.isNumber(b)||b instanceof RegExp||!(_.isStrictlyObject(b)||_.isArray(b))||_.isPrototypeInstance(b)||_.isMeta(b)};_.isMeta=_.constant(!1);_.isNonTrivial=_.not(_.isTrivial);_.binary=2;_.unary=1})();_.higherOrder=_.callsTo;_.eval=function(b){return _.isFunction(b)?b.call(this):b};_.evals=function(b){var a=
arguments;return function(b){return _.isFunction(b)?b.apply(this,a):b}};_.method=function(b,a){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return function(a){return a[b].apply(a,c)}};_.asFreeFunction=function(b){return function(a,c){for(var d=[],e=1;e<arguments.length;++e)d[e-1]=arguments[e];return b.apply(a,d)}};_.asMethod=function(b){return function(){return b.apply(void 0,[this].concat(_.asArray(arguments)))}};_.once=function(b){var a=!1;return function(){if(!a)return a=!0,b.apply(this,
arguments)}};_.withTimeout=function(b,a,c){var d=!1,e=setTimeout(function(){d=!0;b.expired&&b.expired(c)},b.maxTime);a(function(){d||(clearTimeout(e),c&&c.apply(this,arguments))})};_.sequence=function(b){var a=_.isArray(b)?b:_.asArray(arguments),c=a.length;return 0===c?_.identity:function(b){for(var e=0;e<c;e++)b=a[e].call(this,b);return b}};_.seq=_.sequence;_.then=function(b,a){return function(c){var d=b.apply(this,arguments);return d instanceof Promise?d.then(a.bind(this)):a.call(this,d)}}},function(h,
l,b){var a=Object;_.hasTags=!0;$global.Tags=function(a,b){void 0!==a&&(this.subject=a);void 0!==b&&_.extend(this,b)};Tags.$definition={};a.assign(Tags.prototype,{add:function(a,b){return this["$"+a]=b||!0,this},clone:function(b){return a.assign(new Tags(b||this.subject),Tags.get(this))},modify:function(b){this.subject=b(this.subject);return this.subject instanceof Tags?a.assign(this.subject,Tags.get(this)):this},extend:function(b){return b instanceof Tags?a.assign(this,Tags.get(b)):this}});a.assign(Tags,
{omit:$restArg(function(a,b){for(var c=[],k=1;k<arguments.length;++k)c[k-1]=arguments[k];if(a instanceof Tags){var m=_.index(c),c=_.pick(a,function(a,b){return"$"===b[0]&&!(b in m)});return _.isEmptyObject(c)?a.subject:new Tags(a.subject,c)}return a}),clone:function(a,b){return a instanceof Tags?a.clone(b):b||a},extend:function(a,b){return a instanceof Tags?a.clone().extend(b):b instanceof Tags?Tags.wrap(a).extend(b):a},get:function(a){return a instanceof Tags?_.pick(a,function(a,b){return"$"===b[0]}):
{}},each:function(a,b){a instanceof Tags&&_.each(a,function(a,c){"$"===c[0]&&b(c.slice(1))})},hasSubject:function(a){return a instanceof Tags&&"subject"in a},matches:function(a){return function(b){return b&&void 0!==b["$"+a]}},unwrapAll:function(a){return _.map2(a,Tags.unwrap)},unwrap:function(a){return a instanceof Tags?a.subject:a},wrap:function(a){return a instanceof Tags?a:0===arguments.length?new Tags:new Tags(a)},modify:function(a,b){return a instanceof Tags?a.clone().modify(b):b(a)},map:function(a,
b){return Tags.modify(a,function(a){return _.map2(a,function(a,c){return Tags.modify(a,function(d){return b(d,c,a instanceof Tags?a:void 0)})})})},add:function(a,b,c){return Tags.wrap.apply(null,[].slice.call(arguments,1)).add(a,c)},all:new Set,isDefined:function(a){return Tags.all.has(a)},define:function(b,c){Tags.all.add(b);c=_.isFunction(c)&&c||_.identity;var f="$"+b;$global[f]=c(function(a,c){return 2>arguments.length?Tags.add(b,a):Tags.add(b,c,a)});return a.assign($global[f],{matches:Tags.matches(b),
is:function(a){return a instanceof Tags&&f in a||!1},isNot:function(a){return!(a instanceof Tags&&f in a)||!1},unwrap:function(a){return!0===$atom.matches(a)?Tags.unwrap(a):a}})}});$global.$untag=Tags.unwrap;["constant","get","once","async","atom"].forEach(Tags.define);$jscomp.initSymbol();if("undefined"!==typeof Symbol){var c=b(36);$jscomp.initSymbol();Tags.prototype[Symbol["for"]("String.ify")]=function(a){if(a.json)return a($untag(this));var b=Tags.get(this),f=_.reduce(b,function(b,c,e){return _.isBoolean(c)?
e+" ("+b:e+" ("+a.configure({pretty:!1})(c)+", "+b},"");return c(f,a($untag(this)))+")".repeats(_.keys(b).length)}}},function(h,l,b){(function(a){(function(){var b=function(){if("undefined"!==typeof window&&window.window===window&&void 0!==window.navigator){var b=navigator.platform,c=navigator.userAgent,d=b+"\n"+c;return _.extend({engine:"browser",browserEngine:0<=c.indexOf("AppleWebKit")?"WebKit":void 0,browser:0<=c.indexOf("Firefox")?"Firefox":0<=c.indexOf("Chrome")?"Chrome":0<=c.indexOf("Safari")?
"Safari":0<=c.indexOf("Trident")?"IE":void 0},0<=b.indexOf("Linux arm")||0<=d.indexOf("Android")?{touch:!0,system:"Android"}:0<=d.indexOf("iPad")?{touch:!0,system:"iOS",device:"iPad"}:0<=d.indexOf("iPhone")||0<=d.indexOf("iPod")?{touch:!0,system:"iOS",device:"iPhone"}:{})}return"undefined"!==typeof a&&a.global===a?{engine:"node"}:{}}(),d="browser"===b.engine?window:"node"===b.engine?a:void 0;d.property=function(a,b,c){if(a in d)throw Error("cannot redefine global "+a);return Object.defineProperty(d,
a,Object.assign({},b instanceof Function?{get:b,set:function(){throw Error("cannot set global "+a);}}:b,{enumerable:!0},c))};d["const"]=function(a,b,c){return d.property(a,{value:b,writable:!1},c)};d["const"]("$global",d);d["const"]("$platform",{engine:b.engine,system:b.system,device:b.device,touch:b.touch||!1,IE:"IE"===b.browser,Firefox:"Firefox"===b.browser,Safari:"Safari"===b.browser,Chrome:"Chrome"===b.browser,WebKit:"WebKit"===b.browserEngine,Browser:"browser"===b.engine,NodeJS:"node"===b.engine,
iPad:"iPad"===b.device,iPhone:"iPhone"===b.device,iOS:"iOS"===b.system})})()}).call(l,b(0))},function(h,l){_.extend(_,{defineProperty:function(b,a,c,d){if(_.isObject(b)&&b.hasOwnProperty(a))throw Error("_.defineProperty: targetObject already has property "+a);Object.defineProperty(b,a,_.extend({enumerable:!0},d,_.coerceToPropertyDefinition(c,a)))},defineHiddenProperty:function(b,a,c,d){return _.defineProperty(b,a,c,_.extend({enumerable:!1},d))},defineMemoizedProperty:function(b,a,c,d){c=_.coerceToPropertyDefinition(c,
a);return _.defineProperty(b,a,_.extend({},c,{get:_.memoizeToThis("_"+a,c.get)}),d)},defineProperties:function(b,a){_.each(a,_.defineProperty.partial(b).flip2)},memoizedState:function(b){return _.filter2(b,function(a,b){return"_"===b[0]&&!_.isFunction(a)})},memoizeToThis:function(b,a){return function(){var c=this[b];return void 0!==c?c:this[b]=a.call(this)}},coerceToPropertyDefinition:function(b,a){var c=b||{},d="undefined"===typeof Tags?b:Tags.unwrap(b);return!c.$constant&&!c.$get&&_.isPropertyDefinition(d)&&
d||(c.$get||!c.$constant&&_.isFunction(d)&&_.noArgs(d))&&{get:d,set:_.throwsError("cannot change "+(a||"property")+" (as it's an accessor function)")}||!c.$get&&{get:_.constant(d),set:_.throwsError("cannot change "+(a||"property")+" (as it's sealed to "+d+")")}||_.throwsError("coerceToPropertyDefinition: crazy input, unable to match")()},isPropertyDefinition:function(b){return _.isObject(b)&&(_.isFunction(b.get)||_.isFunction(b.set))},ownProperties:function(b){return b&&_.pickKeys(b,b.hasOwnProperty.bind(b))||
{}}})},function(h,l,b){var a=b(1);_.hasStdlib=!0;_.throwsError=_.higherOrder(_.throwError=function(a){throw a instanceof Error?a:Error(a);});_["throws"]=_.higherOrder(_["throw"]=function(a){throw a;});_.overrideThis=_.throwsError("override this");_.notImplemented=_.throwsError("not implemented");_.mixin({values2:function(a){return _.isArrayLike(a)?a:_.isStrictlyObject(a)?_.values(a):_.isEmpty(a)?[]:[a]}});_.mixin({map2:function(a,b,e){return _.isArrayLike(a)?_.map(a,b,e):a instanceof Set?_.mapSet(a,
b,e):_.isStrictlyObject(a)?_.mapValues(a,b,e):b.call(e,a)}});_.mapSet=function(a,b,e){var f=new Set;a=$jscomp.makeIterator(a);for(var k=a.next();!k.done;k=a.next())f.add(b.call(e,k.value));return f};_.mapsWith=_.higherOrder(_.mapWith=_.flip2(_.map2));_.pluck2=function(a,b){return _.map2(a,_.property(b))};_.mixin({scatter:function(a,b){var e=void 0;_.map2(a,function(a,c){b(a,c,function(a,b){2>arguments.length?(e=e||[]).push(a):(e=e||{})[b]=a})});return e}});_.obj=function(a){var b=void 0;a(function(a,
c){(b=b||{})[c]=a});return b};_.arr=function(a){var b=void 0;a(function(a){(b=b||[]).push(2>arguments.length?a:_.asArray(arguments))});return b};_.mapKeys=function(b,d){return _.isArrayLike(b)?_.map(b,_.tails2(_.mapKeys,d)):_.isStrictlyObject(b)?_.fromPairs(_.map(a.entries(b),function(a){return[d(a[0]),_.mapKeys(a[1],d)]})):b};_.mapMap=_.hyperOperator(_.unary,_.map2);_.hyperMap=function(a,b){return _.hyperOperator(_.unary,function(a,c){return b(a)||_.map2(a,c)})(a,_.identity)};_.pairs2=function(a){return _.scatter(a,
function(a,b,c){c([b,a])})};_.reject2=function(a,b){return _.filter2(a,_.not(b))};_.filter2=function(a,b){if(_.isArrayLike(a)){for(var e=[],f=0,k=a.length;f<k;f++){var m=a[f],h=b(m,f);!0===h?e.push(m):!1!==h&&e.push(h)}return e}if(_.isStrictlyObject(a))return e={},_.each(Object.keys(a),function(f){var k=a[f],m=b(k,f);!0===m?e[f]=k:!1!==m&&(e[f]=m)}),e;h=b(a);if(!0===h)return a;if(!1!==h)return h};_.filterFilter=_.hyperOperator(_.unary,_.filter2);_.hyperFilter=function(a,b){return _.hyperOperator(_.unary,
function(a,c){var k=b(a);return!0===k&&_.filter2(a,c)||k})(a,_.identity)};_.hyperReject=function(a,b){return _.hyperFilter(a,function(a){a=b(a);return _.isBoolean(a)?!a:a})};_.each2=function(a,b){if(_.isArrayLike(a))for(var e=0,f=a.length;e<f;e++)b(a[e],e,f);else if(_.isStrictlyObject(a))for(var k=Object.keys(a),m,e=0,f=k.length;e<f;e++)b(a[m=k[e]],m,f);else b(a,void 0,1)};_.reduce2=function(a,b,e){var f=3>arguments.length,k=a,m=b,h=e;f&&(k=void 0,m=a,h=b);_.each2(m,function(a,b){k=f?a:h(k,a);f=!1});
return k};_.reduceReduce=function(a,b,e){var f=a,k=b,m=e;3>arguments.length&&(f={},k=a,m=b);return _.hyperOperator(_.binary,_.reduce2,_.goDeeperAlwaysIfPossible)(f,k,m)};_.concat=function(a,b){var e,f;1===arguments.length?(e=a[0],f=a.slice(1)):(e=a,f=[].slice.call(arguments,1));return _.isArrayLike(e)?e.concat.apply(e,f):_.reduce2(e,f,function(a,b){return _.isObject(a)&&_.isObject(b)?_.extend({},a,b):a+b})};_.mixin({zipSetsWith:function(a,b){return _.reduce(a.slice(1),function(a,c){_.each(_.union(c&&
Array.from(c.values())||[],a&&Array.from(a.values())||[]),function(k){var m=b(a&&a.has(k)?k:void 0,c&&c.has(k)?k:void 0);void 0===m?a["delete"](k):a.add(m)});return a},new Set(a[0]))},zipObjectsWith:function(a,b){return _.reduce(a.slice(1),function(a,c){_.each(_.union(_.keys(c),_.keys(a)),function(k){var m=b(a&&a[k],c&&c[k]);void 0===m?delete a[k]:a[k]=m});return a},_.clone(a[0]))},zip2:function(a,b){var e=2===arguments.length?a:_.initial(arguments),f=2===arguments.length?b:_.last(arguments);return _.isArrayLike(e)&&
0!==e.length?_.isArrayLike(e[0])?_.zipWith(e,f):e[0]instanceof Set?_.zipSetsWith(e,f):_.isStrictlyObject(e[0])?_.zipObjectsWith(e,f):_.reduce2(e,f):e}});_.mixin({zipZip:_.hyperOperator(_.binary,_.zip2)});_.extend=$restArg(_.extend);_.extended=$restArg(function(){return _.extend.apply(this,[{}].concat(_.asArray(arguments)))});_.extendWith=_.flip(_.extend);_.extendsWith=_.flip(_.partial(_.partial,_.flip(_.extend)));_.extendedDeep=_.tails3(_.zipZip,function(a,b){return void 0===b?a:b});_.extend2=$restArg(function(a){return _.extend(a,
_.reduceRight(arguments,function(a,b){return _.fromPairs(_.map(_.union(_.keys(b),_.keys(a)),function(c){var k=b[c];return[c,c in a?"object"===typeof k?_.extend(k,a[c]):a[c]:k]}))},{}))});_.find2=function(a,b){if(_.isArrayLike(a))for(var e=0,f=a.length;e<f;e++){var k=b(a[e],e,a);if("boolean"!==typeof k)return k;if(!0===k)return a[e]}else if(_.isStrictlyObject(a))for(var e=0,m=Object.keys(a),f=m.length;e<f;e++){var h=m[e],k=b(a[h],h,a);if("boolean"!==typeof k)return k;if(!0===k)return a[h]}};_.findFind=
function(a,b){return _.hyperOperator(_.unary,function(a,c){if(_.isArrayLike(a))for(var k=0,h=a.length;k<h;k++){var l=c(a[k]);if("boolean"!==typeof l)return l;if(!0===l)return a[k]}else if(_.isStrictlyObject(a))for(var k=0,p=Object.keys(a),h=p.length;k<h;k++){var v=p[k],l=c(a[v]);if("boolean"!==typeof l)return l;if(!0===l)return a[v]}l=b(a);return"boolean"!==typeof l?l:!0===l?a:!1})(a,b)};_.nonempty=function(a){return _.filter2(a,_.isNonempty)};_.extend(_,{clone:function(a){return a instanceof Set?
new Set(a):_.isObject(a)?_.isArray(a)?a.slice():_.extend({},a):a},cloneDeep:_.tails2(_.mapMap,function(a){return _.isStrictlyObject(a)&&!_.isPrototypeInstance(a)?_.clone(a):a})});_.hyperMatch=_.hyperOperator(_.binary,function(a,b,e){return _.coerceToUndefined(_.nonempty(_.zip2(a,b,e)))});_.diff=_.tails3(_.hyperMatch,function(a,b){return $atom.unwrap(a)===$atom.unwrap(b)||a===$any||b===$any?void 0:b});_.hyperMatch=_.hyperOperator(_.binary,function(a,b,e){return _.coerceToUndefined(_.zip2(a,b,e))});
_.undiff=_.tails3(_.hyperMatch,function(a,b){return $atom.unwrap(a)===$atom.unwrap(b)||a===$any||b===$any?b:void 0});_.extend(_,{index:function(a){for(var b={},e=0,f=a.length;e<f;e++)b[a[e]]=!0;return b}});_.quote=function(a,b){var e=b||"",f=Math.floor(e.length/2+e.length%2),k=e.slice(0,f),e=e.slice(f)||k;return k+a+e};_.quoteWith=_.flip2(_.quote);_.quotesWith=_.higherOrder(_.quoteWith);_.partition2=function(a,b){return _.pluck(_.partition3(a,b),"items")};_.partition3=function(a,b){var e=a||[],f=
[],k={label:void 0,items:[e.first]};_.each(e,function(a){var c=b(a);k.label!=c&&k.items.length?f.push(k={label:c,items:[a]}):k.items.push(a)});return k.length&&f.push(k),f};(function(){var a=function(a){var b={};_.each(a,function(a,c){b[a]=b[a]||[];b[a].push(c)});return b};_.longestCommonSubstring=function(a,b){var c=_.indexOfLongestCommonSubstring(a,b);return c.length?a.substr(c.a,c.length):void 0};_.indexOfLongestCommonSubstring=function(b,e){var f={a:0,b:0,length:0},k=a(b),h=[];_.each(e,function(a,
b){var c,d=[];_.each(k[a]||[],function(a){c=(a&&h[a-1]||0)+1;c>f.length&&(f.length=c,f.a=a-c+1,f.b=b-c+1);d[a]=c});h=d});return f}})();_.key=function(a){return function(b,e){return a(e)}};_.pickKeys=function(a,b){return _.pick(a,function(a,c){return b(c)})}},function(h,l,b){var a=b(1);_.isTypeOf=function(a,b){return b instanceof a};_.isPrototypeInstance=function(a){return a&&a.constructor&&_.isPrototypeConstructor(a.constructor)};_.isPrototypeConstructor=function(a){return a&&void 0!==a.$definition||
!1};_.coerceToNaN=function(a){return _.isFinite(a)?a:Number.NaN};_.coerceToArray=function(a){return void 0===a?[]:_.isArray(a)?a:[a]};_.coerceToFunction=function(a){return _.isFunction(a)?a:_.constant(a)};_.isArrayLike=function(a){return a instanceof Array||$platform.Browser&&a instanceof NodeList};_.isArray=function(a){return a instanceof Array};_.mixin({matches:function(a){return 0===arguments.length&&_.constant(!0)||_.tails2(_.match,a)},match:function(a,b){return a===b||_.isArray(a)&&_.isArray(b)&&
_.arrayMatch(a,b)||_.isObject(a)&&_.isObject(b)&&_.objectMatch(a,b)||_.isTypeOf(RegExp,b)&&_.isString(a)&&null!==a.match(b)},arrayMatch:function(a,b){return _.every(b,_.propertyOf(_.index(a)))},objectMatch:function(b,d){return _.reduce(a.entries(d),function(a,d){return a&&_.match(b[d[0]],d[1])},!0)}});_.isScalar=function(a){return void 0===a||null===a||a.constructor===String||a.constructor===Number||a.constructor===Boolean};_.isNonPOD=function(a){return!_.isPOD(a)};_.isPOD=function(a){return _.isScalar(a)||
a&&(a.constructor===Object||a.constructor===Array)};_.extend(_,{isEmpty:function(a){return void 0===_.coerceToUndefined(a)},isNonempty:function(a){return void 0!==_.coerceToUndefined(a)},isEmptyObject:function(a){return!_.isArray(a)&&!_.isFunction(a)&&_.isObject(a)&&0===_.keys(a).length},isStrictlyObject:function(a){return a&&"object"===typeof a?!0:!1},isEmptyArray:function(a){return _.isArray(a)&&0===a.length},isNonemptyString:function(a){return"string"===typeof a&&0<a.length},coerceToObject:function(a){return _.isStrictlyObject(a)?
a:{}},coerceToEmpty:function(a){if(_.isArray(a))return[];if(_.isStrictlyObject(a))return{}},coerceToUndefined:function(a){return void 0===a||null===a||a===Math.NaN||""===a||_.isPOD(a)&&(_.isEmptyObject(a)||0===a.length)?void 0:a}})},function(h,l){_.hasTypeMatch=!0;Tags.define("required");Tags.define("atom");$global["const"]("$any",_.identity);(function(){_.isMeta=function(a){return a===$any||!0===$atom.is(a)||!0===$required.is(a)};var b=function(a,b,c){var d=Tags.unwrapAll(_.filter2(a,$required.matches));
a=_.nonempty(_.zip2(Tags.unwrapAll(a),b,c));if(_.isEmpty(d))return a;c=_.nonempty(_.zip2(d,b,c));return _.values2(d).length===_.values2(c).length?a:_.coerceToEmpty(b)},a=_.hyperOperator(_.binary,function(a,c,d){var h=Tags.unwrap(a);if(_.isArray(h)){if(_.isArray(c))return b(_.times(c.length,_.constant(h[0])),c,d)}else if(_.isStrictlyObject(h)&&h["*"]){if(_.isStrictlyObject(c))return b(_.extend(_.map2(c,_.constant(h["*"])),_.omit(h,"*")),c,d)}else return b(a,c,d)}),c=function(a,b){var c=Tags.unwrap(a);
return c===$any||void 0===c&&void 0===b||_.isFunction(c)&&(_.isPrototypeConstructor(c)?_.isTypeOf(c,b):!0===c(b))||typeof b===c||b===c};_.mismatches=function(b,c,d){return a(c,d,function(a,c){return b(a,c)?void 0:a})};_.omitMismatches=function(b,c,d){return a(c,d,function(a,c){return b(a,c)?c:void 0})};_.typeMismatches=_.partial(_.mismatches,c);_.omitTypeMismatches=_.partial(_.omitMismatches,c);_.valueMismatches=_.partial(_.mismatches,function(a,b){return a===$any||b===$any||a===b});var d=function(a){if(_.isArray(a))return _.nonempty([_.reduce(a.slice(1),
function(a,b){return _.undiff(a,b)},_.first(a)||void 0)]);if(_.isStrictlyObject(a)){var b=_.pairs(a),b=_.map(_.reduce(b.slice(1),function(a,b){return _.undiff(a,b)},_.first(b)||[void 0,void 0]),_.nonempty);return _.isEmpty(b)||_.isEmpty(b[1])?a:_.fromPairs([[b[0]||"*",b[1]]])}return a};_.decideType=function(a){return _.hyperOperator(_.unary,function(a,b){return a&&a.constructor&&a.constructor.$definition?a.constructor:d(_.map2(a,b))})(a,function(a){return _.isPrototypeInstance(a)?a.constructor:_.isEmptyArray(a)?
a:typeof a})}})()},function(h,l){$global.DOMReference=$trait({domReady:$barrier(function(b){this.dom=b;"undefined"!==typeof jQuery&&(this.el=jQuery(this.dom))}),afterDestroy:function(){this.dom&&(this.dom.removeFromParent(),this.el=this.dom=void 0);this.domReady.reset()}});$global.DOMReferenceWeak=$trait({domReady:$barrier(function(b){this.dom=b}),afterDestroy:function(){this.dom=void 0}});$global.DOMEvents=$trait({dispatchEvent:function(b){this.domReady(function(a){var c=document.createEvent("Event");
c.initEvent(b,!0,!0);a.dispatchEvent(c)})},$macroTags:{on:function(b,a,c){var d=b.constructor.DOMEventListeners||(b.constructor.DOMEventListeners=[]),e=a.$on,e=_.isString(e)?{fn:c,e:e}:_.isObject(e)?{fn:c,e:e.what,target:e.target}:{fn:c,e:c};_.each(e.e.split(" "),function(a){d.push(_.defaults({e:a},e))})}},domReady:function(b){_.each(this.constructor.DOMEventListeners,function(a){(a.target||b).addEventListener(a.e,this[a.fn])},this)},beforeDestroy:function(){this.domReady(function(b){_.each(this.constructor.DOMEventListeners,
function(a){(a.target||b).removeEventListener(a.e,this[a.fn])},this)})}});$global.HideOnEscape=$trait({hideOnEscape:$on({what:"keydown",target:document},function(b){27===b.keyCode&&(this.destroy(),b.preventDefault())})})},function(h,l){$global.InertialValue=$component({$defaults:{duration:.2,easing:"linear"},animating:$observableProperty(!1),target:$observableProperty(),value:$observableProperty(),init:function(b){var a=this;this.easing=(this.value instanceof Vec2?Easing.vector:Easing.scalar)[this.easing];
this.targetChange(function(b){void 0!==b&&(!1===a.animating?(a.start=a.value,a.target=b,a.startTime=Date.now(),a.step()):a.start=a.value)})},step:function(){var b=Date.now(),b=Math.min(1,((this.lastTime=b)-this.startTime)/(1E3*this.duration));1>b?(this.animating=!0,this.value=this.easing(this.start,this.target,b),requestAnimationFrame(this.step)):(this.value=this.target,this.animating=!1)}});$global.Easing={scalar:{linear:function(b,a,c){return b+(a-b)*c},"in":function(b,a,c){return b+(a-b)*Math.pow(c,
2)},out:function(b,a,c){return a-(a-b)*Math.pow(1-c,2)},inOut:function(b,a,c){var d=a-b;return.5>c?b+.5*d*Math.pow(2*c,2):a-.5*d*Math.pow(2-2*c,2)}},vector:{linear:function(b,a,c){return b.add(a.sub(b).scale(c))},"in":function(b,a,c){return b.add(a.sub(b).scale(Math.pow(c,2)))},out:function(b,a,c){return a.sub(a.sub(b).scale(Math.pow(1-c,2)))},inOut:function(b,a,c){var d=a.sub(b);return.5>c?b.add(d.scale(.5*Math.pow(2*c,2))):a.sub(d.scale(.5*Math.pow(2-2*c,2)))}}}},function(h,l){var b=function(a){return function(){return this.tagName===
a}};$global.N=function(a,b){var d=document.createElement(a.uppercase);return b?d.append(b):d};N.text=function(a){return document.createTextNode(a)};_.each("br p div em a b i u s strong span sup sub button iframe pre img video source h1 h2 h3 h4 h5 textarea input style".split(" "),function(a){var b=a.uppercase;_.defineProperty(N,a,function(){return document.createElement(b)})});N.all=document.querySelectorAll.bind(document);N.one=document.querySelector.bind(document);$mixin(Node,{$:$prototype.impl.$,
$callableAsFreeFunction:{$property:{isElement:function(){return this.nodeType===Node.ELEMENT_NODE},isText:function(){return this.nodeType===Node.TEXT_NODE},isLinebreak:b("BR"),isDiv:b("DIV"),isParagraph:b("P"),isHyperlink:b("A"),isAttachedToDocument:function(){return this.matchUpwards(_.equals(document.body))?!0:!1},forbidsEditing:function(){return this.nodeType===Node.ELEMENT_NODE&&"false"===this.getAttribute("contenteditable")}}},grandParentNode:$property(function(){return this.parentNode&&this.parentNode.parentNode}),
isFirstInParent:$property(function(){return this.parentNode&&this.parentNode.firstChild===this}),isLastInParent:$property(function(){return this.parentNode&&this.parentNode.lastChild===this}),removeFromParent:$callableAsFreeFunction(function(){this.parentNode.removeChild(this);return this}),outerLeftBoundaryIn:function(a){for(var b=this;b.grandParentNode&&b.parentNode!==a&&b.isFirstInParent;)b=b.parentNode;return b},outerRightBoundaryIn:function(a){for(var b=this;b.grandParentNode&&b.parentNode!==
a&&b.isLastInParent;)b=b.parentNode;return b},matchUpwards:function(a){for(var b=this;b&&!a(b);)b=b.parentNode;return b},isLeftmostNodeIn:function(a){return a&&this.matchUpwards(function(b){return b===a||!b.isFirstInParent})===a},isRightmostNodeIn:function(a){return a&&this.matchUpwards(function(b){return b===a||!b.isLastInParent})===a},hasChildren:$property(function(){return this.hasChildNodes()}),noChildren:$property(function(){return!this.hasChildNodes()}),numChildren:$property(function(){return this.childNodes.length}),
length:$property(function(){return this.childNodes?this.childNodes.length:this.nodeValue?this.nodeValue.length:0}),safeEnumChildren:function(a,b){_.each(this.childNodesArray,a,b||this);return this},childNodesArray:$property(function(){return _.asArray(this.childNodes)}),add:$alias("appendChildren"),append:$alias("appendChildren"),appendChildren:function(a,b){for(var d=void 0===b?_.coerceToArray(a):arguments,e=0,f=d.length;e<f;e++){var h=d[e];this.appendChild(_.isString(h)?document.createTextNode(h):
h)}return this},removeChildren:function(a){a=_.coerceToArray(a);for(var b=0,d=a.length;b<d;b++)this.removeChild(a[b]);return this},removeAllChildren:function(){return this.removeChildren(this.childNodesArray)},walkTree:function(a,b){b=1===arguments.length?a:b;for(var d=document.createTreeWalker(this,a&&a.what||NodeFilter.SHOW_ALL,a&&a.filter||null,a&&a.entityReferenceExpansion||null);node=d.nextNode();)b(node)},firstInnermostChild:$callableAsMethod($property(function(a){for(;a&&a.firstChild;)a=a.firstChild;
return a})),unwrapChildren:$callableAsFreeFunction(function(){this.insertAfterMe(this.childNodesArray);var a=this.parentNode;a.removeChild(this);return a}),prevSiblings:$property(function(){for(var a=[],b=this.previousSibling;b;)a.push(b),b=b.previousSibling;return a.reversed}),nextNextSibling:$property(function(){return this.nextSibling&&this.nextSibling.nextSibling}),nextOutermostSibling:$callableAsMethod($property(function(a){for(;a&&!a.nextSibling;)a=a.parentNode;a&&(a=a.nextSibling);return a})),
nextInnermostSibling:$callableAsMethod($property(function(a){return Node.firstInnermostChild(Node.nextOutermostSibling(this))})),appendTo:function(a){a.appendChild(this);return this},prependTo:function(a){a.insertBefore(this,a.firstChild);return this},replaceWith:function(a){this.insertBeforeMe(a).removeFromParent()},insertMeBefore:function(a){a.parentNode.insertBefore(this,a);return this},insertMeAfter:function(a){a.parentNode.insertBefore(this,a.nextSibling);return this},insertBeforeMe:function(a){var b=
this.parentNode,d=this;_.each(_.coerceToArray(a).reversed,function(a){b.insertBefore(a,d)});return this},insertAfterMe:function(a){var b=this.parentNode,d=this.nextSibling;_.each(_.coerceToArray(a).reversed,function(a){b.insertBefore(a,d)});return this},on:function(a,b){this.addEventListener(a,b);return this},once:function(a){var b=this,d,e=!1,f=new Promise(function(f){b.addEventListener(a,d=function(a){e||(e=!0,b.removeEventListener(a,d),f(a))})});f.finalize=d;return f},touched:function(a){return this.on($platform.touch?
"touchstart":"click",a)},extend:function(a){return _.extend(this,a)},cls:function(a){this.className=a;return this},css:function(a){_.extend(this.style,a);return this},hasClass:function(a){return(this.className||"").split(" ").contains(a)},toggleAttribute:function(a,b){var d=2>arguments.length;d&&(b=!this.hasAttribute(a));b?this.setAttribute(a,b):this.removeAttribute(a);return d?b:this},toggleAttributes:function(a){_.map(a,_.flip2(this.toggleAttribute),this);return this},setAttributes:function(a){_.map(a,
_.flip2(this.setAttribute),this);return this},intAttribute:function(a){return(this.getAttribute(a)||"").parsedInt},attr:$alias("setAttributes"),removeAttr:function(a){this.removeAttribute(a);return this},splitSubtreeBefore:function(a){return a&&a.parentNode!==this?this.splitSubtreeBefore(a.previousSibling?document.createElement(a.parentNode.tagName).insertMeBefore(a.parentNode).appendChildren(a.prevSiblings).nextSibling:a.parentNode):a},splitSubtreeAt:function(a){var b=a.node,d=a.offset;return 0<
d?a.node.isText?this.splitSubtreeBefore(N.text(b.nodeValue.substr(d)).insertMeAfter(_.extend(b,{nodeValue:b.nodeValue.substr(0,d)}))):this.splitSubtreeBefore(b.childNodes[d]):this.splitSubtreeBefore(b)},html:function(a){this.innerHTML=a;return this},text:function(a){this.innerText=a;return this},attributeUntil:function(a,b){this.setAttribute(a,!0);return b.done(this.$(function(b,c){this.removeAttribute(a)}))},busyUntil:function(a){return this.attributeUntil("busy",a)},onceAnimationEnd:$property(function(){return this.once($platform.WebKit?
"webkitAnimationEnd":"animationend")}),onceTransitionEnd:$property(function(){return this.once($platform.WebKit?"webkitTransitionEnd":"transitionend")}),animateWithAttribute:function(a){if(this.hasAttribute(a)&&this._onceAnimationEnd)return this._onceAnimationEnd;this._onceAnimationEnd&&this._onceAnimationEnd.finalize();this.setAttribute(a,!0);this._onceAnimationEnd=this.onceAnimationEnd;return this._onceAnimationEnd.then(this.$(function(){this.removeAttribute(a);this.getBoundingClientRect();this._onceAnimationEnd=
void 0}))},animatedWithAttribute:function(a){this.animateWithAttribute(a);return this}});$mixin(Element,{all:Element.prototype.querySelectorAll,one:Element.prototype.querySelector,append:Node.prototype.append,clientBBox:$property(function(){return BBox.fromLTWH(this.getBoundingClientRect())}),bbox:$property(function(){return this.clientBBox.offset(document.bbox.leftTop)}),setWidthHeight:function(a){this.style.width=a.x+"px";this.style.height=a.y+"px";return this},setTransform:function(a){this.transform=
a;return this},transform:$property({get:function(){var a=(this.css("transform")||"").match(/^matrix\((.+\))$/);return a?(a=a[1].split(",").map(parseFloat),new Transform({a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]})):Transform.identity},set:function(a){this.style.transform=_.isStrictlyObject(a)&&(a.translate?"translate("+a.translate.x.toFixed(0)+"px,"+a.translate.y.toFixed(0)+"px) ":"")+(a.rotate?"rotate("+a.rotate+"rad) ":"")+(a.scale?"scale("+(new Vec2(a.scale)).separatedWith(",")+")":"")||""}}),
reads:function(a,b){a(this.$(function(a){a=(b||_.identity).call(this,a);this.removeAllChildren();this.add(a instanceof Node?a:a+"")}));return this},$toggleAttribute:function(a,b){b(this.$(function(b){this.toggleAttribute(a,b)}));return this},$add:function(a){if(a instanceof Promise){var b=document.createElement("PROMISE");this.appendChild(b);a.then(function(a){b.replaceWith(a)}).panic}else this.add(a);return this}});$mixin(HTMLInputElement,{$value:$property(function(){this._observableValue||(this._observableValue=
_.observable(this.value),this._observableValue.context=this,this.on("input",this.$(function(){this._observableValue(this.value)})));return this._observableValue})});$mixin(Image,{fetch:$static(function(a){return new Promise(function(b,d){_.extend(new Image,{src:a,onload:function(){b(this)},onerror:function(a){d(a)}})})})});_.defineProperties(document,{bbox:function(){return this.clientBBox.offset(Vec2.xy(window.pageXOffset,window.pageYOffset))},clientBBox:function(){return BBox.fromLTWH(0,0,window.innerWidth||
document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight)}});document.on("DOMContentLoaded",document.ready=_.barrier())},function(h,l){h.exports="object"===typeof Reflect&&"function"===typeof Reflect.ownKeys?Reflect.ownKeys:"function"===typeof Object.getOwnPropertySymbols?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames},function(h,l){function b(a,b){function d(l,m,v){if(0<=v.indexOf(l))throw Error("Cyclic dependency: "+
JSON.stringify(l));if(!~a.indexOf(l))throw Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(l));if(!h[m]){h[m]=!0;var y=b.filter(function(a){return a[0]===l});if(m=y.length){v=v.concat(l);do{var q=y[--m][1];d(q,a.indexOf(q),v)}while(m)}f[--e]=l}}for(var e=a.length,f=Array(e),h={},l=e;l--;)h[l]||d(a[l],l,[]);return f}h.exports=l=function(a){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];0>c.indexOf(f[0])&&c.push(f[0]);0>c.indexOf(f[1])&&c.push(f[1])}return b(c,
a)};l.array=b},function(h,l,b){var a,c;(function(){function b(a){return function(b,c,d,e){c=B(c,e,4);var f=!w(b)&&g.keys(b),h=(f||b).length,k=0<a?0:h-1;3>arguments.length&&(d=b[f?f[k]:k],k+=a);for(var l=c,m=d;0<=k&&k<h;k+=a)var n=f?f[k]:k,m=l(m,b[n],n,b);return m}}function e(a){return function(b,c,d){c=u(c,d);d=z(b);for(var e=0<a?0:d-1;0<=e&&e<d;e+=a)if(c(b[e],e,b))return e;return-1}}function f(a,b,c){return function(d,e,f){var h=0,k=z(d);if("number"==typeof f)0<a?h=0<=f?f:Math.max(f+k,h):k=0<=f?
Math.min(f+1,k):f+k+1;else if(c&&f&&k)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(q.call(d,h,k),g.isNaN),0<=f?f+h:-1;for(f=0<a?h:k-1;0<=f&&f<k;f+=a)if(d[f]===e)return f;return-1}}function k(a,b){var c=L.length,d=a.constructor,d=g.isFunction(d)&&d.prototype||v,e="constructor";for(g.has(a,e)&&!g.contains(b,e)&&b.push(e);c--;)e=L[c],e in a&&a[e]!==d[e]&&!g.contains(b,e)&&b.push(e)}var m=this,n=m._,p=Array.prototype,v=Object.prototype,y=p.push,q=p.slice,t=v.toString,r=v.hasOwnProperty,x=Array.isArray,
M=Object.keys,F=Function.prototype.bind,O=Object.create,G=function(){},g=function(a){if(a instanceof g)return a;if(!(this instanceof g))return new g(a);this._wrapped=a};"undefined"!==typeof h&&h.exports&&(l=h.exports=g);l._=g;g.VERSION="1.8.3";var B=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,
c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?g.identity:g.isFunction(a)?B(a,b,c):g.isObject(a)?g.matcher(a):g.property(a)};g.iteratee=function(a,b){return u(a,b,Infinity)};var C=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,k=0;k<h;k++){var l=g[k];b&&void 0!==c[l]||(c[l]=f[l])}return c}},P=function(a){if(!g.isObject(a))return{};if(O)return O(a);G.prototype=
a;a=new G;G.prototype=null;return a},D=function(a){return function(b){return null==b?void 0:b[a]}},T=Math.pow(2,53)-1,z=D("length"),w=function(a){a=z(a);return"number"==typeof a&&0<=a&&a<=T};g.each=g.forEach=function(a,b,c){b=B(b,c);var d;if(w(a))for(c=0,d=a.length;c<d;c++)b(a[c],c,a);else{var e=g.keys(a);c=0;for(d=e.length;c<d;c++)b(a[e[c]],e[c],a)}return a};g.map=g.collect=function(a,b,c){b=u(b,c);c=!w(a)&&g.keys(a);for(var d=(c||a).length,e=Array(d),f=0;f<d;f++){var h=c?c[f]:f;e[f]=b(a[h],h,a)}return e};
g.reduce=g.foldl=g.inject=b(1);g.reduceRight=g.foldr=b(-1);g.find=g.detect=function(a,b,c){b=w(a)?g.findIndex(a,b,c):g.findKey(a,b,c);if(void 0!==b&&-1!==b)return a[b]};g.filter=g.select=function(a,b,c){var d=[];b=u(b,c);g.each(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d};g.reject=function(a,b,c){return g.filter(a,g.negate(u(b)),c)};g.every=g.all=function(a,b,c){b=u(b,c);c=!w(a)&&g.keys(a);for(var d=(c||a).length,e=0;e<d;e++){var f=c?c[e]:e;if(!b(a[f],f,a))return!1}return!0};g.some=g.any=function(a,
b,c){b=u(b,c);c=!w(a)&&g.keys(a);for(var d=(c||a).length,e=0;e<d;e++){var f=c?c[e]:e;if(b(a[f],f,a))return!0}return!1};g.contains=g.includes=g.include=function(a,b,c,d){w(a)||(a=g.values(a));if("number"!=typeof c||d)c=0;return 0<=g.indexOf(a,b,c)};g.invoke=function(a,b){var c=q.call(arguments,2),d=g.isFunction(b);return g.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})};g.pluck=function(a,b){return g.map(a,g.property(b))};g.where=function(a,b){return g.filter(a,g.matcher(b))};g.findWhere=
function(a,b){return g.find(a,g.matcher(b))};g.max=function(a,b,c){var d=-Infinity,e=-Infinity,f;if(null==b&&null!=a){a=w(a)?a:g.values(a);for(var h=0,k=a.length;h<k;h++)c=a[h],c>d&&(d=c)}else b=u(b,c),g.each(a,function(a,c,E){f=b(a,c,E);if(f>e||-Infinity===f&&-Infinity===d)d=a,e=f});return d};g.min=function(a,b,c){var d=Infinity,e=Infinity,f;if(null==b&&null!=a){a=w(a)?a:g.values(a);for(var h=0,k=a.length;h<k;h++)c=a[h],c<d&&(d=c)}else b=u(b,c),g.each(a,function(a,c,E){f=b(a,c,E);if(f<e||Infinity===
f&&Infinity===d)d=a,e=f});return d};g.shuffle=function(a){a=w(a)?a:g.values(a);for(var b=a.length,c=Array(b),d=0,e;d<b;d++)e=g.random(0,d),e!==d&&(c[d]=c[e]),c[e]=a[d];return c};g.sample=function(a,b,c){return null==b||c?(w(a)||(a=g.values(a)),a[g.random(a.length-1)]):g.shuffle(a).slice(0,Math.max(0,b))};g.sortBy=function(a,b,c){b=u(b,c);return g.pluck(g.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;
if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var H=function(a){return function(b,c,d){var e={};c=u(c,d);g.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)});return e}};g.groupBy=H(function(a,b,c){g.has(a,c)?a[c].push(b):a[c]=[b]});g.indexBy=H(function(a,b,c){a[c]=b});g.countBy=H(function(a,b,c){g.has(a,c)?a[c]++:a[c]=1});g.toArray=function(a){return a?g.isArray(a)?q.call(a):w(a)?g.map(a,g.identity):g.values(a):[]};g.size=function(a){return null==a?0:w(a)?a.length:g.keys(a).length};g.partition=
function(a,b,c){b=u(b,c);var d=[],e=[];g.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)});return[d,e]};g.first=g.head=g.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:g.initial(a,a.length-b)};g.initial=function(a,b,c){return q.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};g.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.rest(a,Math.max(0,a.length-b))};g.rest=g.tail=g.drop=function(a,b,c){return q.call(a,null==b||c?1:b)};g.compact=function(a){return g.filter(a,
g.identity)};var A=function(a,b,c,d){var e=[],f=0;d=d||0;for(var h=z(a);d<h;d++){var k=a[d];if(w(k)&&(g.isArray(k)||g.isArguments(k))){b||(k=A(k,b,c));var l=0,m=k.length;for(e.length+=m;l<m;)e[f++]=k[l++]}else c||(e[f++]=k)}return e};g.flatten=function(a,b){return A(a,b,!1)};g.without=function(a){return g.difference(a,q.call(arguments,1))};g.uniq=g.unique=function(a,b,c,d){g.isBoolean(b)||(d=c,c=b,b=!1);null!=c&&(c=u(c,d));d=[];for(var e=[],f=0,h=z(a);f<h;f++){var k=a[f],l=c?c(k,f,a):k;b?(f&&e===
l||d.push(k),e=l):c?g.contains(e,l)||(e.push(l),d.push(k)):g.contains(d,k)||d.push(k)}return d};g.union=function(){return g.uniq(A(arguments,!0,!0))};g.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);d<e;d++){var f=a[d];if(!g.contains(b,f)){for(var h=1;h<c&&g.contains(arguments[h],f);h++);h===c&&b.push(f)}}return b};g.difference=function(a){var b=A(arguments,!0,!0,1);return g.filter(a,function(a){return!g.contains(b,a)})};g.zip=function(){return g.unzip(arguments)};g.unzip=function(a){for(var b=
a&&g.max(a,z).length||0,c=Array(b),d=0;d<b;d++)c[d]=g.pluck(a,d);return c};g.object=function(a,b){for(var c={},d=0,e=z(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};g.findIndex=e(1);g.findLastIndex=e(-1);g.sortedIndex=function(a,b,c,d){c=u(c,d,1);b=c(b);d=0;for(var e=z(a);d<e;){var f=Math.floor((d+e)/2);c(a[f])<b?d=f+1:e=f}return d};g.indexOf=f(1,g.findIndex,g.sortedIndex);g.lastIndexOf=f(-1,g.findLastIndex);g.range=function(a,b,c){null==b&&(b=a||0,a=0);c=c||1;b=Math.max(Math.ceil((b-a)/
c),0);for(var d=Array(b),e=0;e<b;e++,a+=c)d[e]=a;return d};var Q=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);b=P(a.prototype);a=a.apply(b,e);return g.isObject(a)?a:b};g.bind=function(a,b){if(F&&a.bind===F)return F.apply(a,q.call(arguments,1));if(!g.isFunction(a))throw new TypeError("Bind must be called on a function");var c=q.call(arguments,2),d=function(){return Q(a,d,b,this,c.concat(q.call(arguments)))};return d};g.partial=function(a){var b=q.call(arguments,1),c=function(){for(var d=
0,e=b.length,f=Array(e),h=0;h<e;h++)f[h]=b[h]===g?arguments[d++]:b[h];for(;d<arguments.length;)f.push(arguments[d++]);return Q(a,c,this,this,f)};return c};g.bindAll=function(a){var b,c=arguments.length,d;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)d=arguments[b],a[d]=g.bind(a[d],a);return a};g.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);g.has(e,f)||(e[f]=a.apply(this,arguments));return e[f]};c.cache={};return c};g.delay=
function(a,b){var c=q.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};g.defer=g.partial(g.delay,g,1);g.throttle=function(a,b,c){var d,e,f,h=null,k=0;c||(c={});var l=function(){k=!1===c.leading?0:g.now();h=null;f=a.apply(d,e);h||(d=e=null)};return function(){var m=g.now();k||!1!==c.leading||(k=m);var n=b-(m-k);d=this;e=arguments;0>=n||n>b?(h&&(clearTimeout(h),h=null),k=m,f=a.apply(d,e),h||(d=e=null)):h||!1===c.trailing||(h=setTimeout(l,n));return f}};g.debounce=function(a,
b,c){var d,e,f,h,k,l=function(){var m=g.now()-h;m<b&&0<=m?d=setTimeout(l,b-m):(d=null,c||(k=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;h=g.now();var m=c&&!d;d||(d=setTimeout(l,b));m&&(k=a.apply(f,e),f=e=null);return k}};g.wrap=function(a,b){return g.partial(b,a)};g.negate=function(a){return function(){return!a.apply(this,arguments)}};g.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}};
g.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};g.before=function(a,b){var c;return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=null);return c}};g.once=g.partial(g.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),L="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");g.keys=function(a){if(!g.isObject(a))return[];if(M)return M(a);var b=[],c;for(c in a)g.has(a,c)&&b.push(c);S&&k(a,b);return b};g.allKeys=
function(a){if(!g.isObject(a))return[];var b=[],c;for(c in a)b.push(c);S&&k(a,b);return b};g.values=function(a){for(var b=g.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};g.mapObject=function(a,b,c){b=u(b,c);c=g.keys(a);for(var d=c.length,e={},f,h=0;h<d;h++)f=c[h],e[f]=b(a[f],f,a);return e};g.pairs=function(a){for(var b=g.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};g.invert=function(a){for(var b={},c=g.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b};
g.functions=g.methods=function(a){var b=[],c;for(c in a)g.isFunction(a[c])&&b.push(c);return b.sort()};g.extend=C(g.allKeys);g.extendOwn=g.assign=C(g.keys);g.findKey=function(a,b,c){b=u(b,c);c=g.keys(a);for(var d,e=0,f=c.length;e<f;e++)if(d=c[e],b(a[d],d,a))return d};g.pick=function(a,b,c){var d={},e=a,f,h;if(null==e)return d;g.isFunction(b)?(h=g.allKeys(e),f=B(b,c)):(h=A(arguments,!1,!1,1),f=function(a,b,c){return b in c},e=Object(e));for(var k=0,l=h.length;k<l;k++){var m=h[k],n=e[m];f(n,m,e)&&(d[m]=
n)}return d};g.omit=function(a,b,c){if(g.isFunction(b))b=g.negate(b);else{var d=g.map(A(arguments,!1,!1,1),String);b=function(a,b){return!g.contains(d,b)}}return g.pick(a,b,c)};g.defaults=C(g.allKeys,!0);g.create=function(a,b){var c=P(a);b&&g.extendOwn(c,b);return c};g.clone=function(a){return g.isObject(a)?g.isArray(a)?a.slice():g.extend({},a):a};g.tap=function(a,b){b(a);return a};g.isMatch=function(a,b){var c=g.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var h=c[f];if(b[h]!==
e[h]||!(h in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof g&&(a=a._wrapped);b instanceof g&&(b=b._wrapped);var e=t.call(a);if(e!==t.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}e="[object Array]"===e;if(!e){if("object"!=typeof a||"object"!=typeof b)return!1;
var f=a.constructor,h=b.constructor;if(f!==h&&!(g.isFunction(f)&&f instanceof f&&g.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];d=d||[];for(f=c.length;f--;)if(c[f]===a)return d[f]===b;c.push(a);d.push(b);if(e){f=a.length;if(f!==b.length)return!1;for(;f--;)if(!I(a[f],b[f],c,d))return!1}else{e=g.keys(a);f=e.length;if(g.keys(b).length!==f)return!1;for(;f--;)if(h=e[f],!g.has(b,h)||!I(a[h],b[h],c,d))return!1}c.pop();d.pop();return!0};g.isEqual=function(a,b){return I(a,
b)};g.isEmpty=function(a){return null==a?!0:w(a)&&(g.isArray(a)||g.isString(a)||g.isArguments(a))?0===a.length:0===g.keys(a).length};g.isElement=function(a){return!(!a||1!==a.nodeType)};g.isArray=x||function(a){return"[object Array]"===t.call(a)};g.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};g.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){g["is"+a]=function(b){return t.call(b)==="[object "+a+"]"}});g.isArguments(arguments)||(g.isArguments=
function(a){return g.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(a){return"function"==typeof a||!1});g.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};g.isNaN=function(a){return g.isNumber(a)&&a!==+a};g.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===t.call(a)};g.isNull=function(a){return null===a};g.isUndefined=function(a){return void 0===a};g.has=function(a,b){return null!=a&&r.call(a,b)};g.noConflict=function(){m._=
n;return this};g.identity=function(a){return a};g.constant=function(a){return function(){return a}};g.noop=function(){};g.property=D;g.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};g.matcher=g.matches=function(a){a=g.extendOwn({},a);return function(b){return g.isMatch(b,a)}};g.times=function(a,b,c){var d=Array(Math.max(0,a));b=B(b,c,1);for(c=0;c<a;c++)d[c]=b(c);return d};g.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};g.now=Date.now||
function(){return(new Date).getTime()};x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};C=g.invert(x);D=function(a){var b=function(b){return a[b]},c="(?:"+g.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){a=null==a?"":""+a;return d.test(a)?a.replace(e,b):a}};g.escape=D(x);g.unescape=D(C);g.result=function(a,b,c){b=null==a?void 0:a[b];void 0===b&&(b=c);return g.isFunction(b)?b.call(a):b};var U=0;g.uniqueId=function(a){var b=++U+"";return a?a+b:b};g.templateSettings=
{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,X=function(a){return"\\"+V[a]};g.template=function(a,b,c){!b&&c&&(b=c);b=g.defaults({},b,g.templateSettings);c=RegExp([(b.escape||J).source,(b.interpolate||J).source,(b.evaluate||J).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,c,f,g,h){e+=a.slice(d,h).replace(W,X);d=h+b.length;
c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?e+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(e+="';\n"+g+"\n__p+='");return b});e+="';\n";b.variable||(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(h){throw h.source=e,h;}c=function(a){return f.call(this,a,g)};c.source="function("+(b.variable||"obj")+"){\n"+e+"}";return c};g.chain=function(a){a=
g(a);a._chain=!0;return a};var K=function(a,b){return a._chain?g(b).chain():b};g.mixin=function(a){g.each(g.functions(a),function(b){var c=g[b]=a[b];g.prototype[b]=function(){var a=[this._wrapped];y.apply(a,arguments);return K(this,c.apply(g,a))}})};g.mixin(g);g.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=p[a];g.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||delete c[0];return K(this,c)}});g.each(["concat",
"join","slice"],function(a){var b=p[a];g.prototype[a]=function(){return K(this,b.apply(this._wrapped,arguments))}});g.prototype.value=function(){return this._wrapped};g.prototype.valueOf=g.prototype.toJSON=g.prototype.value;g.prototype.toString=function(){return""+this._wrapped};!(a=[],c=function(){return g}.apply(l,a),void 0!==c&&(h.exports=c))}).call(this)},function(h,l){h.exports=function(b,a){var c=Array.isArray(a),d=c?a:a.split("\n"),e=b.replace(/[^\s]/g," "),d=d.map(function(a,c){return 0===
c?b+a:e+a});return c?d:d.join("\n")}},function(h,l,b){(function(a){a="undefined"===typeof window?a:window;a.$uselessFile="useless.client.js";a._=h.exports=b(3);_.tests={};_.deferTest=_.withTest=function(a,b,e){e()};b(2);b(25);b(21);b(23);b(22);b(28);b(27);b(26);b(24);b(29);b(4);b(19);b(17);b(16);b(18);b(13);b(14);b(6);b(20);b(7);b(10);b(12);b(11);b(9);b(8);b(5);b(15);b(32);b(30);b(31)}).call(l,b(0))}]);
