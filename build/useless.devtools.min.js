_.hasAsserts=!0;
_.extend(_,{tests:{},withTest:function(a,b,c){c();_.runTest(a,b);_.publishToTestsNamespace(a,b)},deferTest:function(a,b,c){c();_.publishToTestsNamespace(a,b)},runTest:function(a,b){try{_.isFunction(b)?b():_.each(b,function(a){a()})}catch(d){if(_.isAssertionError(d)){var c=(_.isArray(a)&&a||[a]).join(".");console.log(c+":",d.message,"\n"+_.times(c.length,_.constant("~")).join("")+"\n");_.each(d.notMatching,function(a){console.log("  \u2022",a)})}throw d;}},publishToTestsNamespace:function(a,b){_.isArray(a)?
(_.tests[a[0]]||(_.tests[a[0]]={}))[a[1]]=b:_.tests[a]=b}});
(function(){var a=function(a){return function(c){var d=[].splice.call(arguments,0);1===d.length?a&&!0!==d[0]&&_.assertionFailed({notMatching:d}):a&&!0!==_.allEqual(d)&&_.assertionFailed({notMatching:d});return!0}};$overrideUnderscore("matches",function(a){return function(c){return _.isObject(c)?a(c):function(a){return c===a}}});_.extend(_,_.assertions={assert:a(!0),assertNot:a(!1),assertCPS:function(a,c,d){var e=c&&(_.isArray(c)?c:[c])||[];a(function(){$assert([].splice.call(arguments,0),e);if(d)return d(),
!0})},assertNotCalled:function(a){var c=!0;a(function(){c&&$fail});c=!1},assertEveryCalledOnce:function(a,c){return _.assertEveryCalled(_.hasTags?$once(a):(a.once=!0,a),c)},assertEveryCalled:function(a,c){var d=_.hasTags?$untag(a):a,e=_.hasTags?$async.is(a):a.async,f=(once=_.hasTags?$once.is(a):a.once)?null:d.toString().match(/.*function[^\(]\(([^\)]+)\)/),g=once?_.times(d.length,_.constant(1)):_.map(f[1].split(","),function(a){return(a=a.trim().match(/^(.+)__(.+)$/))&&parseInt(a[2],10)||!0}),h=_.times(d.length,
_.constant(!1)),f=_.times(d.length,function(a){return function(){h[a]=_.isNumber(g[a])?(h[a]||0)+1:!0;e&&_.isEqual(h,g)&&c()}});d.apply(null,f);e||(_.assert(h,g),c&&c())},assertCalledWithArguments:function(a,c){return _.assert(_.arr(c),a)},assertCallOrder:function(a){var c=0,d=_.times(a.length,function(a){return function(){arguments.callee.callIndex=c++}});a.apply(null,d);return _.assert(_.pluck(d,"callIndex"),_.times(d.length,_.identity.arity1))},assertMatches:function(a,c){try{return _.assert(_.matches.apply(null,
_.rest(arguments))(a))}catch(d){throw _.isAssertionError(d)?_.extend(d,{notMatching:[a,c]}):d;}},assertNotMatches:function(a,c){try{return _.assert(!_.matches.apply(null,_.rest(arguments))(a))}catch(d){throw _.isAssertionError(d)?_.extend(d,{notMatching:[a,c]}):d;}},assertType:function(a,c){return _.assert(_.decideType(a),c)},assertTypeMatches:function(a,c){return _.isEmpty(mismatches=_.typeMismatches(c,a))?!0:_.assertionFailed({message:"provided value type not matches required contract",asColumns:!0,
notMatching:[{provided:a},{required:c},{mismatches:mismatches}]})},assertFails:function(a){return _.assertThrows.call(this,a,_.isAssertionError)},assertThrows:function(a,c){var d=void 0,e=!1;try{a.call(this)}catch(f){d=f,e=!0}_.assert.call(this,e);1<arguments.length&&_.assertMatches.call(this,d,c)},assertNotThrows:function(a){return _.assertEveryCalled(function(c){a();c()})},assertArguments:function(a,c,d){c=(c||a.callee).toString();var e=c.match(/.*function[^\(]\(([^\)]+)\)/);if(e){a=_.asArray(a);
var e=_.map(e[1].split(","),function(a){a="_"===a.trim()[0]?a.replace(/_/g," ").trim():void 0;var b=parseInt(a,10);return _.isFinite(b)?b:a}),f=_.zipWith([e,a],function(a,b){return void 0===a?!0:a===b});_.every(f)||_.assertionFailed({notMatching:_.nonempty([[d,c].join(": "),e,a])})}},fail:function(){_.assertionFailed()},fails:_.constant(function(){_.assertionFailed()}),stub:function(){_.assertionFailed()}});_.extend(_,{assertionError:function(a){return _.extend(Error(a&&a.message||"assertion failed"),
a,{assertion:!0})},assertionFailed:function(a){throw _.extend(_.assertionError(a),{stack:_.rest(Error().stack.split("\n"),3).join("\n")});},isAssertionError:function(a){return!0===a.assertion}});_.extend(_,{allEqual:function(a){return _.reduce(a,function(c,d){return c&&_.isEqual(a[0],d)},!0)}});_.each(_.keys(_.assertions),function(a){_.defineGlobalProperty("$"+a,_[a],{configurable:!0})})})();
(function(){_.hasUncaught=!0;var a=_.globalUncaughtExceptionHandler=function(a){var c=arguments.callee.chain;arguments.callee.chain=_.reject(c,_.property("catchesOnce"));if(c.length)for(var d=0,e=c.length;d<e;d++)try{c[d](a);break}catch(f){console.log(f);if(d===e-1)throw f.message+=" [re-thrown by a hook]",f;f&&"object"===typeof f&&(f.originalError=a);a=f}else throw a.message+=" [re-thrown by a hook]",a;};_.withUncaughtExceptionHandler=function(b,c){var d=c||_.identity;c&&(b.catchesOnce=!0);a.chain.unshift(b);
d(function(){a.chain.remove(b)})};a.chain=[];switch(Platform.engine){case "node":require("process").on("uncaughtException",a);break;case "browser":window.addEventListener("error",function(b){0>b.message.indexOf(" [re-thrown by a hook]")&&(b.error?a(b.error):a(_.extend(Error(b.message),{stub:!0,stack:"at "+b.filename+":"+b.lineno+":"+b.colno})))})}})();
(function(){if(Platform.Browser){_.hasUncaughtAsync=!0;var a=void 0,b=function(b,d){return __supressErrorReporting=function(){var e={name:name,stack:Error().stack,asyncContext:a},f=_.asArray(arguments),g=f[d];if(!_.isFunction(g))throw Error("[uncaughtAsync.js] callback should be a function");g.__uncaughtJS_wrapper=f[d]=__supressErrorReporting=function(){a=e;try{return g.apply(this,arguments)}catch(b){_.globalUncaughtExceptionHandler(_.extend(b,{asyncContext:e}))}};return b.apply(this,f)}};window.setTimeout=
b(window.setTimeout,0);(function(a,b){var e=function(e){e.addEventListener=a(e.addEventListener);e.removeEventListener=b(e.removeEventListener)};window.EventTarget?e(window.EventTarget.prototype):(e(Node.prototype),e(XMLHttpRequest.prototype))})(function(a){return b(a,1)},function(a){return function(b,e,f,g){return a.call(this,b,e.__uncaughtJS_wrapper||e,f)}})}})();_.hasReflection=!0;
_.defineKeyword("callStack",function(){return CallStack.fromRawString(CallStack.currentAsRawString).offset(Platform.NodeJS?1:0)});_.defineKeyword("currentFile",function(){return(CallStack.rawStringToArray(CallStack.currentAsRawString)[Platform.NodeJS?3:1]||{file:""}).file});_.defineKeyword("uselessPath",_.memoize(function(){return _.initial(__filename.split("/"),Platform.NodeJS?2:1).join("/")+"/"}));
_.defineKeyword("sourcePath",_.memoize(function(){var a=($uselessPath.match(/(.+)\/node_modules\/(.+)/)||[])[1];return a?a+"/":$uselessPath}));Platform.Browser&&_.defineProperty(window,"__filename",function(){return $currentFile});
SourceFiles=$singleton(Component,{line:function(a,b,c){SourceFiles.read(a,function(a){c((a.split("\n")[b]||"").trimmed)})},read:$memoizeCPS(function(a,b){if(0>a.indexOf("<"))try{if(Platform.NodeJS)b(require("fs").readFileSync(a,{encoding:"utf8"})||"");else{var c=new XMLHttpRequest;c.open("GET",a,!0);c.onreadystatechange=function(){4==c.readyState&&b(c.responseText)};c.send(null)}}catch(d){b("")}else b("")}),write:function(a,b,c){Platform.NodeJS?this.read(a,function(d){var e=require("fs"),f={encoding:"utf8"};
try{e.mkdirSync(a+".backups")}catch(g){}e.writeFileSync(a+".backups/"+Date.now(),d,f);e.writeFileSync(a,b,f);c()}):API.post("source/"+a,_.extend2({},this.apiConfig,{what:{text:b},failure:Panic,success:function(){log.ok(a,"\u2014 successfully saved");c&&c()}}))}});_.readSourceLine=SourceFiles.line;_.readSource=SourceFiles.read;_.writeSource=SourceFiles.write;
CallStack=$extends(Array,{current:$static($property(function(){return CallStack.fromRawString(CallStack.currentAsRawString).offset(1)})),fromError:$static(function(a){return a&&a.parsedStack?CallStack.fromParsedArray(a.parsedStack).offset(a.stackOffset||0):a&&a.stack?CallStack.fromRawString(a.stack).offset(a.stackOffset||0):CallStack.fromParsedArray([])}),fromErrorWithAsync:$static(function(a){var b=CallStack.fromError(a);for(a=a.asyncContext;a;)b=b.concat(CallStack.fromRawString(a.stack)),a=a.asyncContext;
return b.mergeDuplicateLines}),locationEquals:$static(function(a,b){return a.file===b.file&&a.line===b.line&&a.column===b.column}),safeLocation:function(a){return this[a]||{callee:"",calleeShort:"",file:"",fileName:"",fileShort:"",thirdParty:!1,source:"??? WRONG LOCATION ???",sourceReady:_.barrier("??? WRONG LOCATION ???")}},mergeDuplicateLines:$property(function(){return CallStack.fromParsedArray(_.map(_.partition2(this,function(a){return a.file+a.line}),function(a){return _.reduce(_.rest(a),function(a,
c){a.callee=(a.callee||"<anonymous>")+" \u2192 "+(c.callee||"<anonymous>");a.calleeShort=(a.calleeShort||"<anonymous>")+" \u2192 "+(c.calleeShort||"<anonymous>");return a},_.clone(a[0]))}))}),clean:$property(function(){return this.mergeDuplicateLines.reject(_.property("thirdParty"))}),asArray:$property(function(){return _.asArray(this)}),offset:function(a){return a&&CallStack.fromParsedArray(_.rest(this,a))||this},initial:function(a){return a&&CallStack.fromParsedArray(_.initial(this,a))||this},concat:function(a){return CallStack.fromParsedArray(this.asArray.concat(a.asArray))},
filter:function(a){return CallStack.fromParsedArray(_.filter(this,a))},reject:function(a){return CallStack.fromParsedArray(_.reject(this,a))},reversed:$property(function(){return CallStack.fromParsedArray(_.reversed(this))}),sourcesReady:function(a){return _.allTriggered(_.pluck(this,"sourceReady"),a)},constructor:function(a){Array.prototype.constructor.call(this);_.each(a,function(a){a.sourceReady||(a.sourceReady=_.barrier(),SourceFiles.line((a.remote?"api/source/":"")+a.file,a.line-1,function(c){a.sourceReady(a.source=
c)}));this.push(a)},this)},fromParsedArray:$static(function(a){return new CallStack(a)}),currentAsRawString:$static($property(function(){var a=Platform.Browser?3:2;return _.rest((Error().stack||"").split("\n"),a).join("\n")})),shortenPath:$static(function(a){var b=a.replace($uselessPath,"").replace($sourcePath,"");return b!==a?b:a.split("/").last}),isThirdParty:$static(_.bindable(function(a){var b=a.replace($sourcePath,"");return Platform.NodeJS&&"/"!==a[0]||0<=b.indexOf("/node_modules/")||0<=a.indexOf("/node_modules/")&&
!b||0<=b.indexOf("underscore")||0<=b.indexOf("jquery")})),fromRawString:$static(_.sequence(function(a){return CallStack.rawStringToArray(a)},function(a){return _.map(a,function(a){return _.extend(a,{calleeShort:_.last(a.callee.split(".")),fileName:_.last(a.file.split("/")),fileShort:CallStack.shortenPath(a.file),thirdParty:CallStack.isThirdParty(a.file)&&!a.index})})},function(a){return CallStack.fromParsedArray(a)})),rawStringToArray:$static(function(a){a=(a||"").split("\n");return _.filter2(a,function(a){a=
a.trimmed;var c,d=[],e=!1,d=d=void 0;if((d=a.match(/at (.+) \((.+)\)/))||(d=a.match(/(.*)@(.*)/)))c=d[1],e="native"===d[2],d=_.rest(d[2].match(/(.*):(.+):(.+)/)||[]);else if(d=a.match(/^(at\s+)*(.+):([0-9]+):([0-9]+)/))d=_.rest(d,2);else return!1;return 0<=(c||"").indexOf("__supressErrorReporting")?!1:{beforeParse:a,callee:c||"",index:Platform.Browser&&d[0]===window.location.href,"native":e,file:d[0]||"",line:(d[1]||"").integerValue,column:(d[2]||"").integerValue}})})});
$prototype.impl.findMeta=function(a){return function(b){_.cps.find(CallStack.fromRawString(a).reversed,function(a,b){a.sourceReady(function(e){e=(e||"").match(/([A-z]+)\s*=\s*\$(prototype|singleton|component|extends|trait|aspect)/);b(e&&{name:e[1],type:e[2],file:a.fileShort}||!1)})},function(a){b(a||{})})}};$prototype.macro(function(a,b){a.$meta||(a.$meta=$static(_.cps.memoize($prototype.impl.findMeta(CallStack.currentAsRawString))));return a});_.hasLog=!0;
_.extend(log=function(){return log.write.apply(this,[log.config({location:!0,stackOffset:1})].concat(_.asArray(arguments)))},{Config:$prototype(),config:function(a){return new log.Config(a)}});
_.extend(log,{indent:function(a){return log.config({indent:a})},stackOffset:function(a){return log.config({stackOffset:a})},color:_.extend(function(a){return(log.color[a]||{}).color},_.object(_.map([["none","0m",""],["boldRed",["31m","1m"],"color:crimson;font-weight:bold"],["red","31m","color:crimson"],["darkRed",["31m","2m"],"color:crimson"],["blue","36m","color:royalblue"],["boldBlue",["36m","1m"],"color:royalblue;font-weight:bold;"],["darkBlue",["36m","2m"],"color:rgba(65,105,225,0.5)"],["boldOrange",
["33m","1m"],"color:saddlebrown;font-weight:bold;"],["orange","33m","color:saddlebrown"],["brown",["33m","2m"],"color:saddlebrown"],["green","32m","color:forestgreen"],["boldGreen",["32m","1m"],"color:forestgreen;font-weight:bold"],["pink","35m","color:magenta"],["boldPink",["35m","1m"],"color:magenta;font-weight:bold;"],["purple",["35m","2m"],"color:magenta"],["black","0m","color:black"],["bright",["0m","1m"],"color:rgba(0,0,0);font-weight:bold"],["dark",["0m","2m"],"color:rgba(0,0,0,0.25)"]],function(a){return[a[0],
log.config({color:{shell:_.coerceToArray(_.map2(a[1],_.prepends("\u001b["))).join(),css:a[2]}})]}))),boldLine:"======================================",line:"--------------------------------------",thinLine:"......................................",timestampEnabled:!1,withWriteBackend:$scope(function(a,b,c,d){var e=log.writeBackend.value;log.writeBackend.value=b;c(function(b){a(function(){log.writeBackend.value=e;b&&b();d&&d()})})}),writeUsingDefaultBackend:function(){var a=arguments;log.withWriteBackend(log.impl.defaultWriteBackend,
function(b){log.write.apply(null,a);b()})},writeBackend:function(){return arguments.callee.value||log.impl.defaultWriteBackend},withConfig:function(a,b){log.impl.configStack.push(log.impl.configure([{stackOffset:-1},a]));var c=b();log.impl.configStack.pop();return c},currentConfig:function(){return log.impl.configure(log.impl.configStack)},impl:{configStack:[],numWrites:0,configure:function(a){return _.reduce2({stackOffset:0,indent:0},_.nonempty(a),function(a,c){return _.extend(a,_.nonempty(c),{indent:a.indent+
(c.indent||0),stackOffset:a.stackOffset+(c.stackOffset||0)})})},write:$restArg(function(){var a=log.writeBackend();log.impl.numWrites++;var b=_.asArray(arguments),c=log.impl.configure([{stackOffset:Platform.NodeJS?1:3,indent:a.indent||0}].concat(log.impl.configStack)),d=_.reduce2([],_.partition3(b,_.isTypeOf.$(log.Config)),function(a,b){return!0===b.label?(c=log.impl.configure([c].concat(b.items)),a):a.concat({config:c,text:log.impl.stringifyArguments(b.items,c)})}),e=d.last&&d.last.text.reversed.match(/(\n*)([^]*)/),
f=e&&e[1];e&&(d.last.text=e[2].reversed);var g={},e=_.pluck.with_("items",_.reject.with_(_.property("label"),_.partition3.with_(_.equals(g),_.scatter(d,function(a,b,c){_.each(a.text.split("\n"),function(b,d,e){c(_.extended(a,{text:b}));d!==e.lastIndex&&c(g)})})))),d=_.pluck(d,"text").join(""),h=c.where||log.impl.walkStack($callStack)||{},k=_.times(c.indent,_.constant("\t")).join("");a({lines:e,config:c,color:c.color,when:Date.now(),args:_.reject(b,_.isTypeOf.$(log.Config)),indentation:k,indentedText:e.map(_.seq(_.pluck.tails2("text"),
_.joinsWith(""),_.prepends(k))).join("\n"),text:d,codeLocation:c.location&&log.impl.location(h)||"",trailNewlines:f||"",where:c.location&&h||void 0});return _.find(b,_.not(_.isTypeOf.$(log.Config)))}),walkStack:function(a){return _.find(a.clean,function(a){return 0>a.fileShort.indexOf("base/log.js")})||a[0]},defaultWriteBackend:function(a){var b=a.codeLocation;if(Platform.NodeJS){var c=_.map(a.lines,function(b){return a.indentation+_.map(b,function(a){return a.config.color?a.config.color.shell+a.text+
"\u001b[0m":a.text}).join("")}).join("\n");log.timestampEnabled&&(c=log.color("dark").shell+_.bullet(log.impl.timestamp(a.when)+" ",log.color("none").shell+c));console.log(c,log.color("dark").shell+b+"\u001b[0m",a.trailNewlines)}else console.log.apply(console,_.reject.with_(_.equals(void 0),[].concat(_.map(a.lines,function(b,c){return a.indentation+_.reduce2("",b,function(a,b){return a+(b.text&&(b.config.color?"%c":"")+b.text||"")})}).join("\n")+(b&&"%c "+b||""),(_.scatter(a.lines,function(a,b,c){_.each(a,
function(a){a.text&&a.config.color&&c(a.config.color.css)})})||[]).concat(b?"color:rgba(0,0,0,0.25)":[]),a.trailNewlines)))},timestamp:function(a){a=new Date(a);return String.leadingZero(a.getDay())+"/"+String.leadingZero(a.getMonth()+1)+" "+String.leadingZero(a.getHours())+":"+String.leadingZero(a.getMonth())},location:function(a){return _.quoteWith("()",_.nonempty([a.calleeShort,_.nonempty([a.fileName,a.line]).join(":")]).join(" @ "))},stringifyArguments:function(a,b){return _.map(a,log.impl.stringify.tails2(b)).join(" ")},
stringify:function(a,b){b=b||{};if(_.isTypeOf(Error,a)){var c=log.impl.stringifyError(a);return a.originalError?c+"\n\n"+log.impl.stringify(a.originalError):c}return _.isTypeOf(CallStack,a)?log.impl.stringifyCallStack(a):"object"===typeof a?_.isArray(a)&&1<a.length&&_.isObject(a[0])&&b.table?log.asTable(a):_.stringify(a,b):"string"===typeof a?a:_.stringify(a)},stringifyError:function(a){try{var b=CallStack.fromErrorWithAsync(a).clean.offset(a.stackOffset||0);return"[EXCEPTION] "+(a.message||"").replace(/\r|\n/g,
"").trimmed.limitedTo(120)+"\n\n"+(a.notMatching&&_.map(_.coerceToArray(a.notMatching||[]),log.impl.stringify.then(_.prepends("\t"))).join("\n")+"\n\n"||"")+log.impl.stringifyCallStack(b)+"\n"}catch(c){return"YO DAWG I HEARD YOU LIKE EXCEPTIONS... SO WE THREW EXCEPTION WHILE PRINTING YOUR EXCEPTION:\n\n"+c.stack+"\n\nORIGINAL EXCEPTION:\n\n"+a.stack+"\n\n"}},stringifyCallStack:function(a){return log.columns(a.map(function(a){return["\tat "+a.calleeShort.first(30),_.nonempty([a.fileShort,":",a.line]).join(""),
(a.source||"").first(80)]})).join("\n")}}});
(function(){var a=log.impl.write;_.extend(log,log.printAPI=_.object(_.concat([["newline",a.$(log.config({location:!1}),"")],["write",a]],_.flat(_.map("red failure error e;blue info i;darkBlue minor m;orange warning warn w;green success ok g;pink notice alert p;boldPink pp;dark hint d;boldGreen gg;bright b;boldRed bloody bad ee;purple dp;brown br;boldOrange ww;darkRed er;boldBlue ii".split(";"),_.splitsWith(" ").then(_.mapsWith(function(b,c,d){return[b,a.$(log.config({location:0!==c,color:log.color(d.first),
stackOffset:2}))]})))))))})();logs=_.mapWith(_.callsTo.compose(_.callsWith(log.stackOffset(1))),log.printAPI);
_.extend(log,{asTable:function(a){var b=a.map(_.keys.arity1).reduce(_.union.arity2,[]);a=log.columns([b].concat(_.map(a,function(a){return b.map(_.propertyOf(a))})),{maxTotalWidth:120,minColumnWidths:b.map(_.property("length"))});return[a[0],log.thinLine[0].repeats(a[0].length),_.rest(a)].flat.join("\n")},columns:function(a,b){if(0===a.length)return[];var c=a.map(_.map.tails2(function(a){return _.asString(a).split("\n")[0]})),d=c.map(_.map.tails2(_.property("length"))),e=d.zip(_.largest),f=b||{minColumnWidths:e,
maxTotalWidth:0},g=_.reduce(e,_.sum,0),h=_.map(e,_.muls(1/g)),k=Math.max(0,g-f.maxTotalWidth),m=_.map(e,function(a,b){return Math.max(f.minColumnWidths[b],Math.floor(a-k*h[b]))}),d=d.map(function(a){return[m,a].zip(_.subtract)});return[c,d].zip(_.zap.tails(function(a,b){return 0<=b?a+" ".repeats(b):_.initial(a,-b).join("")}).then(_.joinsWith("  ")))}});Platform.NodeJS&&(module.exports=log);_.defineTagKeyword("shouldFail");_.defineTagKeyword("async");_.defineTagKeyword("assertion");
Testosterone=$singleton({prototypeTests:[],isRunning:$property(function(){return void 0!==this.currentAssertion}),constructor:function(){_.each(_.assertions,function(a,b){this.defineAssertion(b,"assertFails"===b?$shouldFail(function(a){a.call(this)}):a)},this);(function(a){$prototype.macro("$test",a);$prototype.macro("$tests",a)})(this.$(function(a,b,c){this.prototypeTests.push({proto:a.constructor,tests:b});a.$tests=$static($property($constant(_.isStrictlyObject(b)&&b||_.object([["test",b]]))));
return a}));this.run=this.$(this.run)},run:_.interlocked(function(a,b,c){var d=3===arguments.length?c:_.identity,e=this.runConfig=_.extend({suites:[],silent:!0,verbose:!1,timeout:2E3,filter:_.identity,testStarted:function(a){},testComplete:function(a){}},b),f=_.isArray(e.suites),g=_.map(e.suites,this.$(function(a,b){return this.testSuite(f?a.name:b,f?a.tests:a,e.context)}));(!1===e.codebase?_.cps.constant([]):this.$(this.collectPrototypeTests))(this.$(function(b){var c=!1===e.codebase?[]:this.collectTests();
b=_.flatten(_.pluck(c.concat(g).concat(b),"tests"));b=_.filter(b,e.shouldRun||_.constant(!0));this.runningTests=_.map(b,function(a,b){return _.extend(a,{indent:e.indent,index:b})});_.assertTypeMatches(_.map(_.pluck(this.runningTests,"routine"),$untag),["function"]);this.runningTests=_.filter(this.runningTests,e.filter||_.identity);_.cps.each(this.runningTests,this.$(this.runTest),this.$(function(){_.assert(!0!==e.done);e.done=!0;this.printLog(e);this.failedTests=_.filter(this.runningTests,_.property("failed"));
this.failed=0<this.failedTests.length;d(!this.failed);a()}))}))}),onException:function(a){if(this.currentAssertion)this.currentAssertion.onException(a);else throw a;},defineAssertions:function(a){_.each(a,function(a,c){this.defineAssertion(c,a)},this)},runTest:function(a,b,c){var d=this.runConfig;log.impl.configStack=[];d.testStarted(a);a.verbose=d.verbose;a.timeout=d.timeout;a.startTime=Date.now();a.run(function(){a.time=Date.now()-a.startTime;2===_.numArgs(d.testComplete)?d.testComplete(a,c):(d.testComplete(a),
c())})},collectTests:function(){return _.map(_.tests,this.$(function(a,b){return this.testSuite(b,a)}))},collectPrototypeTests:function(a){_.cps.map(this.prototypeTests,this.$(function(a,c){a.proto.$meta(this.$(function(d){c(this.testSuite(d.name,a.tests,void 0,a.proto))}))}),a)},testSuite:function(a,b,c,d){return{name:a||"",tests:_(_.pairs("function"===typeof b&&_.object([[a,b]])||b)).map(function(b){var f=new Test({proto:d,name:b[0],routine:b[1],suite:a,context:c});f.complete(function(){(f.hasLog=
0<f.logCalls.length)||(f.failed?log.red("FAIL"):f.verbose&&log.green("PASS"))});return f})}},defineAssertion:function(a,b){var c=this;_.deleteKeyword(a);_.defineKeyword(a,Tags.modify(b,function(d){return _.withSameArgs(d,function(){var e=$callStack.safeLocation(Platform.Browser&&!Platform.Chrome?0:1);return c.currentAssertion?c.currentAssertion.babyAssertion(a,b,d,arguments,e):d.apply(c,arguments)})}))},printLog:function(a){if(!a.supressLog){var b=_.filter(this.runningTests,function(b){return b.failed||
!a.silent&&b.hasLog}),c=_.filter(this.runningTests,_.property("failed"));_.invoke(a.verbose?this.runningTests:b,"printLog");c.length?log.orange("\n"+log.boldLine+"\nSOME TESTS FAILED:",_.pluck(c,"name").join(", "),"\n\n"):!0!==a.silent&&log.green("\n"+log.boldLine+"\nALL TESTS PASS\n\n")}}});
Test=$prototype({constructor:function(a){_.defaults(this,a,{name:"<< UNNAMED FOR UNKNOWN REASON >>",failed:!1,routine:void 0,verbose:!1,depth:1,indent:0,failedAssertions:[],context:this,complete:_.extend(_.barrier(),{context:this})});this.babyAssertion=_.interlocked(this.babyAssertion)},finalize:function(){this.babyAssertion.wait(this.$(function(){this.canFail&&this.failedAssertions.length&&(this.failed=!0);this.complete(!0)}))},babyAssertion:function(a,b,c,d,e,f){var g=this,h=new Test({mother:this,
name:b,shouldFail:c.$shouldFail||this.shouldFail,depth:this.depth+1,location:f,context:this.context,timeout:this.timeout/2,verbose:this.verbose,silent:this.silent,routine:Tags.modify(c,function(a){return function(b){if($async.is(e[0])||$async.is(c))_.cps.apply(a,g.context,e,function(a,c){c&&c.apply(this,a);b()});else try{a.apply(g.context,e),b()}catch(d){h.onException(d)}}})}),k=function(){h.failed&&g.canFail&&g.failedAssertions.push(h);a()};h.run(function(){Testosterone.currentAssertion=g;h.failed||
h.verbose&&h.logCalls.notEmpty?h.location.sourceReady(function(a){log.red(log.config({location:h.location,where:h.location}),a);h.evalLogCalls();k()}):k()})},canFail:$property(function(){return!this.failed&&!this.shouldFail}),fail:function(){this.failed=!0;this.finalize()},assertionStack:$property(function(){var a=[],b=this;do a.push(b),b=b.mother;while(b);return a}),onException:function(a){if(this.canFail||this.verbose){if(_.isAssertionError(a)){if("notMatching"in a){var b=_.coerceToArray(a.notMatching);
if(a.asColumns)log.orange(log.columns(_.map(b,function(a){return["\u2022 "+_.keys(a)[0],_.stringify(_.values(a)[0])]})).join("\n"));else{a=_.map(b,log.impl.stringify.arity1.then(_.bullet.$("\u2022 ")));var c=_.reduce2(a,_.longestCommonSubstring)||"";4>c.length&&(c=void 0);_.each(a,function(a){if(c){var b=a.indexOf(c);log.write(log.color.orange,a.substr(0,b),log.color.dark,c,log.color.orange,a.substr(b+c.length))}else log.orange(a)})}}}else 1<this.depth&&log.newline(),log.write(a);log.newline()}this.canFail?
this.fail():this.finalize()},run:function(a){var b=Testosterone.currentAssertion=this,c=Tags.unwrap(this.routine);this.shouldFail=$shouldFail.is(this.routine);this.hasLog=this.failed=!1;this.logCalls=[];this.failureLocations={};_.withTimeout({maxTime:b.timeout,expired:function(){b.canFail&&(log.error("TIMEOUT EXPIRED"),b.fail())}},b.complete);_.withUncaughtExceptionHandler(b.$(b.onException),b.complete);log.withWriteBackend(_.extendWith({indent:b.depth+(b.indent||0)},function(a){b.logCalls.push(a)}),
function(d){b.complete(d.arity0);a&&b.complete(a);0<c.length?c.call(b.context,b.$(b.finalize)):(c.call(b.context),b.finalize())})},printLog:function(){var a=this.suite&&this.suite!==this.name&&(this.suite||"").quote("[]")||"";log.write(log.color.blue,"\n"+log.boldLine,"\n"+_.nonempty([a,this.name]).join(" "),(this.index+" of "+Testosterone.runningTests.length).quote("()")+(this.failed?" FAILED":"")+":","\n");this.evalLogCalls()},evalLogCalls:function(){_.each(this.logCalls,log.writeBackend().arity1)}});
_.defineTagKeyword("allowsRecursion");_.limitRecursion=function(a,b,c){b||(b=a,a=0);var d=-1,e=!1;return function(){if(!e){if(d>a)throw e=!0,_.extendWith({notMatching:_.map(arguments,function(a,b){return"arg"+(b+1)+": "+_.stringify(a)})},Error(c+": max recursion depth reached ("+a+")"));var f=(++d,b.apply(this,arguments));d--;return f}}};
Testosterone.ValidatesRecursion=$trait({$test:function(){var a=new ($component({$traits:[Testosterone.ValidatesRecursion],foo:function(){},bar:function(){this.bar()},baz:$allowsRecursion({max:2},function(){this.baz()}),qux:$allowsRecursion(function(){this.quxCalled||(this.quxCalled=!0,this.qux())})}));a.foo();$assertThrows(a.bar,{message:"bar: max recursion depth reached (0)"});a.bar();$assertThrows(a.baz,{message:"baz: max recursion depth reached (2)"});a.qux()},$constructor:function(){_.each(this,
function(a,b){!_.isFunction($untag(a))||"constructor"===b||a.$allowsRecursion&&void 0===a.$allowsRecursion.max||(this[b]=Tags.modify(a,function(c){return _.limitRecursion(a&&a.$allowsRecursion&&a.$allowsRecursion.max||0,c,b)}))},this)}});
(function(){var a=_.keys(_.omit(log.color,"none"));a.each(_.defineTagKeyword);_.defineTagKeyword("verbose");Testosterone.LogsMethodCalls=$trait({$test:Platform.Browser?function(){}:function(a){var c=$prototype({$traits:[Testosterone.LogsMethodCalls]}),c=$extends(c,{foo:$log($pink($verbose(function(a){$assert(a,42);return 24})))}),d=new c,e=this;c.$meta(function(){$assert(d.foo(42),24);$assert(_.pluck(e.logCalls,"text"),["Compo.foo (42)","\u2192 24",""]);$assert(e.logCalls[0].color===log.color("pink"));
a()})},$macroTags:{log:function(b,c,d){var e=(_.isBoolean(c.$log)?void 0:c.$log)||(c.$verbose?"{{$proto}}":""),f={},g=_.find2(a,function(a){return log.color(c["$"+a]&&a)||!1}),h=e&&_.template(e,{interpolate:/\{\{(.+?)\}\}/g});$untag(b.$meta)(function(a){f=a});return $prototype.impl.modifyMember(c,function(a,b){return function(){var e=this,l=_.asArray(arguments),n=h&&h.call(this,_.extend({$proto:f.name},_.map2(this,_.stringifyOneLine.arity1)))||this.desc||"",p=_.map(l,_.stringifyOneLine.arity1).join(", ").quote("()");
log.write(log.config({color:g,location:!0,where:c.$verbose?void 0:{calleeShort:f.name}}),_.nonempty([n,d,b]).join("."),p);return log.withConfig({indent:1,color:g,protoName:f.name},function(){var b=log.impl.numWrites,c=a.apply(e,l);void 0!==c&&log.write("\u2192",_.stringifyOneLine(c));2>log.currentConfig().indent&&0<log.impl.numWrites-b&&log.newline();return c})}})}}})})();Platform.NodeJS&&(module.exports=Testosterone);
_.measure=function(a,b){if(b){var c=_.now();a(function(){b(_.now()-c)})}else return c=_.now(),a(),_.now()-c};_.perfTest=function(a,b){var c=_.isFunction(a)?{test:a}:a,d={};_.cps.each(c,function(a,b,c){var h=[],k=function(){for(var c=0;500>c;c++)h.push(a());console.log(b,h)};k();_.delay(function(){d[b]=_.measure(k)/500;c()},100)},function(){b(d)})};
(function(a){"undefined"===typeof UI&&(UI={});Panic=function(a,c){c=_.defaults(_.clone(c||{}),{dismiss:_.identity,raw:!1});if(null!==a){_.isTypeOf(Error,a)&&_.extend(c,_.pick(a,"retry","dismiss"));Panic.widget.append(a,c.raw);if(_.isFunction(c.retry))Panic.widget.onRetry(c.retry);if(_.isFunction(c.dismiss))Panic.widget.onClose(c.dismiss)}};Panic.init=function(){Panic._initialized||(Panic._initialized=!0,_.withUncaughtExceptionHandler(function(a){Panic(a);throw a;}))};Panic.widget=$singleton(Component,
{retryTriggered:$triggerOnce(),closeTriggered:$triggerOnce(),el:$memoized($property(function(){var b=a('<div class="panic-modal-overlay" style="z-index:5000; display:none;">').append([this.bg=a('<div class="panic-modal-overlay-background">'),this.modal=a('<div class="panic-modal">').append([this.modalBody=a('<div class="panic-modal-body">').append(this.title=a('<div class="panic-modal-title">Now panic!</div>')),a('<div class="panic-modal-footer">').append([this.btnRetry=a('<button type="button" class="panic-btn panic-btn-warning" style="display:none;">Try again</button>').touchClick(this.retry),
this.btnClose=a('<button type="button" class="panic-btn panic-btn-danger" style="display:none;">Close</button>').touchClick(this.close)])])]);b.appendTo(document.body);a(document).ready(function(){b.appendTo(document.body)});try{a(window).resize(this.layout).resize(),this.modal.enableScrollFaders({scroller:this.modalBody}),a(document).keydown(this.$(function(a){27===a.keyCode&&this.close()}))}catch(c){_.delay(function(){Panic(c)})}return b})),layout:function(){var b=_.coerceToUndefined(_.max(_.map(this.modal.find("pre"),
_.property("scrollWidth"))));this.modal.css({"max-height":a(window).height()-100,width:b&&b+120});this.modalBody.scroll()},toggleVisibility:function(a){a!==("none"!==this.el.css("display"))&&(a&&this.el.css("display",""),this.el.animateWith(a?"panic-modal-appear":"panic-modal-disappear",this.$(function(){a||this.el.css("display","none")})))},onRetry:function(a){this.retryTriggered(a);this.btnRetry.css("display","")},onClose:function(a){this.closeTriggered(a);this.btnClose.css("display","")},retry:function(){this._clean();
this.closeTriggered.off();this.toggleVisibility(!1);this.retryTriggered()},close:function(){this._clean();this.retryTriggered.off();this.toggleVisibility(!1);this.closeTriggered()},_clean:function(){this.modalBody.find(".panic-alert-error").remove();this.modalBody.scroll();this.btnRetry.css("display","none");this.btnClose.css("display","none")},append:function(b,c){var d="panic"+this.hash(b),e=a("#"+d+" .panic-alert-counter");e.length?e.text((e.text()||"1").parsedInt+1):a('<div class="panic-alert-error">').attr("id",
d).append('<span class="panic-alert-counter">').append(this.print(b,c)).insertAfter(this.el.find(".panic-modal-title"));this.toggleVisibility(!0);this.layout()},hash:function(a){return((_.isTypeOf(Error,a)?a&&a.stack:_.isTypeOf(Test,a)?a.suite+a.name:a)||"").hash},print:function(a,c){return _.isTypeOf(Error,a)?this.printError(a):_.isTypeOf(Test,a)?this.printFailedTest(a):this.printUnknownStuff(a,c)},printUnknownStuff:function(b,c){return c?b:a("<span>").text(log.impl.stringify(b))},cleanupFileName:function(a){return a&&
a.replace(/^\d\d\d\d\d+_/,"")},printLocation:function(b){return a('<span class="location">').append([a('<span class="callee">').text(b.calleeShort),a('<span class="file">').text(this.cleanupFileName(b.fileName)),a('<span class="line">').text(b.line)])},printFailedTest:function(b){var c=a('<pre class="test-log" style="margin-top: 13px;">');log.withWriteBackend(this.$(function(b){_.isTypeOf(Error,b.args.first)&&console.log(b.args.first);c.append(_.isTypeOf(Error,b.args.first)?a('<div class="inline-exception-entry">').append([_.escape(b.indentation),
a('<div class="panic-alert-error inline-exception">').append(this.printError(b.args.first))]):a('<div class="log-entry">').append(_.map(b.lines,function(c,f,g){return a('<div class="line">').append(_.escape(b.indentation)).append(_.map(c,function(b){return a("<span>").attr("style",b.config.color&&b.config.color.css||"").text(b.text)})).append(f===g.lastIndex?[b.where&&this.printLocation(b.where),b.trailNewlines.replace(/\n/g,"<br>")]:[])},this)))}),function(a){b.evalLogCalls();a()});return[a('<div class="panic-alert-error-message" style="font-weight: bold;">').text(b.name).append('<span style="float:right; opacity: 0.25;">test failed</span>'),
c]},printError:function(b){var c=CallStack.fromErrorWithAsync(b);return[a('<div class="panic-alert-error-message" style="font-weight: bold;">').text(b.message).append(_.any(c,function(a,b){return(a.thirdParty||a["native"])&&0!==b})?'<a class="clean-toggle" href="javascript:{}"></a>':"").click(this.$(function(b){a(b.delegateTarget).parent().toggleClass("all-stack-entries").transitionend(this.$(function(){this.modalBody.scroll()}))})),a('<div class="not-matching" style="margin-top: 5px; padding-left: 10px;">').append(_.map(_.coerceToArray(b.notMatching||
[]),function(b){return a("<pre>").text(log.impl.stringify(b))})),a('<ul class="callstack">').append(_.map(c,this.$(function(b){var c=a('<li class="callstack-entry">').toggleClass("third-party",b.thirdParty).toggleClass("native",b["native"]).append([a('<span class="file">').text(_.nonempty([b.index?"(index)":this.cleanupFileName(b.fileShort),b.line]).join(":")),a('<span class="callee">').text(b.calleeShort),a('<span class="src i-am-busy">').click(this.$(function(f){var g=a(f.delegateTarget);g.waitUntil(_.readSource.partial((b.remote?
"api/source/":"")+b.file),this.$(function(f){c.is(".full")?(c.removeClass("full"),c.transitionend(function(){c.is(".full")||b.sourceReady(g.$(a.fn.text))})):(c.addClass("full"),g.html(_.map(f.split("\n"),function(b){return a('<div class="line">').text(b)})),f=g.find(".line").eq(b.line-1).addClass("hili"),f.length&&(f=f.offset().top-g.offset().top,g.scrollTop(f-100)),_.delay(this.$(function(){var a=g.outerBBox().bottom+242-this.modalBody.outerBBox().bottom;0<a&&this.modalBody.animate({scrollTop:this.modalBody.scrollTop()+
a},250)})))}))}))]);b.sourceReady(function(a){c.find(".src").removeClass("i-am-busy").text(a)});return c})))]}});a.fn.extend({enableScrollFaders:function(b){var c=b&&b.horizontal,d,e;b=this.find(b&&b.scroller||".scroller");this.css({position:"relative"});this.append(d=a('<div class="scroll-fader scroll-fader-'+(c?"left":"top")+'"></div>')).append(e=a('<div class="scroll-fader scroll-fader-'+(c?"right":"bottom")+'"></div>'));b.scroll(function(){var b=c?a(this).scrollLeft():a(this).scrollTop(),g=c?
a(this).width():a(this).height(),h=(c?this.scrollWidth:this.scrollHeight)-1;d.css({opacity:0<b?1:0});e.css({opacity:b+g<h?1:0})}).scroll();return this}})})(jQuery);
(function(a){LogOverlay=$singleton(Component,{$defaults:{opaque:!1,init:!1},init:function(){log.withWriteBackend(this.write,function(){});a(document).keydown(this.$(function(a){192===a.keyCode?this.toggle():27===a.keyCode&&this.body.empty()}))},el:$memoized($property(function(){return a('<div class="useless-log-overlay" style="display: none;">').append('<div class="useless-log-overlay-body">').appendTo(document.body)})),body:$memoized($property(function(){return this.el.find(".useless-log-overlay-body")})),
toggle:function(a){this.el.toggle(a)},visible:$property(function(){return this.el.is(":visible")}),clip:function(){var b=this.el.height(),c=this.body.height();this.body.children().filter(this.$(function(d,e){var f=c-a(e).offsetInParent().y,g=f-a(e).height(),h=b/2;return f>h&&g>h})).remove()},write:function(b){this.toggle(!0);b.config.clear&&this.body.empty();this.body.append(a('<div class="ulo-line">').attr("style",b.color&&b.color.css||"").append(a('<span class="ulo-line-text">').text(b.indentedText+
" ")).append(a('<span class="ulo-line-where">').text(b.codeLocation+" ")).append(a('<span class="ulo-line-trail">').text(b.trailNewlines)));this.clip.postpone();this.opaque||log.impl.defaultWriteBackend(b)}})})(jQuery);
(function(a){Panic.init();CallStack.isThirdParty.intercept(function(a,c){return 0<=a.indexOf("underscore")||0<=a.indexOf("jquery")||0<=a.indexOf("useless")||0<=a.indexOf("mootools")});a("head").append([a('<style type="text/css">').text("@-webkit-keyframes bombo-jumbo {\n  0%   { -webkit-transform: scale(0); }\n  80%  { -webkit-transform: scale(1.2); }\n  100% { -webkit-transform: scale(1); } }\n\n@keyframes bombo-jumbo {\n  0%   { transform: scale(0); }\n  80%  { transform: scale(1.2); }\n  100% { transform: scale(1); } }\n\n@-webkit-keyframes pulse-opacity {\n  0% { opacity: 0.5; }\n  50% { opacity: 0.25; }\n  100% { opacity: 0.5; } }\n\n@keyframes pulse-opacity {\n  0% { opacity: 0.5; }\n  50% { opacity: 0.25; }\n  100% { opacity: 0.5; } }\n\n.i-am-busy { -webkit-animation: pulse-opacity 1s ease-in infinite; animation: pulse-opacity 1s ease-in infinite; pointer-events: none; }\n\n.panic-modal .scroll-fader-top, .scroll-fader-bottom { left: 42px; right: 42px; position: absolute; height: 20px; pointer-events: none; }\n.panic-modal .scroll-fader-top { top: 36px; background: -webkit-linear-gradient(bottom, rgba(255,255,255,0), rgba(255,255,255,1)); }\n.panic-modal .scroll-fader-bottom { bottom: 128px; background: -webkit-linear-gradient(top, rgba(255,255,255,0), rgba(255,255,255,1)); }\n\n.panic-modal-appear {\n  -webkit-animation: bombo-jumbo 0.25s cubic-bezier(1,.03,.48,1);\n  animation: bombo-jumbo 0.25s cubic-bezier(1,.03,.48,1); }\n\n.panic-modal-disappear {\n  -webkit-animation: bombo-jumbo 0.25s cubic-bezier(1,.03,.48,1); -webkit-animation-direction: reverse;\n  animation: bombo-jumbo 0.25s cubic-bezier(1,.03,.48,1); animation-direction: reverse; }\n\n.panic-modal-overlay {\n          display: -ms-flexbox; display: -moz-flex; display: -webkit-flex; display: flex;\n          -ms-flex-direction: column; -moz-flex-direction: column; -webkit-flex-direction: column; flex-direction: column;\n          -ms-align-items: center; -moz-align-items: center; -webkit-align-items: center; align-items: center;\n          -ms-flex-pack: center; -ms-align-content: center; -moz-align-content: center; -webkit-align-content: center; align-content: center;\n          -ms-justify-content: center; -moz-justify-content: center; -webkit-justify-content: center; justify-content: center;\n          position: fixed; left: 0; right: 0; top: 0; bottom: 0;\n          font-family: Helvetica, sans-serif; }\n\n.panic-modal-overlay-background { z-index: 1; position: absolute; left: 0; right: 0; top: 0; bottom: 0; background: white; opacity: 0.75; }\n\n.panic-modal { min-width: 640px; max-width: 90%; transition: 0.25s width ease-in-out; box-sizing: border-box; display: -webkit-flex; display: flex; position: relative; border-radius: 4px; z-index: 2; width: 640px; background: white; padding: 36px 42px 128px 42px; box-shadow: 0px 30px 80px rgba(0,0,0,0.25), 0 1px 2px rgba(0,0,0,0.15); }\n.panic-alert-counter { float: left; background: #904C34; border-radius: 8px; width: 17px; height: 17px; display: inline-block; text-align: center; line-height: 16px; margin-right: 1em; margin-left: -2px; font-size: 10px; color: white; font-weight: bold; }\n.panic-alert-counter:empty { display: none; }\n\n.panic-modal-title { color: black; font-weight: 300; font-size: 30px; opacity: 0.5; margin-bottom: 1em; }\n.panic-modal-body { overflow-y: auto; width: 100%; }\n.panic-modal-footer { text-align: right; position: absolute; left: 0; right: 0; bottom: 0; padding: 42px; }\n\n.panic-btn { margin-left: 1em; font-weight: 300; font-family: Helvetica, sans-serif; -webkit-user-select: none; user-select: none; cursor: pointer; display: inline-block; padding: 1em 1.5em; border-radius: 4px; font-size: 14px; border: 1px solid black; color: white; }\n.panic-btn:focus { outline: none; }\n.panic-btn:focus { box-shadow: inset 0px 2px 10px rgba(0,0,0,0.25); }\n\n.panic-btn-danger       { background-color: #d9534f; border-color: #d43f3a; }\n.panic-btn-danger:hover { background-color: #c9302c; border-color: #ac2925; }\n\n.panic-btn-warning       { background-color: #f0ad4e; border-color: #eea236; }\n.panic-btn-warning:hover { background-color: #ec971f; border-color: #d58512; }\n\n.panic-alert-error { border-radius: 4px; background: #FFE8E2; color: #904C34; padding: 1em 1.2em 1.2em 1.2em; margin-bottom: 1em; font-size: 14px; }\n\n.panic-alert-error { position: relative; text-shadow: 0px 1px 0px rgba(255,255,255,0.25); }\n\n.panic-alert-error .clean-toggle { height: 2em; text-decoration: none; font-weight: 300; position: absolute; color: black; opacity: 0.25; right: 0; top: 0; display: block; text-align: right; }\n.panic-alert-error .clean-toggle:hover { text-decoration: underline; }\n.panic-alert-error .clean-toggle:before,\n.panic-alert-error .clean-toggle:after { position: absolute; right: 0; transition: all 0.25s ease-in-out; display: inline-block; overflow: hidden; }\n.panic-alert-error .clean-toggle:before { -webkit-transform-origin: center left; transform-origin: center left; content: 'more'; }\n.panic-alert-error .clean-toggle:after { -webkit-transform-origin: center left; transform-origin: center right; content: 'less'; }\n.panic-alert-error.all-stack-entries .clean-toggle:before { -webkit-transform: scale(0); transform: scale(0); }\n.panic-alert-error:not(.all-stack-entries) .clean-toggle:after { -webkit-transform: scale(0); transform: scale(0); }\n\n.panic-alert-error:last-child { margin-bottom: 0; }\n\n.panic-alert-error-message { line-height: 1.2em; position: relative; }\n\n.panic-alert-error .callstack { font-size: 12px; margin: 2em 0 0.1em 0; font-family: Menlo, monospace; padding: 0; }\n\n.panic-alert-error .callstack-entry { white-space: nowrap; opacity: 1; transition: all 0.25s ease-in-out; margin-top: 10px; list-style-type: none; max-height: 38px; overflow: hidden; }\n.panic-alert-error .callstack-entry .file { }\n.panic-alert-error .callstack-entry .file:not(:empty) + .callee:not(:empty):before { content: ' \u2192 '; }\n\n.panic-alert-error:not(.all-stack-entries) > .callstack > .callstack-entry.third-party:not(:first-child),\n.panic-alert-error:not(.all-stack-entries) > .callstack > .callstack-entry.native:not(:first-child) { max-height: 0; margin-top: 0; opacity: 0; }\n\n.panic-alert-error .callstack-entry,\n.panic-alert-error .callstack-entry * { line-height: initial; }\n.panic-alert-error .callstack-entry .src { overflow: hidden; transition: height 0.25s ease-in-out; height: 22px; border-radius: 2px; cursor: pointer; margin-top: 2px; white-space: pre; display: block; color: black; background: rgba(255,255,255,0.75); padding: 4px; }\n.panic-alert-error .callstack-entry.full .src { font-size: 12px; height: 200px; overflow: scroll; }\n.panic-alert-error .callstack-entry.full .src .line.hili { background: yellow; }\n.panic-alert-error .callstack-entry.full { max-height: 220px; }\n\n.panic-alert-error .callstack-entry .src.i-am-busy { background: white; }\n\n.panic-alert-error .callstack-entry        .src:empty                  { pointer-events: none; }\n.panic-alert-error .callstack-entry        .src:empty:before           { content: '<< SOURCE NOT LOADED >>'; color: rgba(0,0,0,0.25); }\n.panic-alert-error .callstack-entry.native .src:empty:before           { content: '<< NATIVE CODE >>'; color: rgba(0,0,0,0.25); }\n.panic-alert-error .callstack-entry        .src.i-am-busy:empty:before { content: '<< SOURCE LOADING >>'; color: rgba(0,0,0,0.5); }\n\n.panic-alert-error .test-log .location { transition: opacity 0.25s ease-in-out; color: black; opacity: 0.25; display: inline-block; overflow: hidden; text-overflow: ellipsis; vertical-align: middle; }\n.panic-alert-error .test-log .location:hover { opacity: 1; }\n\n.panic-alert-error .test-log .location:before { content: ' @ '; }\n\n.panic-alert-error .test-log .location .callee:after  { content: ', '; }\n.panic-alert-error .test-log .location .file          { opacity: 0.5; }\n.panic-alert-error .test-log .location .line:before   { content: ':'; }\n.panic-alert-error .test-log .location .line          { opacity: 0.25; }\n\n/*  Hack to prevent inline-blocked divs from wrapping within white-space: pre;\n */\n.panic-alert-error .test-log .inline-exception-entry:after { content: ' '; }\n.panic-alert-error .test-log .log-entry        .line:after { content: ' '; }\n.panic-alert-error           .callstack-entry  .line:after { content: ' '; }\n\n.panic-alert-error pre { overflow: scroll; border-radius: 2px; color: black; background: rgba(255,255,255,0.75); padding: 4px; margin: 0; }\n.panic-alert-error pre,\n.panic-alert-error pre * { font-family: Menlo, monospace; font-size: 11px; white-space: pre !important; }\n\n.panic-alert-error.inline-exception { max-width: 640px; border-radius: 0; margin: 0; background: none; display: inline-block; transform-origin: 0 0; transform: scale(0.95); }\n.panic-alert-error.inline-exception .panic-alert-error-message { cursor: pointer; }\n.panic-alert-error.inline-exception:not(:first-child) { margin-top: 10px; border-top: 1px solid #904C34; }\n\n"),a('<style type="text/css">').text(".useless-log-overlay {\tposition: fixed; bottom: 10px; left: 10px; right: 10px; top: 10px; z-index: 5000;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t\t-webkit-mask-image: -webkit-gradient(linear, left top, left bottom,\n\t\t\t\t\t\t\tcolor-stop(0.00, rgba(0,0,0,0)),\n\t\t\t\t\t\t\tcolor-stop(0.50, rgba(0,0,0,0)),\n\t\t\t\t\t\t\tcolor-stop(0.60, rgba(0,0,0,0.8)),\n\t\t\t\t\t\t\tcolor-stop(1.00, rgba(0,0,0,1))); }\n\n.useless-log-overlay-body {\n\n\tfont-family: Menlo, monospace;\n\tfont-size: 11px;\n\twhite-space: pre;\n\tbackground: rgba(255,255,255,1);\n\ttext-shadow: 1px 1px 0px rgba(0,0,0,0.07); position: absolute; bottom: 0; left: 0; right: 0; }\n\n.ulo-line \t\t{ white-space: pre; word-wrap: normal; }\n.ulo-line-where { color: black; opacity: 0.25; }")])})(jQuery);
